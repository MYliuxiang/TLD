<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
    <title>移动端</title>
    <link rel="stylesheet" href="./css/weui.css">
    <link rel="stylesheet" href="./css/example.css" />
    <link rel="stylesheet" href="./css/pick-pcc.min.1.0.1.css">
    <link rel="stylesheet" href="./css/toast.style.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/wei.css">
    <link rel="stylesheet" href="./css/oil_css.css">
</head>
<style> 
	body{
		margin:0;
        padding:0;
        font-size:0.8rem;
        list-style: none;
        text-decoration: none;
	}
    .mine-body-area {
        width: 100%;
        height: 54px;
        background-color: #F6FFF7;
        line-height: 54px;
        font-size: 14px;
        text-indent: 5px;
        color: #00C901
    }
    .ttt{width:80px;height:30px;font-size: 12px;margin-left:0px;background-color: #008c00}
    /*公共样式*/
    .common{font-size:15px}
    .header-title{position: absolute;top:-2px;left:10px;}
    .login{background-color: white;width:100%;height:100%;position:absolute;left:0px;top:0px;z-index: 1100}
    #login_img{position:absolute;top:40px;left:50%;margin-left:-100px;width:200px;height:120px;}
    #login_img img{width:100%;height:100%;}
    .login_content{width:80%;height:100px;position: absolute;left:10%;top:50%;margin-top: -50px;}
   .login-item{width:100%;height:40px;display: flex;border-bottom: 2px solid #eee;}
    .login-item div{width:40px;height:40px;}
    .login-item div img{height:25px;margin:5px;}
    .login-item div input{height:40px;font-size: 16px;letter-spacing: 2px}
    .login-in-btn{position: absolute;bottom:100px;width:90%;left:5%}
    .login-footer{position:absolute;bottom:50px;z-index:1000;width:100%;display: flex;text-align: center}
    .login-footer div{flex:1}
    .login-footer div:first-child{border-right:2px solid #eee;}
    .weui-login-btn{background-color: #00c800;letter-spacing:2px;width:100%}
    .release-btn{width:90%;height:30px;border:none;outline: none;text-align: center}
    .addr-menu{color:gray;display: flex;justify-content: space-between;text-align: center;font-size: 14px;}
    #driver-menu{width:90%;height:30px;border:1px solid #008c00;display: flex;font-size:14px;line-height: 30px;margin:0 auto}
    #driver-menu div{flex:1;text-align: center;}
    #driver-menu>div+div{border-left:1px solid #008c00}
    .driver-menu-on{background-color: #008c00;color:white}
    .btn-groups{width:60px;height:20px;background-color:#008C00;border:none;color:white;border-radius: 5px;outline: none}
    .btn-groups-on{width:60px;height:20px;background-color:red;border:none;color:white;border-radius: 5px;outline: none}
    /* #view-btn{width:60px;height:20px;background-color:#008C00;border:none;color:white;border-radius: 5px;} */
    .view-btn{width:60px;height:20px;background-color:#008C00;border:none;color:white;border-radius: 5px;margin-bottom: 5px;}
    .border_bottom{border-bottom:1px solid #eee}
    #code-btn{width:100px;height:30px;background:#eee;line-height:30px;color:#008c00}
    #add_car{width:80%;height:40px;text-align:center;line-height:40px;background-color: #008c00;color:white;border-radius:5px;font-size:14px;margin:10px auto}
    .car_info{width:100%;height:25px;display:flex;line-height:25px;}
    .tab-nav-on{color:#EAF9FC}
    .code-img{width:150px;height:150px;margin:0 auto}
    .code_scan{width:30px;height:30px;position:absolute;right:30px;top:50%;margin-top:-15px;}
    .code_scan_l{width:30px;height:30px;position:absolute;left:30px;top:50%;display: none}
    .code_scan_r{width:30px;height:30px;position:absolute;right:80px;top:50%;margin-top:-15px;display: none}
    #agreement_page{position:fixed;z-index:999;top:0px;left:0px}
    .agree_img{width:100%;height: 719px;  outline-width:0px;vertical-align:top;}
    .choose-on{background:#A5CC9D;color:white}
    /* 货主照片 */
    .consignor-phone{width:90%;height:200px;margin:0 auto;border:1px dotted #008c00;display: none}
    /* 提示框样式 */
    #centerTips{display: none;z-index:999999;top:50%;width:50%;left:25%;background-color: #4C4C4C;border-radius: 0px;font-size:14px}
    /* 筛选 */
    #filter_btn{position: absolute;right:20px;top:10px}
    /* 银行卡信息 */
    .bankcard-item{width:94%;height:120px;margin:10px auto;border-radius: 15px;background-color: #FF9E37;color:white;}
    .bank-title{width:100%;height:30px;padding-left: 10px;padding-top: 10px;font-size: 16px;}
    /*提现面板样式*/
    .withdraw-title{flex: 1;text-align: left;margin-left:10px;}
    .withdraw-cont{flex: 1;text-align: right;margin-right:20px;}
    .color-class{color:gray}
	.line-style{height:20px;line-height:20px;font-size:16px;margin-left:10px;font-weight:bold}
	.view-groups{height:80px;border-bottom:3px solid #eee;color:black;font-size:14px;text-indent:10px;font-weight:bold}
	.message-groups{height:60px;font-size:16px;margin:0;line-height:60px;text-indent:10px;border-bottom:1px solid #eee}
	.msg-item{width:100%;height:auto;margin:5px 0;background-color:white}
	.msg-content{padding-left:10px;font-size:18px;line-height:2rem;height:100px;display:none}
    .bill-hide{display:none}
    /* 没有数据 */
    .nodata-style{width:100%;text-align:center;color:gray;display:none}
    .load-more-style{height:20px;border-radius: 15px;font-size: 12px;width: 100px;color:white;background-color: #4C4C4C;opacity: .6;left:50%;margin-left:-50px;display:none;}
    /* 回顶部 */
    .to-top{color:gray;text-decoration:underline;margin-left:10px}
    .mine-menu-tab{display:flex;width:100%;height: 30px;text-align: center;line-height: 30px;font-size:14px}
    .mine-bills-active{color:#008c00;border-bottom: 2px solid #008c00;}
    .goods-mine-paybtn{margin:5px 0px 5px 0px;font-size:12px;height:20px;line-height:20px;width:70px;color:black;text-align: right;margin-right:15px;border-radius:5px;border:1px solid #008c00;text-align:center}
    /* 页面回退按钮样式 */
    .back-extends{text-indent:10px;width:80px;text-align:left;background-color:transparent;}
    .waybills_style{width:94%;margin:0 auto;border-radius: 5px;color:gray;background:white;border-top:10px solid #eee}
    .personal-btn{width:100%;text-align:center;color:#336699;font-size:14px;padding-top: 10px;}
    .personal-page{width:100%;height:100vh;position:fixed;overflow:scroll;display:none;background-color: white;}
    .exit_{position:fixed;right:0px;top:0px;opacity: 0.3;}
    #geterror{padding:20px;position: fixed;z-index: 999999;display: none;background-color: #4C4C4C;color:white;font-size:20px;line-height:40px;height:1000px;width:100%;overflow:scroll;line-height: 100vh;text-align:center}
    .oil-main-header{width:100%;height:160px;background-image:url("./images/oil/mine/oil_mine_bg.png");background-size:cover; background-repeat: no-repeat;}
    .header-extend{color:white;background-image: url('./images/oil/home/oil_detail.png');}
    .top-fixed{position: fixed ;top:0px;left:0px;z-index:10}
    .top40{margin-top: 40px;}
</style>
<script charset="utf-8" src="https://map.qq.com/api/js?v=2.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77&libraries=drawing,geometry,autocomplete,convertor"></script>
<body style="position: relative">
<!-- 错误调试面板 -->
<div id="geterror"></div>
<div class="home-page-group road_maintain_page"  style="display:none;position: relative;overflow: hidden;">
    <div class="header-style" style="position: fixed;top:0px;left:0px;z-index:10">
        <div class="home_page-back header-title back-extends"><i class="weui-icon-back-arrow-thin" ></i></div>
        <p>道路抢修</p>
    </div>
    <div style="margin-top: 40px;">
        <img src="./images/home_page/car_weixiu_page1.png" style="width:100%">
    </div>
</div>
<div class="home-page-group car_maintain_page"  style="display:none;position: relative;overflow: hidden;">
    <div class="header-style" style="position: fixed;top:0px;left:0px;z-index:10" >
        <div class="home_page-back header-title back-extends"><i class="weui-icon-back-arrow-thin" ></i></div>
        <p>车辆维修</p>
    </div>
    <div style="margin-top: 40px;">
        <img src="./images/home_page/car_service_page1.png" style="width:100%">
    </div>
</div>
<div class="home-page-group public_page" style="display:none;position: relative;">
    <div class="header-style" style="position: fixed;top:0px;left:0px;z-index:10">
        <div class="home_page-back header-title back-extends"><i class="weui-icon-back-arrow-thin" ></i></div>
        <p>公众号平台</p>
    </div>
    <div style="margin-top: 40px;">
        <img src="./images/home_page/tpublic_page.png" style="width:100%">
    </div>
</div>
<div class="weui-tab weui-tab-edit">
    <!--tab-content-->
    <div class="weui-tab__panel panel_bottom" id='longtap-refresh'>
        <!--首页 -->
        <div class="panel-index">
            <!--页面主体-->
            <div class="weui-content">
                <!--轮播图-->
                <div class="swiper-container swiper-banner">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide swiper-slide-on"><a href="#"><img src="images/home/carousel/carousel_a.jpg" /></a></div>
                        <div class="swiper-slide"><a href="#"><img src="images/home/carousel/carousel_b.jpg" /></a></div>
                        <div class="swiper-slide"><a href="#"><img src="images/home/carousel/carousel_c.jpg" /></a></div>
                    </div>
                    <div class="swiper-pagination" style="margin-left:-25px;margin-top: 20px;">
                        <span><img src="images/home/carousel/carousel_active.png" style="width:15px;height:15px"></span>
                        <span style="opacity: .4"><img src="images/home/carousel/carousel_active.png" style="width:15px;height:15px"></span>
                        <span style="opacity: .4"><img src="images/home/carousel/carousel_active.png" style="width:15px;height:15px"></span>
                    </div>
                </div>
                <!--  头部tab切换-->
                <div class="page__bd" style="border: none;height:90px;background-color:#EAF9FC;top:130px;">
                    <div class="weui-tab">
                        <div class="weui-tab__panel" id="weui-tab__panel" style="margin-top:10px">
                            <div id="tab2" class="weui-tab__content" style="display:block;margin-top:-32px;">
                                <div class="weui-flex wy-iconlist-box">
                                    <div class="weui-flex__item page-goods-publish" style="margin-left: 16%;"><a
                                            href="#" class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/goods_ower/goods_a.png" width="40"
                                                              height="40"></div>
                                        <p>货源发布</p>
                                    </a></div>
                                    <div class="weui-flex__item page-goods-resources"><a href="#"
                                                                                         class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/goods_ower/goods_b.png" width="40"
                                                              height="40"></div>
                                        <p>我的货源</p>
                                    </a></div>
                                    <div class="weui-flex__item page-goods-ordermanage"><a href="#"
                                                                                           class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/goods_ower/goods_c.png" width="40"
                                                              height="40"></div>
                                        <p>订单管理</p>
                                    </a></div>
                                    <div class="weui-flex__item page-goods-mine"><a href="#"
                                                                                    class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/goods_ower/goods_d.png" width="40"
                                                              height="40"></div>
                                        <p style="margin-left:8px;">我的</p>
                                    </a></div>
                                </div>
                            </div>
                            <div id="tab1" class="weui-tab__content" style="display:none;margin-top:-32px;">
                                <div class="weui-flex wy-iconlist-box">
                                    <div class="weui-flex__item page-car-resource" style="margin-left: 16%;"><a
                                            href="#" class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/car_ower/car_resource.png" width="40"
                                                              height="40"></div>
                                        <p>货源大厅</p>
                                    </a></div>
                                    <div class="weui-flex__item page-car-ordermanage"><a href="#"
                                                                                         class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/car_ower/car_order.png" width="40"
                                                              height="40"></div>
                                        <p>订单管理</p>
                                    </a></div>
                                    <div class="weui-flex__item page-car-carmanage"><a href="#"
                                                                                       class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/car_ower/car_car.png" width="40"
                                                              height="40"></div>
                                        <p>车辆管理</p>
                                    </a></div>
                                    <div class="weui-flex__item home-mine page-car-mine"><a href="#"
                                                                                            class="wy-links-iconlist">
                                        <div class="img"><img src="images/home/car_ower/car_mine.png" width="40"
                                                              height="40"></div>
                                        <p style="margin-left:8px;">我的</p>
                                    </a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--选项-->
                <div style="background-color:#F7F7F7;">
                    <div style="height:10px"></div>
                    <div class="weui-flex" style="border:1px solid #eee;width:96%;margin-left:2%;margin-top:80px;background-color: white;">
                        <div class="weui-flex__item">
                           <div class='flex' style="height:40px;line-height:40px;border-bottom:1px solid #eee">
                               <div class="flex-item">
                                   <img src="./images/home_page/discount_gas.png" style="width:15px;height:15px;margin-left:10px;vertical-align: middle;">
                                   <span style="font-size:12px;font-weight: bold;margin-left:10px;vertical-align: middle;">优惠油气</span>
                                </div>
                               <div class="flex-item" style="text-align: right;">
                                    <img src="./images/home/arrow_right2.png" style="width:16px">
                               </div>
                           </div>
                           <div class='flex' id='enter_gas'>
                                <div class="flex-item">
                                    <p style="margin-top:10px;color:black;font-size:14px;padding-left: 10px;">特力达司机享大幅优惠</p>
                                    <p style="padding-left: 10px;">
                                        <span style="color:#F5BD44">平台优惠</span>+
                                        <span style="color:#F5BD44">会员优惠</span>+
                                        <span style="color:#F5BD44">站点优惠</span>
                                    </p>
                                    <p style="color:black;padding-left: 10px;padding-bottom:5px">特力达会员现在<span style="color:#d50100">马上加油</span></p>
                                </div>
                                <div  style="text-align: right;width: 60px;">
                                    <img src="./images/home_page/gas_supply.png" style="width:60px;height: 60px;margin-right: 10px;margin-top:5px">
                                </div>
                            </div>
                            <div style="width:96%;height:1px;background-color:#eee;margin:0 auto"></div>
                            <div class='flex' style="margin-top:5px" id="enter_recommend">
                                <div class="flex-item">
                                    <p style="padding-left:10px;margin-top:10px;color:black;font-size:14px">推荐人计划正式开启</p>
                                    <p style="padding-left:10px;color:black">
                                        关注公众号，马上成为推荐人，赚取油气点，查看详情
                                    </p>
                                </div>
                                <div style="text-align: right;width:60px">
                                    <img src="./images/home_page/recommend_plan.png" style="width:60px;height: 60px;margin-right: 10px;margin-top:5px">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="weui-flex" style="border:1px solid #eee;width:96%;margin-left:2%;margin-top:10px;background-color: white;">
                        <div class="weui-flex__item">
                           <div class='flex' style="height:40px;line-height:40px;border-bottom:1px solid #eee">
                               <div class="flex-item">
                                   <img src="./images/home_page/car_service.png" style="width:18px;height:18px;margin-left:10px;vertical-align: middle;">
                                   <span style="font-size:12px;font-weight: bold;margin-left:10px;vertical-align: middle;">车辆服务</span>
                                </div>
                               <div class="flex-item" style="text-align: right;">
                                    <img src="./images/home/arrow_right2.png" style="width:16px">
                               </div>
                           </div>
                           <div class='flex' id="enter_car_maintain">
                                <div class="flex-item" style="text-indent: 10px;">
                                    <p style="margin-top:10px;color:black;font-size:14px">汽车维修保养</p>
                                    <p style="color:black;">急速快修，价格公道，欢迎入驻</p>
                                </div>
                                <div style="text-align: right;width:80px;">
                                    <img src="./images/home_page/car_weixiu.png" style="width:80px;height: 60px;margin-right: 10px;margin-top:5px">
                                </div>
                            </div>
                            <div style="width:96%;height:1px;background-color:#eee;margin:0 auto"></div>
                            <div class='flex' style="margin-top:5px" id="enter_road_maintain">
                                <div class="flex-item">
                                    <p style="padding-left:10px;margin-top:10px;color:black;font-size:14px">道路救险服务</p>
                                    <p style="padding-left:10px;color:black">遇到困难不要慌，道路救援帮你忙</p>
                                </div>
                                <div style="text-align: right;width:80px">
                                    <img src="./images/home_page/car_help.png" style="width:80px;height: 60px;margin-right: 10px;margin-top:5px">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="height:10px"></div>
                </div>
            </div>
            <!--/主体-->
            <!-- 刷新 -->
            <div style="position: absolute;left:50%;top:50%;display: none;margin-left: -10px;" class='load-refresh'><i class="weui-loading weui-icon_toast"></i></div>
        </div>
        <!-- 货源-->
        <div class="panel-goods" id="panel-goods" style="position: relative;height:calc(100vh - 60px);">
            <header class='header'>
                <div class='code_scan_l scan_code'>
                    <img src="images/home/scan.png" style="width:100%;height:100%;">
                </div>
                <p style="line-height: 40px">最新货源</p>
                <div class="filter-operation" style="top:10px">
                    <span>筛选</span>
                    <img src="images/cars_source/resource.png">
                </div>
            </header>
            <!--主体-->
            <div class="main goods-page" id="goods-page-filter"  style="width:100%;height:85vh;overflow:scroll;">
                <div class='data'><div style="width:100%;text-align:center">暂无数据</div></div>
                <div class='menu' style="height:30px;background-color: #f2f2f2;margin-top: 10px">
                    <a href="javascript:" class="weui-btn weui-btn_default load-more load-more-style">加载更多</a>
                    <div class="nodata-style no-data-show">已经到底了!!!<a href='#top' class="to-top">回顶部</a></div>
                </div>
            </div>
            <!--/主体-->
            <!-- 存储分页数据 -->
            <input type="hidden" class="page-data">
        </div>
        <!-- 车源 -->
        <div class="panel-cars" style="display: none;background-color: #f2f2f2">
            <header class='header'>
                <p>车源大厅</p>
            </header>
            <!--头部搜索框-->
            <div class="search-bar">
                <div>
                    <i class="weui-icon-search" style="width:20px;height:20px;"></i>
                    <input class="weui-input search-input home-car-content" type="text" placeholder="请输入车牌">
                    <a href="#" class="filter-result home-car-filter-btn" style="color:gray;">查找</a>
                </div>
            </div>
            <!--主体-->
            <div class="main" id="car-page">
                <div class='data'><div style="width:100%;text-align:center">暂无数据</div></div>
                <div class='menu' style="height:30px;background-color: #f2f2f2;margin-top: 10px">
                    <a href="javascript:" class="weui-btn weui-btn_default car-load-more load-more-style">加载更多</a>
                    <div class="nodata-style car-nodata">已经到底了!!!<a href='#top1' class="to-top">回顶部</a></div>
                </div>
            </div>
            <!-- 存储分页数据 -->
            <input type="hidden" class="car-page-data">
            <!--/主体-->
        </div>
        <!-- 订单 -->
        <div class="panel-order" style="display: none">
            <div class='orders-both' id="driver-order" >
                <header class='header'>
                    <p>我的订单</p>
                </header>
                <!--主体-->
                <div class="main order-page" style="height:83vh;background-color: #eee;overflow: auto;position: relative;">
                    <div id='driver-menu'>
                        <div class='driver-menu-on'>未完成</div>
                        <div>已完成</div>
                        <div>已结算</div>
                    </div>
                    <!-- vue -->
                    <div id='driver-orders'>
                        <div class="order-group  order-group-on" id="order-unfinished" style="text-align: center;">
                            暂无数据
                        </div>
                        <div class="order-group" style="overflow: scroll;">
                            <div style="width:100%;text-align: center;margin-top: 15px">暂无数据</div>
                        </div>
                        <div class="order-group" style="overflow: scroll;">
                            <div style="width:100%;text-align: center;margin-top: 15px">暂无数据</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="orders-both" id="goods-order" style="display: none">
                <header class='header'>
                    <p>我的订单</p>
                </header>
                <!--主体-->
                <div >
                    <div class="order-tab">
                        <div class="content-top-left content-group " style="margin-left:20px;font-size: 16px;position: relative;">
                            <span class="tab-items order-item-on ">未完成</span>
							<span class="weui-badge" id="goods-unorder" style="position: absolute; top: -2px; left: 46px;">0</span>
                        </div>
                        <div class="content-top-right content-group">
                            <span class="tab-items" style="margin-right:15px;font-size: 16px;">已结算</span>
                        </div>
                        <div class="content-top-center content-group">
                            <span class="tab-items" style="font-size: 16px;">已完成</span>
                        </div>
                    </div>
                    <div style="width:100%;height:83vh;overflow: auto;background-color: #eee">
                        <div class="goods_order-group  order-group-on" style="overflow:scroll">
                            <div style="width:100%;text-align:center;margin-top:5px">数据加载中...</div>
                        </div>
                        <div class="goods_order-group" style="display: none;text-align: center;overflow:scroll;">
                            <div style="width:100%;text-align:center;margin-top:5px">数据加载中...</div>
                        </div>
                        <div class="goods_order-group " style="display:none;text-align: center;overflow:scroll;">
                            <div style="width:100%;text-align:center;margin-top:5px">数据加载中...</div>
                        </div>
                        <!-- 主机 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--tab-item-->
    <div class="weui-tabbar" style="background-color: white;">
        <a href="javascript:;" class="weui-tabbar__item weui-bar__item_on" id='home-index-tab'>
                <span class="bottom_tab_exchange">
                    <img src="images/tab/home_active.png" class="weui-tabbar__icon">
                </span>
            <p class="weui-tabbar__label">首页</p>
        </a>
        <a href="javascript:;" class="weui-tabbar__item">
            <img src="images/tab/source.png" class="weui-tabbar__icon">
            <p class="weui-tabbar__label">货源</p>
        </a>
        <a href="javascript:;" class="weui-tabbar__item">
            <img src="images/tab/cars.png"  class="weui-tabbar__icon">
            <p class="weui-tabbar__label">车源</p>
        </a>
        <a href="javascript:;" class="weui-tabbar__item">
            <img src="images/tab/orders.png" class="weui-tabbar__icon">
            <p class="weui-tabbar__label">订单</p>
        </a>
    </div>
</div>
<!-- 网商开通-验证码验证 -->
<div class="all-page page form_vcode js_show" id='message_check' style="display: none;">
    <div class="header-style">
        <div class="driver-info-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>网商开通</p>
    </div>
    <div class="weui-form">
      <div class="weui-form__text-area">
        <div class="weui-form__desc">开通平台钱包用户手机号验证</div>
      </div>
      <div class="weui-form__text-area">
        <div class="weui-form__desc" style="color:gray" id='remain-time'>60s</div>
      </div>
      <div class="weui-form__control-area">
        <div class="weui-cells__group weui-cells__group_form">
          <div class="weui-cells weui-cells_form">
              <div class="weui-cell weui-cell_active">
                  <div class="weui-cell__hd"><label class="weui-label" style="color: gray;">手机号</label></div>
                  <div class="weui-cell__bd">
                      <input class="weui-input" type="number" id='code-phone' readonly>
                  </div>
              </div>
              <div class="weui-cell weui-cell_active weui-cell_vcode">
                  <div class="weui-cell__hd"><label class="weui-label" style="color: gray;">验证码</label></div>
                  <div class="weui-cell__bd">
                    <input  class="weui-input" type="text" pattern="[0-9]*" id='code-input' placeholder="输入验证码" maxlength="6">
                  </div>
                  <div class="weui-cell__ft">
                    <button class="weui-btn weui-btn_default weui-vcode-btn" id='disabled-btn' style="color: gray;">重新获取</button>
                    <button class="weui-btn weui-btn_default weui-vcode-btn" id='get-valcode' style='display:none'>重新获取</button>
                  </div>
              </div>
          </div>
        </div>
      </div>
      <div class="weui-form__opr-area">
        <a class="weui-btn weui-btn_primary weui-btn_disabled" href="javascript:" id='code-sure'>开通</a>
      </div>
    </div>
    <div id="js_toast" style="display: none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-icon-success-no-circle weui-icon_toast"></i>
            <p class="weui-toast__content">已完成</p>
        </div>
    </div>
</div>
<!-- 银行卡删除确认面板 -->
<div class="all-page js_dialog" id="bank-del-page" style="display: none;">
    <div class="weui-mask"></div>
    <div class="weui-dialog weui-skin_android">
        <div class="weui-dialog__hd"><strong class="weui-dialog__title"></strong></div>
        <div class="weui-dialog__bd">
            <img src='./images/home/warn.png' style="width:20px;height:20px;vertical-align:middle"><span style="vertical-align: middle;margin-left:5px">是否确认删除银行卡?</span>
        </div>
        <div class="weui-dialog__ft">
            <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="bank-del-cancel">取消</a>
            <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_primary" id='bank-del-sure'>确认</a>
        </div>
    </div>
</div>
<!-- 车辆删除确认面板 -->
<div class="all-page js_dialog" id="car-del-page" style="display: none;">
    <div class="weui-mask"></div>
    <div class="weui-dialog weui-skin_android">
        <div class="weui-dialog__hd"><strong class="weui-dialog__title"></strong></div>
        <div class="weui-dialog__bd">
            <img src='./images/home/warn.png' style="width:20px;height:20px;vertical-align:middle"><span style="vertical-align: middle;margin-left:5px">是否确认删除车辆?</span>
        </div>
        <div class="weui-dialog__ft">
            <input type="hidden" id='current-car-id'>
            <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="car-del-cancel">取消</a>
            <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_primary" id='car-del-sure'>确认</a>
        </div>
    </div>
</div>
<!-- 物流协议 -->
<div id='agreement_page' class="all-page" style="display: none;">
    <header class="wy-header">
        <div class="wy-header-icon-back agree-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin" style="text-align: left"></i></div>
        <div class="wy-header-title">物流协议</div>
    </header>
    <div style="width:100%;height:100vh;overflow:scroll;">
        <img src="./images/home/agree1.png" class='agree_img'>
        <img src="./images/home/agree2.png" class='agree_img'>
        <img src="./images/home/agree3.png"  style="width:100%">
    </div>
</div>
<!-- 网商-开通确认-->
<div  id='bank-open' style="display:none">
    <div class="js_dialog"  style="opacity: 1;">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            
            <div style="font-size:16px;text-align:left;font-weight: bold;padding:0px 5px;margin-top:5px">
                <img src="./images//home/bank-logo.png" style="width:40px;height:40px;border-radius:50%;">您正在开通网商银行订单账款服务，开通后可使用特力达物流平台钱包服务</div>
            <div style="text-align: left;padding:0px 5px;text-indent: 1rem;"><img src="./images/home/warn.png" style="vertical-align: middle;margin-right:5px"><span style="vertical-align: middle;">阅读并同意特力达物流平台钱包服务使用协议、网商银行订单账款协议后，才能开通本应用</span></div>
            <p style="text-align:left;padding:0px 5px;text-indent: 1rem;"><input  type="checkbox" id='sure-contract' style="vertical-align: middle;">我已阅读并同意<span style="color:#6198FA">《特力达物流平台钱包服务使用协议》</span><span style="color:#6198FA">《网商银行订单账款合同》</span></p>
            <div class="weui-cells__group weui-cells__group_form">
                <div style="font-size:16px" id='type_page'>        
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="sure-cancel" style="font-size:14px;border:1px solid #6198FA;color:#6198FA;height:30px;line-height: 30px;border-radius:5px">取消</a>
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="sure-btn" style="font-size:14px;border:1px solid #6198FA;color:#6198FA;height:30px;line-height: 30px;border-radius:5px">立即开通</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!--用户-提现确认面板-->
<div id="withdraw-page" style="display: none">
    <div class="js_dialog"  style="opacity: 1;">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            <h3 style="text-align: left;margin-left:10px;;font-size: 16px;margin-top:10px">确认您的提现信息</h3>
            <div style="color:gray;font-size: 14px;">
                <div style="display: flex">
                    <div class='withdraw-title'>提现户名:</div>
                    <div class="withdraw-cont" id='bank-account'>--</div>
                </div>
                <div style="display: flex">
                    <div class='withdraw-title'>提现银行:</div>
                    <div class="withdraw-cont" id='bank-out'>--</div>
                </div>
                <div style="display: flex">
                    <div class='withdraw-title'>提现账户:</div>
                    <div class="withdraw-cont" id='bank-card'>--</div>
                </div>
                <div style="display: flex">
                    <div class='withdraw-title'>提现金额:</div>
                    <div class="withdraw-cont"><span style="color:#E8B586" id="cash_num"></span>元</div>
                </div>
            </div>
            <div class="weui-cells__group weui-cells__group_form">
                <div style="font-size:16px" >
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id='withdraw-cancel'>确认</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!--零钱提现面板-->
<div class="page form_textarea js_show" id="withdraw" style="display: none">
    <header class="wy-header" style="background-color:#eee">
        <div class="wy-header-icon-back cash-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                style="text-align: left"></i></div>
        <div class="wy-header-title">提现</div>
    </header>
    <div class="wrap">
        <div class="tixian-box">
            <div class="tobank">
                <span class="dzyh" style="font-size: 14px">到帐银行卡</span>
                <span class="yhk" style="font-size: 14px" id='data_getbank'>----</span>
                <span class="dz" style="font-size: 0.6rem">2小时内到帐</span>
            </div>
            <div class="t-moneys" style="font-size: 14px">
                <span class="txje" style="font-size: 14px">提现金额</span>
                <span class="rmb">￥</span>
                <span class="kyye">当前零钱余额：<span id='bal'></span>元，<a href="javascript:;" id="getall"></a></span>
                <input type="number" id="getmoneys" class="t-input">
                <button class="getout" id='getout' data-type="withdraw" style="width:100px;left:50%;margin-left:-50px">提现</button>
            </div>
        </div>
    </div>
</div>
<!-- 确认提现面板 -->
<div class="page form_textarea js_show" id="confirm-withdraw" style="display: none">
    <header class="wy-header" style="background-color:#eee">
        <div class="wy-header-icon-back cash-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                style="text-align: left"></i></div>
        <div class="wy-header-title">确认提现</div>
    </header>
    <div class="wrap">
        <div class="tixian-box">
            <div class="weui-flex" style="margin-left:20px">
                <div style="width:100px"><div class="placeholder">订单号</div></div>
                <div class="weui-flex__item"><div class="placeholder" id='data_getbid'>---</div></div>
            </div>
            <div class="weui-flex" style="margin-left:20px">
                <div style="width:100px"><div class="placeholder">提现金额</div></div>
                <div class="weui-flex__item"><div class="placeholder" id='get-withdraw-cash'>---</div></div>
            </div>
                <div class="weui-flex" style="margin-left:20px">
                <div style="width:100px"><div class="placeholder">短信验证码</div></div>
                <div class="weui-flex__item"><div class="placeholder"><input type="number" class="weui-input" id="id_smsCode" value="888888"> </div></div>
            </div>
            <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary getout" data-type="confirm-withdraw" style="width:100px;left:50%;margin-left:-50px">确认提现</a>
        </div>
    </div>
</div>
<!--充值面板-->
<div class="page form_textarea js_show" id="recharge" style="display: none">
    <header class="wy-header" style="background-color:#eee">
        <div class="wy-header-icon-back cash-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                style="text-align: left"></i></div>
        <div class="wy-header-title">充值</div>
    </header>
    <div class="wrap">
        <div class="tixian-box">
            <div class="tobank">
                <div style="display: flex">
                    <div style="flex: 1;padding-left:10px">户名</div>
                    <div style="flex: 1"></div>
                </div>
                <div style="display: flex">
                    <div style="flex: 1;padding-left:10px">收款银行</div>
                    <div style="flex: 1">浙江网商银行股份有限公司</div>
                </div>
                <div style="display: flex">
                    <div style="flex: 1;padding-left:10px">收款专用编号</div>
                    <div style="flex: 1">99010012</div>
                </div>
                <div style="display: flex">
                    <div style="flex: 1;padding-left:10px">联行号</div>
                    <div style="flex: 1">--</div>
                </div>
            </div>
            <div class="t-moneys" style="margin-top:8px">
                <span class="txje" style="left:10px">充值金额</span>
                <span class="rmb" style="left:10px;margin-top:5px">￥</span>
                <span class="kyye"><a href="javascript:;" ></a></span>
                <input type="number"  id="push-num" class="t-input" autofocus style="margin-top:15px">
                <a class="weui-btn weui-btn_primary" href="javascript:" id="push" style="width:100px;height:30px;line-height: 10px;margin-top:15px">充值</a>
            </div>
        </div>
    </div>
</div>
<!-- 充值成功 -->
<div class="page msg_success js_show" id="finish-page" style="display: none">
    <div class="weui-msg">
        <div class="weui-msg__icon-area"><i class="weui-icon-success weui-icon_msg"></i></div>
        <div class="weui-msg__text-area">
            <h2 class="weui-msg__title" style="font-size: 16px;">充值成功</h2>
            <span style="font-size: 30px">￥</span>
            <span style="font-size: 30px" id="money"></span>
        </div>
        <div class="weui-msg__opr-area">
            <p class="weui-btn-area">
                <a class="weui-btn weui-btn_primary" id="finished" style="background-color: #008c00">完成</a>
            </p>
        </div>
    </div>
</div>
<!-- 特力达网络货运平台运输业务规则 -->
<div id="tld-transport" style="position: fixed;z-index: 10000;width:100%;display: none;">
    <div class="header-style">
        <div class="tld-transport-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:black"></i></div>
        <div id='detail-title'>特力达运输业务规则</div>
    </div>
    <div style="height:99vh;overflow:scroll;">
        <img src="./images/home/yunshu-1.png" style="display: block;width:100%">
        <img src="./images/home/yunshu-2.png" style="display: block;width:100%">
        <img src="./images/home/yunshu-3.png" style="display: block;width:100%">
    </div>
</div>
<!-- 评价面板 -->
<div class='all-page' id='view-page' style="display:none">
    <header class="wy-header">
        <div class="wy-header-icon-back view-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                                style="text-align: left"></i></div>
        <div class="wy-header-title">评价运单</div>
    </header>
    <div class="weui-form">
        <div style="width:200px;height:20px;margin:0 auto">
            <span>打分</span>
            <select id='grades' style="width:150px">
                <option value="1">1分</option>
                <option value="2">2分</option>
                <option value="3">3分</option>
                <option value="4">4分</option>
                <option value="5">5分</option>
                <option value="6">6分</option>
                <option value="7">7分</option>
                <option value="8">8分</option>
                <option value="9">9分</option>
                <option value="10" selected>10分</option>
            </select>
        </div>
        <div class="weui-form__control-area">
            <div class="weui-cells__group weui-cells__group_form">
            <div class="weui-cells weui-cells_form">
                <div class="weui-cell ">
                    <div class="weui-cell__bd">
                        <textarea class="weui-textarea" placeholder="请您对此次运单进行评价" rows="5" id='view-content' maxlength="15"></textarea>
                        <div class="weui-textarea-counter"><span id='view-nums'>0</span>/15</div>
                    </div>
                </div>
            </div>
            </div>
        </div>
        <div class="weui-form__opr-area">
            <a class="weui-btn weui-btn_primary" href="javascript:" id="give_view" style="width: 80%;border-radius:20px;">发布</a>
        </div>
        </div>
</div>
<!-- 系统退出toast -->
<div class="all-page weui-toast" id='exit_page' style="display: none;">
    <i class="weui-loading weui-icon_toast"></i>
    <p class="weui-toast__content">账号退出中</p>
</div>
<!-- 系统进入toast -->
<div class="weui-toast" id='enter_page' style="display: none;">
    <i class="weui-icon-success-no-circle weui-icon_toast"></i>
    <i class="weui-icon-info weui-icon_msg" style="display: none;"></i>
    <i class="weui-icon-success weui-icon_msg" style="display: none;"></i>
    <p class="weui-toast__content">登录成功</p>
</div>
<!-- 操作提示面板 -->
<div class="weui-toptips weui-toptips_warn" id="centerTips">提示信息</div>
<!-- 单选面板 -->
<div style="display: none;" id='single_page'>
    <div class="js_dialog" style="opacity: 1; ">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            <div style="font-size:16px">请选择</div>
            <div class="weui-cells__group weui-cells__group_form">
                <div style="font-size:16px" id='get_type'>
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="register-close" style="font-size:16px;background-color:#2ECC71;height:30px;line-height: 30px;color:white;border-radius:5px">确定</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 货主-运单详情 -->
<div class="all-page goods goods-order-details" style="display: none">
    <header class="wy-header">
        <div class="wy-header-icon-back goods-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                                style="text-align: left"></i></div>
        <div class="wy-header-title">货源单详情</div>
    </header>
    <input type="hidden" id="postition_latlng">
    <div class="weui-cell resource-num">
        <div class="weui-cell">
            <div class="weui-cell__ft"> <img src="images/home/transport_num.png" style="vertical-align: middle"></div>
            <p style="margin:0px 10px">货运单号</p>
        </div>
        <div class="weui-cell__ft" style="color:#008C00" id='data_goods-id'></div>
    </div>
    <div class="weui-cell " style="  padding: 0px 10px;">
        <div class="weui-cell">
            <div class="weui-cell__ft"> <img class="go-address" src="images/home/start_position.png"></div>
            <p style="width: 55px;">出发地址</p>
        </div>
        <div class="weui-cell" id="data_start-pos"></div>

    </div>
    <div class="weui-cell " style="padding: 0px 10px;">
        <div class="weui-cell">
            <div class="weui-cell__ft"> <img class="go-address" src="images/home/end_position.png"></div>
            <p style="width: 55px;">目的地址</p>
        </div>
        <div class="weui-cell" id="data_end-pos"></div>
    </div>
    <div class="weui-cell " style="padding: 0px 25px; width: 100%;">

    </div>
    <div class="weui-flex" style="margin: 20px; ">
        <div class="weui-flex__item">
            <span class="placeholder" style="width:30%">发货人：</span>
            <span class="" id='data_sender'></span>
        </div>
        <div class="weui-flex__item">
            <span class="placeholder" style="width:30%">电话：</span>

            <span class="" id='data_sender-phone'></span>
        </div>
    </div>
    <div class="weui-flex" style=" margin: 20px;padding-bottom: 20px;  ">
        <div class="weui-flex__item">
            <span class="placeholder" style="width:30%">收货人：</span>
            <span id="data_reciver"></span>
        </div>
        <div class="weui-flex__item">
            <span class="placeholder" style="width:30%">电话：</span>
            <span class="" id="data_reciver-num"></span>
        </div>
    </div>
    <div class="weui-cells__group weui-cells__group_form goods-type" >
        <div class="weui-cells__title" style="font-size:12px">
            <img src="images/home/color-metals.png">
            <span>货物类型：</span>
            <span id="data_type"></span>
        </div>
        <div class=" weui-cells_form">
            <div class="weui-flex" style="margin:0px 60px 10px">
                <div class="need-car-num">
                    <span class="placeholder" style="width:30%">需求车数：</span>
                    <span class="" id="data_car-num">0</span>车
                </div>
                <div class="weui-flex__item" style="margin-left: 30px;">
                    <span class="placeholder" style="width:30%">剩余车数：</span>
                    <span class="" id="data_remains">0</span>车
                </div>
            </div>

        </div>
        <div class=" weui-cells_form">
            <div class="weui-flex" style="margin:0px 60px 10px">
                <div class="need-car-num" >
                    <span class="placeholder" style="width:30%">货物单价：</span>
                    <span class="" id="data_single-price"></span>
                </div>

            </div>

        </div>
        <div class=" weui-cells_form">
            <div class="weui-flex" style="margin:0px 60px 10px">
                <div class="need-car-num" >
                    <span class="placeholder" style="width:30%">货物总重：</span>

                    <span class="" id="data_weight"></span>吨
                </div>
                <div class="weui-flex__item" style="margin-left: 30px;">
                    <span class="placeholder" style="width:30%">剩余重量：</span>
                    <span id='data_remains_weight'></span>
                </div>
            </div>

        </div>
        <div class="weui-cell " style="width: 280px;">
            <div class="weui-cell__bd" style="margin:0px 25px 10px">
                <p>货物描述</p>
            </div>
            <div class="weui-cell__ft" id="data_desc"></div>
        </div>
    </div>
    <div class="weui-cells__group weui-cells__group_form " >
        <div class="weui-cells__title" style="font-size:12px">
            <img src="images/home/home_info.png">
            <span>费用信息</span>
        </div>

        <!-- <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>装车费</p>
            </div>
            <div class="weui-cell__ft">0元</div>
        </div>
        <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>卸车费</p>
            </div>
            <div class="weui-cell__ft">0元</div>
        </div>
        <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>每车总运费</p>
            </div>
            <div class="weui-cell__ft">660.30元</div>
        </div>
        <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>运费单费</p>
            </div>
            <div class="weui-cell__ft">0元</div>
        </div>-->
        <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>委托人</p>
            </div>
            <div class="weui-cell__ft" id="data_consignor"></div>
        </div>
        <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>联系电话</p>
            </div>
            <div class="weui-cell__ft" id="data_consignor-num"></div>
        </div>
        <div class="weui-cell " >
            <div class="weui-cell__bd">
                <p>货物备注：</p>
            </div>
            <div class="weui-cell__ft" id="data_remark"></div>
        </div>
    </div>
    <input type="hidden" id="gid">
    <div style="width:100%;height:20px;"></div>
</div>
<!-- 隐私政策 -->
<div class="personal-page" style="z-index:999999;">
    <img src="./images/home/personality.png" style="width:100%">
    <div class="exit_ exit_btn">
        <img src="./images/home/personality_exit.png" style="width:40px;height: 40px;">
    </div>
    <div class="exit_btn" style="margin-bottom: 20px;">
        <a href="javascript:" class="weui-btn weui-btn_primary">确定</a>
    </div>
</div>
<!--登录面板-->
<div class="login" style="display:none;position:fixed;z-index:99999">
    <div class="header-style" style="border:none">
        <div id="login-close" class=" header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
    </div>
    <div class='keybord-change'>
        <div  id="login_img" >
            <img src="./images/home/home_logo.png">
        </div>
    </div>
    <form name="login-form" id="login_form">
        <div class="login_content">
            <div class="login-item">
                <div><img src="./images/home/account.png"></div>
                <div style="flex:1;"><input type="text" class="weui-input"  id='login_user' name="user" placeholder="请输入用户名" ></div>
            </div>
            <div class="login-item">
                <div><img src="./images/home/pwd.png"></div>
                <div style="flex:1"><input type="password"  class="weui-input input_pwd" id='login_pwd' name="psw" placeholder="请输入密码"></div>
                <input class="weui-input" type="hidden" name="valid" value="666666">
                <div class="hiddengroup" ><img class="ishidden_pwd" src="./images/home/see_pwd.png" ></div>
                <div class="hiddengroup" style="display: none"><img class="ishidden_pwd" src="./images/home/see_pwd_on.png" style="height:20px;margin-top:8px;"></div>
            </div>
            <div id="id_validArea" style="display: none">
                <div class="login-item"  style="flex-wrap:wrap;">
                    <div><img src="./images/home/check_code.png"></div>
                    <div style="flex:1;"><input type="text" class="weui-input" name="valid" placeholder="请输入验证码"></div>
                </div>
                <img id="id_valid"  src="./images/home/car-insurance-2.png" style="margin-left:10px;height:40px;width: auto" />
            </div>
            <div style="text-align: center;"><input type="checkbox" style="vertical-align: middle;"><span style="vertical-align: middle;">我已了解特力达供应链APP</span><span class="personal-btn" style="vertical-align: middle;">隐私政策</span></div>
        </div>
    </form>
    <div class="login-in-btn">
        <a href="javascript:" class="weui-btn weui-btn_primary weui-login-btn" id="id_submit">登录</a>
    </div>
    <div class="login-footer">
        <div id="forget_pwd" style="height:30px;font-size:14px">忘记密码</div>
        <div id="register_btn" style="height:30px;font-size:14px">用户注册</div>
    </div>
</div>
<!-- /*注册*/ -->
<div class="register" style="display:none">
    <div class="js_dialog" style="opacity: 1; ">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            <div class="weui-cells__group weui-cells__group_form">
                <div class="weui-form__text-area">
                    <div class="weui-form__desc is-title">注册账号</div>
                    <div class="weui-form__desc is-title">忘记密码</div>
                </div>
                <form id='rform' style="border:none;outline: none;">
                    <div class="weui-cells weui-cells_form">
                        <div class="weui-cell weui-cell_active">
                            <div class="weui-cell__hd"></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input" type="number" id="rphone" placeholder="请输入正确手机号" name='phone'>
                            </div>
                        </div>
                        <div class="weui-cell weui-cell_active">
                            <div class="weui-cell__hd"></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input" type="number" id="vcode" placeholder="输入验证码">
                            </div>
                            <div id='code-btn'><p  id='get_code'>获取验证码</p></div>
                        </div>
                        <div class="weui-cell weui-cell_active">
                            <div class="weui-cell__hd"></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input is-register" type="text" id='rpwd' name="psw_a" placeholder="输入密码">
                                <input class="weui-input is-register" id="pass" type="number" pattern="[0-9]*" name="password"  placeholder="输入新密码">
                            </div>

                        </div>
                        <div class="weui-cell weui-cell_active">
                            <div class="weui-cell__hd"></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input" type="text" id='rerpwd' placeholder="再次输入密码" >
                            </div>
                        </div>
                        <!-- <div class="weui-cell weui-cell_active" style="font-size:12px;;">
                            <div class="weui-cell__hd" >
                
                            </div>
                            <div class="weui-cell__bd" >
                                <input class="weui-input" type="text" style="color:red;" value="注：密码含字母,数字和特殊字符,长度大于8位." readonly><br>
                                <input class="weui-input" type="text" style="color:red;" value="   (示例：T123456*)" readonly><br>
                            </div>
                        </div> -->
                    </div>
                </form>
                <div class="weui-form__text-area" style="border:none;text-decoration:none;outline:none">
                    <div class="weui-form__desc check-tld" style='font-size:14px;color:#336699;opacity: 0.8;'>《特力达网络货运平台运输业务规则》</div>
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="close_page">取消</a>
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_primary"><span class="is-btn" id='register-work'>注册</span><span class="is-btn" id='forget-work'>提交</span></a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 货主确认支付-->
<div class="all-page consignor-sure-pay" style="display:none">
    <div class="js_dialog" style="opacity: 1; ">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            <div class="weui-cells__group weui-cells__group_form">
                <div>
                    <form style="margin-top: 15px;">
                        <h3 style="margin-bottom: 10px;">请填入支付金额</h3>
                        <p style="margin-top:5px;height:30px;">
                            <input  type="number" style="height: 25px;border:1px solid gray" class="cash-val">
                        </p>
                        <p style="color:gray" class="actual-pay-cash">合同运费为-元</p>
                    </form>
                    </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_default" style="color:black;font-size:14px" id='cancel-cash'>取消</a>
                    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_warn" style="color:#008c00;font-size:14px" id='sure-cash'>确定</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 装货 -->
<div class="all-page load-goods-page" style="display: none;">
    <div class="js_dialog" style="opacity: 1; ">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            <div class="weui-cells__group weui-cells__group_form">
                <div class="weui-form__text-area">
                    <div class="weui-form__desc is-title">装货</div>
                </div>
                <div>
                    <form id="load-form">
                        <p style="height:30px;margin-top:5px;">装货时间：<input  type="datetime-local" class='load-time' id="load-time" style="height:20px;width:150px;"></p>
                        <p style="margin-top:5px;height:30px;">装货重量：<input  type="number"  class="load-weight" style="height:20px;width:150px;"></p>
                        <p style="margin-top:5px;height:30px;text-align: left;margin-left:12%">上传凭证:</p>
                        <div style="width:100px;height:100px;margin:0 auto" id='choose_img_load'>
                            <img src='./images/home/add_img.png' style="width:100%;height:100%">
                            <input type="hidden" id='img_load_fid'>
                        </div>
                    </form>
                    </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="load-cancel">取消</a>
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_primary"><span id='load-work'>确定</span></a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 卸货 -->
<div class="all-page unload-goods-page" style="display:none">
    <div class="js_dialog" style="opacity: 1; ">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-skin_android">
            <div class="weui-cells__group weui-cells__group_form">
                <div class="weui-form__text-area">
                    <div class="weui-form__desc is-title">卸货</div>
                </div>
                <div>
                    <form id='unload-form'>
                        <p style="height:30px;margin-top:5px;">卸货时间：<input  type="datetime-local" class='unload-time' id='unload-time' style="height:20px;width:150px;"></p>
                        <p style="margin-top:5px;height:30px;">卸货重量：<input  type="number" class='unload-weight'  style="height:20px;width:150px;"></p>
                        <p style="margin-top:5px;height:30px;text-align: left;margin-left:12%">上传凭证:</p>
                        <div style="width:100px;height:100px;margin:0 auto" id='choose_img_unload'>
                        <img src='./images/home/add_img.png' style="width:100%;height:100%">
                        <input type="hidden" id='img_unload_fid'>
                    </div>
                    </form>
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="unload-cancel">取消</a>
                    <a href="javascript:" class="weui-dialog__btn weui-dialog__btn_primary"><span id='unload-work'>确定</span></a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ---------------------------加油站START------------------------------------ -->
<!-- 附近加油站 -->
<div class="all-page home home-oil" style="display: none;">
    <div class="weui-tab">
        <div class="weui-tab__panel oil-page-group" style="background-color:white;">
            <!-- 首页 -->
            <div class='oil-group'>
                
                <!-- 头部导航 -->
                <form action="" id='my-form'>
                    <!-- 顶部筛选操作 -->
                    <div class="header-menu1" style="position: fixed;left: 0px;top: 0px;z-index:999">
                        <div style="flex:1">
                            <div>
                                <img src="./images/oil/home/oil_search.png" id='oil-search'>
                                <input type="text" class="weui-input station-filter" placeholder="搜索附近加油站" style="height:90%;width:80%;">
                            </div>
                        </div>
                        <div style="width:40px;height:100%;">
                            <img src="images/oil/home/oil_exit.png"  class="exit-gas">
                        </div>
                    </div>
                </form>
                <!-- 背景消息区-->
                <div class="oil-home-msg">
                    <div class="nav-pic">
                        <img src="./images/oil/home/header-data.png" style="width:100%;height:100%">
                    </div>
                    <div class='oil-msg'>
                        <img class="img-mid oil-img" src="./images/oil/home/horn.png" style="vertical-align: middle;">
                        <marquee 
                            direction="up"
                            behavior="scroll"
                            scrollamount="10"
                            scrolldelay="1000"
                            loop="-1"
                            hspace="100"
                            vspace="12"
                            onMouseOut="this.start();"
                            onMouseOver="this.stop();"
                            style="vertical-align: middle;display: inline-block;">
                            车主185****3456,30秒前加油234元<br />
                            车主170****8444,40秒前加油100元<br />
                            车主135****2999,52秒前加油300元<br />
                            车主187****3999,1小时前加油100元<br />
                            车主135****5618,1小时前加油200元<br />
                            车主182****1001,2小时前加油350元<br />
                            车主152****2181,3小时前加油260元<br />
                            车主131****3109,3.2小时前加油400元<br />
                            车主134****3508,3.5小时前加油150元<br />
                            车主192****3612,4小时前加油300元<br />
                            车主185****5638,一天前加油220元<br />
                        </marquee>
                    </div>
                    <div class="flex oil-home-filter" style="border-bottom: 1px solid #eee;">
                        <div class="flex-item">
                            <div class="placeholder">
                                <p style="padding-top:10px;">
                                    <span class="oil-filter-group" ><span class='filters filter-distance'>100KM内</span><img src="./images/oil/home/push.png" style="vertical-align: middle;"></span>
                                </p>
                            </div>
                        </div>
                        <div class="flex-item">
                            <div class="placeholder">
                                <p style="padding-top:10px">
                                    <span class="oil-filter-group" ><span class='filters filter-goods'>0#</span><img src="./images/oil/home/push.png" style="vertical-align: middle;"></span>
                                </p>
                            </div>
                        </div>
                        <div class="flex-item">
                            <div class="placeholder">
                                <p style="padding-top:10px">
                                    <span class="oil-filter-group"><span class='filters filter-price'>距离排序</span><img src="./images/oil/home/push.png" style="vertical-align: middle;"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="filter-page">
                </div>
                <div id="filter-page-item">
                <!-- <div class='load-gas'><i class="weui-loading weui-icon_toast"></i></div> -->
                </div>
                <!-- 下拉加载区 -->
                <!-- <div style="padding-top:210px;text-align:center">
                    数据加载中<br>
                    释放更新数据
                </div> -->
                <!-- <div class="frash-img">
                    <img src="./images/home/refrash.png" style="width:100%;height:100%"><br />
                </div> -->
                <p style="text-align: center;color: gray;margin-top:190px" id='refrash-content'>数据更新中,请稍等...</p>
                <!--数据区 -->
                <div class='oil-data' id='oil_list' style="margin-top:10px">
                </div>
                <div style="height:60px;width:100%"></div>
                <div class='load-gas'>
                    <i class="weui-loading weui-icon_toast"></i><br />
                    <p style="margin-left: -34px;">数据加载中,请稍等...</p>
                </div>
            </div>
            <!-- 订单 -->
            <div class='oil-group' style="width:100%;display:none;">
                <div class='order-header' style="position: fixed;top:0px;left:0px;z-index:10">
                    <div style="width:100%;height:40px;">
                        <img src="./images/oil/order/order-title.png" style="width:100%;height:100%">
                    </div>
                    <div class="oil-filter">
                        <div style="width:90%;margin:0 auto">
                            <select class="weui-select oil-filter-select"></select>
                            <img src="images/oil/home/oil_arrow_down.png" style='vertical-align: middle;'>
                        <p style="font-size: 12px;">支出油气费：<span class='total-cash'>-</span>元</p>
                        </div>
                    </div>
                </div>
                <div class="oil-order-data"></div>
                <div style="width:100%;height:60px"></div>
            </div>
            <!-- 我的 -->
            <div class='oil-group' style="display: none;">
                <!-- 头部 -->
                <div class='oil-main-header'>
                    <div style='padding:10px 0px 0px 10px'>
                        <input type="hidden" id='content-hidden'>
                        <img src="images/oil/mine/oil-msg.png" class="oil-mine-msg-btn" style="width:25px;height:25px">
                        <span class="oil-mine-msg"></span>
                    </div>
                    <div class="s-oil-mine-head">
                        <img src="images/oil/mine/oil-head.png"  style="width:100%;height:100%">
                    </div>
                    <div class="oil-phone user-phone">-</div>
                    <div class="oil-gasnum" style="width:160px">
                        <div class='oil-gasnum-mask'></div>
                        <div style="color:white">油气点:<span class='user-balance'>-</span></div>
                    </div>
                </div> 
                <!-- 互动合作 -->
                <div class="oil-order-menu oil-menu-top" style="height:auto">
                    <h3 style="margin-top:5px;font-size:15px;margin-bottom:10px">互动合作</h3>
                    <a data-type="a1" class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px">
                        <div class="weui-cell__hd"><img src="images/oil/mine/oil_fan.png"  class="oil-menu-img"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class="recharge-list">充值返利</p>
                        </div>
                        <div class="weui-cell__ft" style="color:#d50100;font-size:14px">充得多返得多</div>
                    </a>
                    <a data-type="a2" class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px">
                        <div class="weui-cell__hd"><img src="images/oil/mine/oil_tuijian.png"  class="oil-menu-img"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class='help'>推荐站点</p>
                        </div>
                        <div class="weui-cell__ft" style="color:#d50100;font-size:14px">成功入驻拿奖励</div>
                    </a>
                    <a data-type="a3" class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px">
                        <div class="weui-cell__hd"><img src="images/oil/mine/oil_certify.png"  class="oil-menu-img"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class='answer'>车辆认证<span style="color: #008c00;" id='car-certify-yes'></span></p>
                        </div>
                        <div class="weui-cell__ft" style="color:#d50100;font-size:14px">认证车辆领油气</div>
                    </a>
                    <a data-type="a4" class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px">
                        <div class="weui-cell__hd"><img src="images/oil/mine/oil_xiao.png"  class="oil-menu-img"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class='answer'>敬请期待<span style="color: #008c00;" id='car-certify-yes'></span></p>
                        </div>
                        <div class="weui-cell__ft" style="color:#d50100;font-size:14px">更多优惠活动</div>
                    </a>
                </div>
                <!--底部功能 -->
                <div class='oil-order-menu oil-menu-bottom' style="height: auto;font-size:14px">
                    <a class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px">
                        <div class="weui-cell__hd"><img src="images/oil/mine/recharge_list.png" style="width:30px;height:30px"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class="recharge-list">充值记录</p>
                        </div>
                        <div class="weui-cell__ft"></div>
                    </a>
                    <a class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px">
                        <div class="weui-cell__hd"><img src="images/oil/mine/oil_help.png" style="width:30px;height:30px"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class='help'>帮助中心</p>
                        </div>
                        <div class="weui-cell__ft"></div>
                    </a>
                    <a class="weui-cell  weui-cell_access weui-cell_example" href="javascript:" style="height:10px;margin-bottom:20px;">
                        <div class="weui-cell__hd"><img src="images/oil/mine/oil_kefu.png" style="width:30px;height:30px"></div>
                        <div class="weui-cell__bd">
                            <p style="font-weight:bold;" class='answer'>客服咨询</p>
                        </div>
                        <div class="weui-cell__ft"></div>
                    </a>
                </div>
            </div>
        </div>
        <div class="weui-tabbar" style="position: fixed;left:0px;right:0px;bottom:0px">
            <div class="weui-tabbar__item tab-group">
                <div style="display: inline-block; position: relative;">
                    <img src="./images/oil/tabber/homepage_a.png"   class="weui-tabbar__icon">
                    <!-- <span class="weui-badge" style="position: absolute; top: -2px; right: -13px;">8</span> -->
                </div>
                <p class="weui-tabbar__label tab-default tab-on">首页</p>
            </div>
            <div class="weui-tabbar__item tab-group">
                <div style="display: inline-block; position: relative;">
                    <img src="./images/oil/tabber/order_c.png"   class="weui-tabbar__icon">
                </div>
                <p class="weui-tabbar__label tab-default">订单</p>
            </div>
            <div class="weui-tabbar__item tab-group">
                <div style="display: inline-block; position: relative;">
                    <img src="./images/oil/tabber/me_c.png"   class="weui-tabbar__icon">
                </div>
                <p class="weui-tabbar__label tab-default">我的</p>
            </div>
        </div>
    </div>
</div>
<!-- 加油站-首页-详情面板 -->
<div class='oil oil-detail' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div id='detail-title1'>--</div>
    </div>
    <div class='oil-main' style="width:96%;margin:0 auto">
        <h3 class='oil-menu'>商品：</h3>
        <div class='oil-items oil-type'>
            <div class="oil-item oil-type-item"  style="color:#d50100">-</div>
        </div>
        <h3 class='oil-menu'>油号：</h3>
        <div class='oil-items oil-num'>
            <div class="oil-item oil-num-item" style="color:#d50100"></div>
        </div>
        <h3 class='oil-menu'>油枪：</h3>
        <div class='oil-items oil-gun'></div> 
        <form id="form-station-detail">
            <div class='oil-menu' style="font-weight: bold;">
                <span>加油金额：</span>
                <input type="number" class="weui-input oil-cash-num"  name="consume" id="oil-consume" placeholder="请输入消费金额">
                <div class='oil-items oil-nums'>
                    <div class='oil-item-cash oil-cash-num' data-val='100'>￥100</div>
                    <div class='oil-item-cash oil-cash-num' data-val='200'>￥200</div>
                    <div class='oil-item-cash oil-cash-num' data-val='300'>￥300</div>
                    <div class='oil-item-cash oil-cash-num' data-val='500'>￥500</div>
                </div>
            </div>
            <h3 class='oil-menu'>支付方式：</h3>
            <span style="color:red;font-size:12px">(推荐使用油气点支付,享更多优惠)</span>
            <div class="oil-pay-method">
                <div class='oil-flex pay-type' data-pay='微信支付'>
                    <div class='oil-flex-item'>
                        <img src="./images/oil/home/oil_wecat.png" class='oil-middle oil-imgs'>
                        <span class='oil-middle oil-pay-text'>微信支付</span>
                    </div>
                    <div class='oil-flex-item oil-pay-radio'>
                        <i class="weui-icon-success-circle pay-icon"></i>
                    </div>
                </div>
                <div class='oil-flex pay-type' data-pay='支付宝支付'>
                    <div class='oil-flex-item'>
                        <img src="./images/oil/home/oil_pay.png" class='oil-middle oil-imgs'>
                        <span class='oil-middle oil-pay-text'>支付宝支付</span>
                    </div>
                    <div class='oil-flex-item oil-pay-radio'>
                        <i class="weui-icon-circle"></i>
                    </div>
                </div>
                <div class='oil-flex pay-type' style="margin-bottom: 20px;" data-pay='油气点支付'>
                    <div class='oil-flex-item'>
                        <img src="./images/oil/home/oil_jiayou.png" class='oil-middle oil-imgs'>
                        <span class=' oil-middle oil-pay-text'>油气点支付</span>
                    </div>
                    <div class='oil-flex-item oil-pay-radio'>
                        <i class="weui-icon-circle"></i>
                    </div>
                </div>
                <input type="hidden" value='' id='oil-gun' name="gun">
                <input type="hidden" id="discount-detail" name="discount">
                <input type="hidden" id='all-data' name='datas'>
                <input type="hidden" value="微信支付" id='final-pay-method' name="payMethod">
            </div>
        </form>
    </div>
    <a href="javascript:" class="weui-btn weui-btn_primary oil-btn" id="submit-for-pay" style="font-size:1rem;margin-bottom:20px">提交订单</a>
</div>
<!-- 加油站-订单详情 -->
<div class='oil oil-order-detail' style="display:none">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>订单详情</div>
    </div>
    <div class='oil-cash-main'>
        <div class="header-menu"><span style="margin-left:8px;">订单详情</span></div>
        <div class='oil-pay-details oil-pay-group' style="height:auto;">
            <div class="oil-pay-content oil-pay-data">
                <div >油气单号</div>
                <div class="oil-pay-data data-sid">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >下单时间</div>
                <div class="oil-pay-data data-order_time">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油气站名称</div>
                <div class="oil-pay-data data-gas_name">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >地址</div>
                <div class="oil-pay-data data-address">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油类</div>
                <div class="oil-pay-data data-good">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油号</div>
                <div class="oil-pay-data data-type">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >金额</div>
                <div class="oil-pay-data data-amount">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油气量<span style="padding-left:10px;color:gray;font-weight: 500;">实际量以油气站为准</span></div>
                <div class="oil-pay-data data-quantity">-</div>
            </div>
        </div>
        <div class='oil-pay-details' style="height:auto">
            <div class="oil-pay-content">
                <div class='oil-pay-title'>加油站优惠：</div>
                <div class="oil-pay-data data-discounted_price" style="color:#d50100">-</div>
            </div>
            <div class="oil-pay-content">
                <div class='oil-pay-title'>会员优惠：</div>
                <div class="oil-pay-data data-other_offers" style="color:#d50100">-</div>
            </div>
            <div class="oil-pay-content">
                <div class='oil-pay-title'>平台优惠：</div>
                <div class="oil-pay-data data-other_offers2" style="color:#d50100">-</div>
            </div>
            <div class="oil-pay-content">
                <div class='oil-pay-title'>总优惠金额：</div>
                <div class="oil-pay-data discount-all" style="color:#d50100">-</div>
            </div>
        </div>
        <div class='oil-pay-details oil-pay-group' style="height:auto">
            <div class="oil-pay-content oil-pay-data">
                <div >支付状态</div>
                <div class="oil-pay-data data-paystatus" style="color:gray">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >支付方式</div>
                <div class="oil-pay-data data-paytype" style="color:gray">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data" style="font-size:16px">
                <div>实际支付金额</div>
                <div class="oil-pay-data data-actual_amount">-</div>
            </div>
        </div>
    </div>
</div>
<!--订单待支付页面-->
<div class='oil oil-order-topay' style="display:none">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>待支付订单</div>
    </div>
    <div class='oil-cash-main'>
        <div class="header-menu"><span style="margin-left:8px;">订单详情</span></div>
        <div class='oil-pay-details oil-pay-group' style="height:auto">
            <div class="oil-pay-content oil-pay-data">
                <div >油气单号</div>
                <div class="oil-pay-data data-sid">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >下单时间</div>
                <div class="oil-pay-data data-order_time">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油气站名称</div>
                <div class="oil-pay-data data-gas_name">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >地址</div>
                <div class="oil-pay-data data-address">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油类</div>
                <div class="oil-pay-data data-good">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油号</div>
                <div class="oil-pay-data data-type">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >金额</div>
                <div class="oil-pay-data data-amount">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >油气量<span style="padding-left:10px;color:gray;font-weight: 500;">实际量以油气站为准</span></div>
                <div class="oil-pay-data data-quantity">-</div>
            </div>
        </div>
        <div class='oil-pay-details' style="height:auto">
            <div class="oil-pay-content">
                <div class='oil-pay-title'>加油站优惠：</div>
                <div class="oil-pay-data data-discounted_price" style="color:#d50100">-</div>
            </div>
            <div class="oil-pay-content">
                <div class='oil-pay-title'>会员优惠：</div>
                <div class="oil-pay-data data-other_offers" style="color:#d50100">-</div>
            </div>
            <div class="oil-pay-content">
                <div class='oil-pay-title'>平台优惠：</div>
                <div class="oil-pay-data data-other_offers2" style="color:#d50100">-</div>
            </div>
            <div class="oil-pay-content">
                <div class='oil-pay-title'>总优惠金额：</div>
                <div class="oil-pay-data discount-all" style="color:#d50100">-</div>
            </div>
        </div>
        <div class='oil-pay-details oil-pay-group' style="height:auto">
            <div class="oil-pay-content oil-pay-data">
                <div >支付状态</div>
                <div class="oil-pay-data" style="color:gray">待支付</div>
            </div>
            <div class="oil-pay-content oil-pay-data">
                <div >支付方式</div>
                <div class="oil-pay-data data-paytype" style="color:gray">-</div>
            </div>
            <div class="oil-pay-content oil-pay-data" style="font-size:16px">
                <div>实际支付金额</div>
                <div class="oil-pay-data data-actual_amount">-</div>
            </div>
            <a href="javascript:" class="weui-btn weui-btn_primary oil-sure-btn" style="font-size:0.8rem">确认支付</a>
        </div>
    </div>
</div>
<!-- 加油站-我的-帮助 -->
<div class='oil oil-mine-help' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>帮助中心</div>
    </div>
    <div class="header-menu" style="margin-bottom:10px"><span style="margin-left:8px;">常见问题</span></div>
    <hr color="#eee">
    <div style="width:94%;margin:0 auto">
        <div class='fade-problem1'>
            <div class="gas-flex promlem-item">
                <div class='gas-flex_item c-pad-left'>发票怎么开？</div>
                <div class='gas-flex_item c-right'><img src="images/oil/home/oil_arrow_bottom.png" class="problem-img"></div>
            </div>
            <div class="toggle-problem">消息</div>
        </div>
        <div class='fade-problem1'>
            <div class="gas-flex promlem-item">
                <div class='gas-flex_item c-pad-left'>邀请注册怎么返点？</div>
                <div class='gas-flex_item c-right'><img src="images/oil/home/oil_arrow_bottom.png" class="problem-img"></div>
            </div>
            <div class="toggle-problem">消息</div>
        </div>
        <div class='fade-problem1'>
            <div class="gas-flex promlem-item">
                <div class='gas-flex_item c-pad-left'>油品质量怎么保证？</div>
                <div class='gas-flex_item c-right'><img src="images/oil/home/oil_arrow_bottom.png" class="problem-img"></div>
            </div>
            <div class="toggle-problem">消息</div>
        </div>
    </div>
    <div class="c-help-more">更多问题请咨询客服 》</div>
</div>
<!-- 加油站-我的-信息 -->
<div class='oil oil-mine-msg11' style="display: none;">
    <div class="header-style header-extend" style="width:100%">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>消息中心</div>
    </div>
    <div class="header-menu" style="margin-bottom:10px"><span style="margin-left:8px;">消息列表</span></div>
        <hr color="#eee">
        <div style="width:94%;margin:0 auto" id='oil-msg-content'></div>
</div>
<!-- 加油站-我的-充值记录 -->
<div class='oil oil-mine-recharge-list' style="display: none">
    <div class="header-style header-extend" style="width:100%;position: fixed;top:0px;left:0px;z-index:9999">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>充值记录</div>
    </div>
    <div class="oil-recharge-item" style="margin-top:40px"></div>
</div>
<!-- 加油站-我的-车辆认证 -->
<div class='oil oil-mine-certify' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>车辆认证</div>
    </div>
    <div class="header-menu" style="margin-bottom:10px"><span style="margin-left:8px;">车辆认证</span></div>
    <div class='certify-main'>
        <form id='oil-certify-form'>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">车牌号：</div>
                <div class="gas-flex_item">
                    <input type="text" class="weui-input certify-input-item" name="plate">
                </div>
            </div>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">所有人：</div>
                <div class="gas-flex_item">
                    <input type="text"  class="weui-input certify-input-item" name='everyone'>
                </div>
            </div>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">上传行驶证：</div>
                <div class="gas-flex_item">
                    <div style="flex:1;text-align: center;">
                        <div style="width:100px;height:100px;margin:0 auto" id='upload-driverlicence'>
                            <img  src='./images/home/add_img.png' style="width:100%;height:100%">
                            <input type="hidden" id='file-id'>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary confirm-certify" id="submit-for-certify" style="margin-top:80px;font-size:0.8rem">提交认证</a>
</div>
<!-- 加油站-我的-客服咨询 -->
<div class='oil oil-mine-ask' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>客服咨询</div>
    </div>
</div>
<!-- 加油站-我的-充值返利-->
<div class='oil oil-mine-recharge' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>油气点充值</div>
    </div>
    <div style="width: 94%;margin:0 auto">
        <form id="form-recharge">
            <h3>充值方式：</h3>
            <div class="oil-pay-method-mine">
                <div class='oil-flex' data-minepay='微信支付'>
                    <div class='oil-flex-item'>
                        <img src="./images/oil/home/oil_wecat.png" class='oil-middle oil-imgs'>
                        <span class='oil-middle oil-pay-text'>微信支付</span>
                    </div>
                    <div class='oil-flex-item oil-pay-radio'>
                        <i class="weui-icon-success-circle pay-icon"></i>
                    </div>
                </div>
                <div class='oil-flex' data-minepay='支付宝支付'>
                    <div class='oil-flex-item'>
                        <img src="./images/oil/home/oil_pay.png" class='oil-middle oil-imgs'>
                        <span class='oil-middle oil-pay-text'>支付宝支付</span>
                    </div>
                    <div class='oil-flex-item oil-pay-radio'>
                        <i class="weui-icon-circle"></i>
                    </div>
                </div>
                <input type="hidden" value="微信支付" name='method' >
            </div>
            <div style="font-size:14px;margin-top:30px">
                <span style="font-weight:bold">充值金额：</span>
                <input type="number" class="mine-input-style d-input-val" id="my_input_check" name="recharge">
            </div>
            <div class='oil-items oil-nums'>
                <div class='oil-item-cash d-cash-item' data-val='200'>￥200</div>
                <div class='oil-item-cash d-cash-item' data-val='500'>￥500</div>
                <div class='oil-item-cash d-cash-item' data-val='1000'>￥1000</div>
                <div class='oil-item-cash d-cash-item' data-val='2000'>￥2000</div>
            </div>
        </form>
    </div>
    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary confirm-certify c-confirm-recharge" style="font-size:0.8rem">提交订单</a> 
</div> 
<!-- 加油站-我的-充值返利-确认充值-->
<div class='oil oil-recharge-confirm' style="display: none;">
    <div class="header-style header-extend">
        <div class="recharge-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>充值详情</div>
    </div>
    <div style="width: 94%;margin:0 auto">
        <form>
            <div style="font-size:14px;margin-top:30px">
                <span style="font-weight:bold">充值方式：</span>
                <input type="text" class="mine-input-style" name="recharge-type" readonly>
            </div>
            <div style="font-size:14px;margin-top:30px">
                <span style="font-weight:bold">充值金额：</span>
                <input type="number" class="mine-input-style" name="recharge-cash" readonly>
            </div>
            <div style="font-size:14px;margin-top:30px">
                <span style="font-weight:bold">充值返利：</span>
                <input type="number" class="mine-input-style" name="recharge-back" readonly>
            </div>
            <div style="font-size:14px;margin-top:30px">
                <span style="font-weight:bold">实际到账：</span>
                <input type="number" class="mine-input-style" name="recharge-actual" readonly>
            </div>
        </form>
    </div>
    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary confirm-certify makesure-pay">确认充值</a> 
</div>
<!--加油站-我的-推荐入驻-->
<div class='oil oil-mine-recommend' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>推荐入驻</div>
    </div>
    <div class="header-menu" style="margin-bottom:10px"><span style="margin-left:8px;">入驻信息</span></div>
    <div class='certify-main'>
        <form id="form-commend">
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">油气站名称：</div>
                <div class="gas-flex_item">
                    <input type="text" class="weui-input certify-input-item" placeholder="请输入油气站名称" name='gas_name'>
                </div>
            </div>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">油气站地址：</div>
                <div class="gas-flex_item">
                    <input type="text"  class="weui-input certify-input-item" placeholder="请输入油气站地址" name="address">
                </div>
            </div>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">负责人姓名：</div>
                <div class="gas-flex_item">
                    <input type="text"   class="weui-input certify-input-item" placeholder="请输入负责人姓名" name="contact_name">
                </div>
            </div>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">联系电话：</div>
                <div class="gas-flex_item">
                    <input type="text"  class="weui-input certify-input-item" placeholder="请输入联系电话" name="phone"> 
                </div>
            </div>
            <div class='gas-flex certify-body'>
                <div class="certify-input-label">备注：</div>
                <div class="gas-flex_item">
                <textarea cols="36" rows="5" placeholder="如有其他信息请填入此行,没有可不填" name="remarks"></textarea>
                </div>
            </div>
        </form>
    </div>
    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary confirm-certify d-commend-submit" style="margin-top: 100px;font-size:0.8rem">提交</a> 
</div>
<!-- 加油站-我的-邀请有礼 -->
<div class='oil oil-mine-invitation' style="display: none;">
    <div class="header-style header-extend">
        <div class="oil-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color:white"></i></div>
        <div>邀请注册</div>
    </div>
    <div class="header-menu" style="margin-bottom:10px"><span style="margin-left:8px;">邀请返利</span></div>
    <div class='gas-flex'>
        <div style="width:30px;margin:5px 3px 3px 10px">
            <img src="images/oil/mine/oil_fan.png" style="width:30px;height:30px;">
        </div>
        <div class='gas-flex_item' style="font-weight: bold;">
            <div>邀请新人注册送油气点</div>
            <div>邀请新人注册的新人首次充值再送油气点！！！</div>
        </div>
        <div>
            <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary s-visit-btn">去邀请</a> 
        </div>
    </div>
</div>
<!-- ---------------------------------END--------------------------------------------- -->
<!--车主-菜单区-->
<div class="all-page home home-car-mine" id="home-car-mine" style="display: none;">
    <div class="mine-head">
        <div class="home-back header-title back-extends" style="top:-10px;left:-5px;"><i class="weui-icon-back-arrow-thin"></i></div>
        <div class="mine-top mine-personal_info get-info">
            <img src="images/home/mine/cars/mine-2.png">
        </div>
        <div class="mine-top-name">
            <span id='data_driver-name' style="font-size:16px;vertical-align: middle;">--</span>
            <img src="images/home/credit.png" style="width:16px;height:16px;vertical-align: middle;margin-left:15px">
            <span style="color:#FFAE03;font-size:16px;vertical-align: middle;" id='points_cars'></span>
        </div>
        <div class="mine-head-phone" id='data_driver-phone'>--</div>
    </div>
    <div class="mine-data" style="line-height: 60px;height:60px;">
        <div class="content-top-left car-mine-data">
            账户信息
        </div>
        <div class="content-top-right car-mine-data">
            银行卡
        </div>
        <div class="content-top-center car-mine-data">
        </div>
        <div style="clear:both"></div>
    </div>
    <div class="mine-body">
        <div class="weui-cell weui-cell_access mine-car-func common-style"..>
            <div>
                <img src="images/home/mine/cars/mine-3.png" />
            </div>
            <div class="weui-cell__bd">司机认证信息</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func  common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-7.png" />
            </div>
            <div class="weui-cell__bd">运费统计</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func common-style" id='mine_carmanage'>
            <div class="">
                <img src="images/home/mine/cars/mine-8.png" />
            </div>
            <div class="weui-cell__bd">车辆管理</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func  common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-4.png" />
            </div>
            <div class="weui-cell__bd">在线评价</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func  common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-5.png">
            </div>
            <div class="weui-cell__bd">咨询投诉</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func  common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-4.png" />
            </div>
            <div class="weui-cell__bd">通知消息</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func  common-style edit-password">
            <div class="">
                <img src="images/home/mine/cars/mine-7.png" />
            </div>
            <div class="weui-cell__bd">修改密码</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-car-func  common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-6.png" />
            </div>
            <div class="weui-cell__bd">关于我们</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access common-style" id="car-exit">
            <div class="">
                <img src="images/home/exit.png"  />
            </div>
            <div class="weui-cell__bd">退出账号</div>
            <div class="weui-cell__ft"></div>
        </div>
    </div>
</div>
<!-- 资源大厅-->
<div class="all-page home home-car-resource" style="display: none">
    <header class="wy-header" style="border:none;position: relative;">
        <div class="home-back header-title back-extends" style="top:5px;left:-5px;"><i class="weui-icon-back-arrow-thin"
                style="text-align: left"></i></div>
        <div class="wy-header-title">货源大厅</div>
        <div class='code_scan_r scan_code'>
            <img src="images/home/scan.png" style="width:100%;height:100%;">
        </div>
        <div  id='filter_btn'>
            <span style="font-size: 14px;vertical-align: middle">筛选</span>
            <img src="images/cars_source/resource.png" style="height: 14px;width:14px;vertical-align: middle">
        </div>
    </header>
    <div class="main goods-page" id="resource-holl" style="width:100%;height:90vh;background-color: #eee;overflow: auto">
    </div>
    <!--/主体-->
</div>
<!-- 车主-订单管理 -->
<div class="all-page home home-car-ordermanage details-group" style="display: none">
    <header class="wy-header">
        <div class="home-back header-title back-extends" style="top:5px;left:-5px;"><i class="weui-icon-back-arrow-thin"
                style="text-align: left"></i></div>
        <div class="wy-header-title">订单管理</div>
    </header>
    <div class="main_body" id="car-ordermanage">
        <div class="order-title">
            <div class="content-top-left" style="margin-left:20px;font-size: 16px;position: relative;">
                <span class="tab-items order-item-on ">未完成</span>
                <span class="weui-badge" id="unfulled" style="position: absolute; top: 0px; left: 46px;">0</span>
            </div>
            <div class="content-top-right " style="font-size: 16px;margin-right:10px;position: relative;">
                <span class='tab-items'>已结算</span>
            </div>
            <div class="content-top-center" style="font-size: 16px;">
                <span class='tab-items'>已完成</span>
            </div>
        </div>
        <div class="car-main-item">
            <div class="car_item_group order-group-on">
                <div style="width:100%;text-align:center;margin-top:5px">暂无数据</div>
            </div>
            <div class="car_item_group" style="display:none">
                <div style="width:100%;text-align:center;margin-top:5px">暂无数据</div>
            </div>
            <div class="car_item_group" style="display: none">
                <div style="width:100%;text-align:center;margin-top:5px">暂无数据</div>
            </div>
        </div>
    </div>
</div>
<!-- 车主--运单管理--详情 --><!--订单页，订单详情-->
<div class="all-page car-ordermanage-detail " style="display:none">
    <header class="wy-header">
        <div class="wy-header-icon-back car-ordermanage-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin item_left"></i></div>
        <div class="wy-header-title">订单详情</div>
    </header>
    <div class="weui-cell top40" id="order-details">
        <div class="weui-cell">
            <div class="weui-cell__ft"> <img src="images/home/transport_num.png" style="vertical-align: middle"></div>
            <p style="margin:0px 10px">运单编号</p>
        </div>
        <div class="weui-cell__ft" style="color:rgb(31, 201, 88);" id="data_id"></div>
        <input type="hidden" id='data-billid'>
        <input type="hidden" id='data-view-consignor'>
        <input type="hidden" id='data-view-driver'>
    </div>
    <a href="javascript:" class="weui-media-box weui-media-box_appmsg" style="border-bottom:5px solid #eee">
        <div class="weui-media-box__hd">
            <img src="./images/home/mine/cars/mine-2.png" style="width:60px;height:60px;">
        </div>
        <div class="weui-media-box__bd">
            <h4 class="weui-media-box__title" id='data_waybill-driver'></h4>
            <div class="weui-media-box__desc" style="height:20px">
                <img src="images/home/credit.png" style="width:18px;height:18px;vertical-align: middle;margin-right:5px">
                <span id='star-num' style="vertical-align:middle;font-size:16px;color:#ffa200"></span>
            </div>
            <p class="weui-media-box__desc item_color_black">
                <span >历史订单</span>
                <span id='history-bills'>2</span>
                <img src="./images/home/order_car.png" style="margin-left:50px;vertical-align:middle">
                <span style="vertical-align: middle" id="data_carplate"></span>
            </p>
        </div>
    </a>
    <div class="waybill-menu">
        <div class="weui-cell weui-cell_active weui-cell_access  get-bill-img" >
            <div class="weui-cell__bd">装车单</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_active weui-cell_access is-carhidden" style="border:1px solid #eee;display: none">
            <div class="weui-cell__bd">车辆定位</div>
            <div class="weui-cell__ft" style="border:none"></div>
        </div>
        <div class="weui-cell weui-cell_active weui-cell_access  get-bill-img" >
            <div class="weui-cell__bd">回执单</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_active weui-cell_access is-hidden" >
            <div class="weui-cell__bd ">异常上报</div>
            <div class="weui-cell__ft exception_reporting"></div>
        </div>
        <div class="weui-cell weui-cell_active weui-cell_access is-hidden" style="display:none;border-bottom:1px solid #eee" id='see-contract'>
            <div class="weui-cell__bd ">查看运输合同</div>
            <div class="weui-cell__ft exception_reporting"></div>
        </div>
        <div class="weui-cell weui-cell_active weui-cell_access my_view" style="border-bottom:1px solid #eee">
            <div class="weui-cell__bd " id='view-btn'>评价</div>
            <div class="weui-cell__ft exception_reporting"><span style="color:#008c00" id='is-view'></span></div>
        </div>
    </div>
    <div class="main_body" >
        <div class="weui-cell " style="padding: 0px 10px;">
            <div class="weui-cell">
                <div class="weui-cell__ft"> <img src="images/home/start_position.png" width="20px" style="position: relative;left: -10px;"></div>
                <p style="width: 55px;">出发地址</p>
            </div>
            <div class="weui-cell" id="data_loadingaddr"></div>
        </div>
        <div class="weui-cell " style="padding: 0px 10px;">
            <div class="weui-cell">
                <div class="weui-cell__ft"> <img src="images/home/end_position.png" width="20px" style="position: relative;left: -10px;"></div>
                <p style="width: 55px;">目的地址</p>
            </div>
            <div class="weui-cell" id="data_upload_addr"></div>
        </div>
        <div class="weui-flex" style="margin: 20px; ">
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30%;color:gray">发货人：</span>
                <span class="" id="data_order_consignor"></span>
            </div>
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30%;color:gray">电话：</span>
                <span class="" id="data_order_num"></span>
            </div>
        </div>
        <div class="weui-flex" style="margin-left:20px">
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30%;color:gray">收货人：</span>
                <span class="" id='data_waybill-receiver'></span>
            </div>
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30%;color:gray">电话：</span>

                <span class="" id='data_waybill-rphone'></span>
            </div>
        </div>
        <div class="weui-flex" style=" margin-left: 20px;">
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30%; color:gray">货源名称：</span>
                <span class="" id='data_waybill-good'>--</span>
            </div>
        </div>
        <div class="weui-flex" style=" margin-left: 20px;">
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30%; color:gray">货源单价：</span>
                <span class="" id='data_waybill-price' style="color:red">--</span>
            </div>
        </div>
        <div class="weui-flex" style=" margin: 20px;">
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30% ;color:gray">装货时间：</span>
                <span class="" id='data_waybill-ts'></span>
            </div>
        </div>
        <div class="weui-flex" style=" margin: 20px;">
            <div class="weui-flex__item">
                <span class="placeholder" style="width:30% ;color:gray">卸货时间：</span>
                <span class="" id='data_waybill-td'></span>
            </div>
        </div>
        <div class="weui-cells__group weui-cells__group_form">
            <div class="weui-cells__title" style="font-size:12px">
                <img src="images/home/home_info.png" style="vertical-align:middle;">
                <span>费用信息</span>

            </div>

            <!-- <div class="weui-cell ">
                <div class="weui-cell__bd">
                    <p>装车费</p>
                </div>
                <div class="weui-cell__ft">0元</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>卸车费</p>
                </div>
                <div class="weui-cell__ft">0元</div>
            </div>-->
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>合同运费</p>
                </div>
                <div class="weui-cell__ft" id="data_fee"></div>
            </div>
                <!-- <button class="load-btn" id='cancel-goods' style="display:none">取消订单</button> -->
                <!-- 存储默认信息 -->
                <input type="hidden" id='thisid'>
            <!-- <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>支付方式</p>
                </div>
                <div class="weui-cell__ft">现金</div>
            </div>
-->              </div>
        <!-- <div class="weui-cells__group weui-cells__group_form">

            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>接单时间</p>
                </div>
                <div class="weui-cell__ft">2020-06-07 14:13:56</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>装货时间</p>
                </div>
                <div class="weui-cell__ft">2020-06-07 14:13:56</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>卸货时间</p>
                </div>
                <div class="weui-cell__ft">2020-06-07 14:13:56</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>允许路耗：</p>
                </div>
                <div class="weui-cell__ft">0千克/车</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>委托人</p>
                </div>
                <div class="weui-cell__ft">王俊杰</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>联系电话</p>
                </div>
                <div class="weui-cell__ft">18996521456</div>
            </div>
            <div class="weui-cell " style="padding-top: 0px;">
                <div class="weui-cell__bd">
                    <p>货物备注：</p>
                </div>
                <div class="weui-cell__ft">明天上午记得发货</div>
            </div>-->
        </div>

</div>
<!-- 车主--运单管理--详情--装车单 -->
<div class="all-page waybill-group onloadreceipt" style="display:none">
    <header class="wy-header">
        <div class="wy-header-icon-back waybill-group-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin" style="text-align: left"></i></div>
        <div class="wy-header-title">装车单查看</div>
    </header>
    <div style="width:300px;height:500px;margin:20px auto" id='loading-img'>
        <img src="" style="width:100%;height:100%;" alt='并未上传装车单'>
    </div>   
</div>
<!-- 车主--运单管理--详情--车辆定位 -->
<div class="all-page waybill-group track-report" style="display:none">
    <header class="wy-header">
        <div class="wy-header-icon-back waybill-group-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                style="text-align: left"></i></div>
        <div class="wy-header-title">车辆定位</div>
    </header>
    <h2 style="text-align: center;margin-top:40px">当前位置</h2>
    <div style="width:90%;margin:0 auto;text-align:center;font-size:16px;" id="current_pos"></div>
    <div class="weui-panel__bd" id="truck-map" style="width:100%;height:70vh;margin-top:10px">

    </div>
</div>
<!--  货源单路线查看面板  -->
<div class="all-page waybill-group transport-line-page" style="display:none">
    <header class="wy-header">
        <div class="wy-header-icon-back transport-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin"
                                                                                        style="text-align: left"></i></div>
        <div class="wy-header-title">运输路线</div>
    </header>
    <h2 style="text-align: center;margin-top:40px">运输路线地图</h2>
    <div class="weui-panel__bd" id="transport-line" style="width:100%;height:70vh;margin-top:10px">
    </div>
</div>
<!-- 车主--运单管理--详情--上传回单 -->
<div class="all-page waybill-group receipt" style="display:none">
    <header class="wy-header">
        <div class="wy-header-icon-back waybill-group-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin" style="text-align: left"></i></div>
        <div class="wy-header-title">回执单查看</div>
    </header>
    <div style="width:300px;height:500px;margin:20px auto" id='unloading-img'>
        <img src="" style="width:100%;height:100%;" alt='并未上传回执单'>
    </div>   
</div>
<!-- 车主--运单管理--详情--异常上报 -->
<div class="all-page waybill-group no-report" style="display:none;position: relative">
    <header class="wy-header">
        <div class="wy-header-icon-back waybill-group-back back-extends" style="margin-top:10px;"><i class="weui-icon-back-arrow-thin" style="text-align: left"></i></div>
        <div class="wy-header-title">异常上报</div>
    </header>
    <div class="weui-cell weui-cell_active">
        <div class="weui-cell__hd"><label class="weui-label">异常说明</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" placeholder="请输入异常说明" style="font-size: 14px;">
        </div>

    </div>
    <div class="exception-time">
        <div>发生时间</div>
        <div>
            <input class="time-select" type="datetime-local">
        </div>
    </div>
    <div style="width:100px;height:100px;margin:0 auto" id='choose_img_errorup'>
        <img src='./images/home/add_img.png' style="width:100%;height:100%">
    </div>
    <div class="btn-upload" style="bottom:20px;width:80%;left:10%">上报</div>
</div>
<!-- 车主-车辆管理 -->
<div class="all-page home home-car-carmanage" style="display: none;">
    <div class="header-style">
        <div class="home-back header-title back-extends" style="top:-5px;left:-5px;"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>车辆管理</p>
    </div>
    <div class="mine-body" id="car-manage">
        <div id='add_car'>添加车辆</div> 
    </div>
</div>
<!--车货主-我的-功能页-->
<div class="all-page car-fun-group personal_info" style="display: none">
    <div class="header-style">
        <div class="header-title back-extends" id='info-back' style="border:none"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>个人信息</p>
    </div>
    <div class="personal-photo" id="personal_photo">
        <div id="personal">
            <img src="images/home/mine/cars/mine-2.png"  style="width:80px;height:80px;border-radius: 50%;">
        </div>
    </div>
    <div class="mine-body">
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__bd">姓名</div>
            <div id='data_info-name'>XXX</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__bd">电话</div>
            <div id='data_info-phone'></div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access" style="border-bottom:1px solid #eee">
            <div class="weui-cell__bd start-bank">网银开通</div>
            <div class="is-bank-open"><span style="color:red">未开通</span></div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access driver-sign" style="border-bottom:1px solid #eee">
            <div class="weui-cell__bd">采集签名</div>
            <div ></div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__bd">签名查看<sign id='is_signature' style="color:#d50100"></sign></div>
        </div>
        <div style="text-align: center;">
            <img src="images/home/nopic.jpg" style="border:1px dotted #008c00" id='my_signature'>
        </div>
    </div>
    <div class="weui-skin_android" id="androidActionsheet" style="display: none">
        <div class="weui-mask">
            <div class="weui-mask-child"
                style="width:94%;height:auto;background-color: white;margin-left: 3%;margin-top: 36vh">
                <div class="weui-actionsheet__cell" class='change-pic' id='camera'>相机</div>
                <div class="weui-actionsheet__cell" class='change-pic' id='camera1'>相册</div>
                <!-- <div class="weui-actionsheet__cell" style="text-align: right;">
                    <a href="" style="color:#9DC6D8">取消</a>
                </div> -->
            </div>
        </div>
    </div>
</div>
<!-- 修改密码 -->
<div class="all-page personal-change-pwd" style="display: none">
    <div class="header-style">
        <div class="password-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>修改密码</p>
    </div>
    <div id="pwd-top" >
        <form id='pwd-form'>
            <input type="hidden" id='current-page'>
            <div class="mine-body mine-body-changepwd" style="height:120px;">
                <div class="pwd-input">
                    <div class="weui-cell  weui-cell_example">
                        <div class="weui-cell__hd"><img src="./images/home/lock.png" style="width:20px;height:20px;">
                        </div>
                        <div class="weui-cell__bd" style="margin-left:10px;">
                            <input type="password" class="weui-input" placeholder="请输入新密码" style="font-size: 14px;" name='pwd'>
                        </div>
                    </div>
                </div>
                <div class="pwd-input">
                    <div class="weui-cell  weui-cell_example">
                        <div class="weui-cell__hd"><img src="./images/home/lock.png" style="width:20px;height:20px;">
                        </div>
                        <div class="weui-cell__bd" style="margin-left:10px;">
                            <input type="password" class="weui-input reinput-pwd" placeholder="请再输入一次" style="font-size: 14px;" name='repwd'>
                        </div>
                    </div>
                </div>
            </div>
            <a href="javascript:" class="weui-btn weui-btn_primary btn-style submit-pwd-edit">修改</a>
        </form>
    </div>
</div>
<!--账户信息-->
<div class="all-page car-fun-group car-account-info" style="display: none;">
    <div class="header-style header-account" style="border:none">
        <div class="car-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin" style="color: white;"></i>
        </div>
        <p>账户</p>
    </div>
    <div id="info-bg">
        <p>运费余额(元)</p>
        <div id='data_car-balance'>----</div>
    </div>
    <div class="mine-body mine-body-account" style="height:70vh">
        <div class="weui-cell weui-cell_access  car-account-info withdraw-history" style="background-color: white">
            <div class="" style="display: inline">
                <img src="images/home/deal_record.png" class="info_img" />
            </div>
            <div class="weui-cell__bd " style="display: inline-block">提现记录
            </div>
            <div class="weui-cell__ft "></div>
        </div>
        <a href="javascript:" class="weui-btn weui-btn_primary" id='car-withdraw' style="margin-top:30px;background-color: #008c00">提现</a>
        <div style="width:100%;text-align:center;margin-top: 40vh">本项资金收付服务由浙江网商银行提供</div>
    </div>
</div>
<!-- 银行卡 -->
<div class="all-page car-fun-group car-account-bank" id="car-account-bank" style="display: none">
    <div class="header-style">
        <div class="car-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>银行卡</p>
    </div>
    <div class="bank_data" id='car-bank' style="background-color:#eee;height:90vh">
            <div style="width:100%;text-align:center">暂无银行卡</div>
    </div>
    <div class="bank_add car_bank_add" style="bottom:30px">添加银行卡</div>
</div>
<!-- 添加银行卡 -->
<div class="all-page car-fun-group add-bank-car" id="add-bank-card1">
    <div class="header-style">
        <div class="car-bank-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>添加银行卡</p>
    </div>
    <div class="mine-body">
        <form id="bankAdd_form">
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">银行卡号</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" id="bank_card" name="card" placeholder="请输入银行卡号">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">开户行</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" id="bank_bank" name="bank" placeholder="请输入开户行信息">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">户名</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" name="name" placeholder="银行账户户名">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">手机号</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" name="mobile" placeholder="请输入预留手机号">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">支付宝</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" name="alipayId" placeholder="请输入支付宝账号">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">银行卡照片</label></div>
                    <div style="width:162px;height:100px;margin:0 auto" id='get-bank-img'>
                        <img  src='./images/home/add_img.png' style="width:100%;height:100%">
                        <input type="hidden" id='bank-id'>
                    </div>
            </div>
        </form>
        <a class="weui-btn weui-btn_primary btn-style" href="javascript:" id='add-bank'>添加银行卡</a>
    </div>

</div>
<!-- 银行卡详情 -->
<div class="all-page goods-bank-detail" style="height:100vh;background-color: #eee;display:none">
    <div class="header-style">
        <div class="goods_bank-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>银行卡详情</p>
    </div>
    <div class="mine-body" >
        <div class="weui-form-preview__bd" style="width:90%;margin:10px auto;background-color:white;border-radius:10px;font-size:14px">
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">开户行</label>
                <span class="weui-form-preview__value" id='data_goods_bank'>----</span>
            </div>
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">银行账号</label>
                <span class="weui-form-preview__value" id='data_gbank-card'>----</span>
            </div>
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">姓名</label>
                <span class="weui-form-preview__value" id='data_goods_ownername'>----</span>
            </div>
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">预留手机号</label>
                <span class="weui-form-preview__value" id='data_goods_phone'>----</span>
            </div>
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">支付宝账号</label>
                <span class="weui-form-preview__value" id='data_goods_alipay'>----</span>
                <input type="hidden" id='data_gbank-id'>
            </div>
        </div>
        <a href="javascript:" class="weui-btn weui-btn_primary" id="goods_bank-del" style="margin-top:10px;background-color: red;">删除</a>

    </div>
</div>
<!-- 运费记录 -->
<div class="all-page caraccount-info-group caraccount-info_record" style="display: none">
    <div class="header-style">
        <div class="account-func-back1 header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>提现记录</p>
    </div>
    <div class="mine-body withdraw-page"></div>
</div>
<!--司机认证信息-->
<div class="all-page car-fun-group " id="si_ji_xing_xi" style="display: none;">
    <div class="header-style">
        <div class=" header-title" id="sji_rz">
            <i class="weui-icon-back-arrow-thin back-extends"></i></div>
        <p>司机身份信息认证</p>
    </div>
    <div style="width:100%;height:30px;"></div>
</div>
<!-- 司机认证信息 -->
<div class="all-page car-fun-group car-certify" style="display: none;">
    <div class="header-style top-fixed">
        <div class="car-func-back header-title back-extends">
            <i class="weui-icon-back-arrow-thin"></i>
        </div>
        <p>司机认证信息</p>
    </div>
    <div id="certify-header-img" style="margin-top: 40px;">
        <img src="./images/home/certify.png" class="certify_logo">
        <span class="pass-cartify" id='driver_certify'>未认证</span>
    </div>
    <div class="mine-body">

        <form id='sji_form'>
            <div class="mine-body">
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd"><span class="item_color">*</span>司机姓名</div>

                    <input class="weui-input search-input" id='sj_name' name="name" placeholder="司机姓名" type="text"  style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd"><span class="item_color">*</span>联系电话</div>
                    <input class="weui-input search-input" id='sj_phone' name="phone" type="text" placeholder="联系电话" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd"><span class="item_color">*</span>密码</div>
                    <input class="weui-input search-input" id='sj_pwd' name="psw_a" type="password"  style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd"><span class="item_color">*</span>身份证号</div>

                    <input class="weui-input search-input" id='sj_idNumber' name="pid" type="text" placeholder="身份证号" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd"><span class="item_color">*</span>驾驶证号</div>

                    <input class="weui-input search-input" id='sji_jszh' name="driveLicense" type="text" placeholder="驾驶证号" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>驾驶证类型</div>
                    <input class="weui-input search-input" id='jsz_lx' type="text" name="driveLicenseType" placeholder="驾驶证类型" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item" >
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>驾驶证发证机关</div>
                    <input class="weui-input search-input" id='jsz_fz_jg' type="text" name='driveLicenseIssue' placeholder="驾驶证发证机关" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>驾驶证有效期自</div>

                    <input class="weui-input search-input" id='jsz_ffsj' type="text" name="driveLicenseValid" placeholder="驾驶证有效期自" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>驾驶证有效期至</div>

                    <input class="weui-input search-input" id='jsz_yxq' type="text" name="driveLicenseValidTo" placeholder="驾驶证有效期至" style="text-align:right" >
                </div>
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>从业资格证号</div>

                    <input class="weui-input search-input" id='cy_zgz' type="text" name="driverCertificateNumber" placeholder="从业资格证号" style="text-align:right" >
                </div>
                    <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>住址</div>

                    <input class="weui-input search-input" id='address' type="text" name="address" placeholder="住址" style="text-align:right" >
                </div>
                <!-- <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>结算方式</div>
                    <select  name="accountType" style="width: 100px;">
                        <option value="timely">次结</option>
                        <option value="monthly">月结</option>
                    </select>
                    
                </div> -->
                <div class="weui-cell weui-cell_access certify_item">
                    <div class="weui-cell__bd" style="white-space: nowrap;"><span class="item_color">*</span>证件信息：</div>
                    <input type="hidden" name="idPic_front">
                    <input type="hidden" name="idPic_back">
                    <input type="hidden" name="driveLicensePic">
                    <input type="hidden" name="driverCertificatePic">
                </div>
                <div style="display: flex;">
                    <div style="flex:1;">
                        <div style="width:100px;height:100px;margin:0 auto" id='choose_img_idf'>
                            <img id="id_idPic_front" src='./images/home/add_img.png' style="width:100%;height:100%">
                        </div>
                        <label class="weui-form-preview__label" style="margin-left:30%">身份证正面照</label>
                    </div>
                    <div style="flex:1;">
                        <div style="width:100px;height:100px;margin:0 auto" id='choose_img_idb'>
                            <img id="id_idPic_back" src='./images/home/add_img.png' style="width:100%;height:100%">
                        </div>
                        <label class="weui-form-preview__label" style="margin-left:30%">身份证反面照</label>
                    </div>
                </div>
                <div style="display: flex;padding-top:5px">
                    <div style="flex:1;text-align: center;">
                        <div style="width:100px;height:100px;margin:0 auto" id='choose_img_licence'>
                            <img id="id_driveLicensePic" src='./images/home/add_img.png' style="width:100%;height:100%">
                        </div>
                        <label class="weui-form-preview__label" style="margin-left:30%">驾驶证</label>
                    </div>
                    <div style="flex:1;">
                        <div style="width:100px;height:100px;margin:0 auto" id='choose_img_authority'>
                            <img id="id_driverCertificatePic" src='./images/home/add_img.png' style="width:100%;height:100%">
                        </div>
                        <label class="weui-form-preview__label" style="margin-left:20%">从业资格证</label>
                    </div>
                </div>
            </div>
        </form>
        <div style="margin-top:5px;">
            <a href="javascript:" class="weui-btn weui-btn_primary" id="dji_ti_jiao" style='border-radius: 15px;width:80%;background-color:#008c00'>
                提交</a>
        </div>
    </div>
        <div style="width:100%;height:30px"></div>
</div>
<!-- 运费统计 -->
<div class="all-page car-fun-group car-statistic" style="display: none;position: relative;">
    <div class="header-style">
        <div class="car-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <span style="font-weight: bolder">运费统计</span>
        <span class="deliver_reset_group">
            <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary" id='filter-bill' style="height:25px;font-size:12px;;line-height: 25px;margin-top:5px">筛选</a>
        </span>
    </div>
    <div class="data-deliver">
        <div id="start_time_picker1"><span></span>开始时间<img width="8px"
                src="images/home/sort.png" alt="sort"></div>
        <div  id="stop_time_picker1">结束时间 <img width="8px" src="images/home/sort.png" alt="sort">
        </div>
    </div>
    <div class="data-deliver-data" style="border-bottom:1px solid #eee">
        <div id="car_start_time">2019-07-02</div>
        <div id="car_end_time">2019-07-02</div>
    </div>
    <div style="background-color:white;height:20px;line-height: 20px;display:flex;border-bottom: 1px solid #eee;">
        <div style="flex:1;text-align: center;border-right:1px solid #eee">运输单号</div>
        <div style="flex:1;text-align: center;border-right:1px solid #eee">金额</div>
        <div style="flex:1;text-align: center;">结算时间</div>
    </div>
    <div class="deliver-mine-body" id="deliver-mine-body" style="height:78vh;overflow: scroll;">
        <div style="width:100%;text-align:center;">暂无数据</div>
    </div>
    <div class="total" id="total" style="height:30px;vertical-align: top;color:#87cefa;font-size:18px;">
        合计:<span class="amount_car" id='data_total-fee'>0</span>元
    </div>
    <a href="javascript:" class="weui-btn weui-btn_primary" id='refresh-bill'>刷新</a>
    <div style="position: absolute;left:50%;top:50%;display: none;margin-left: -10px;" class='load-bill'><i class="weui-loading weui-icon_toast"></i></div>
</div>
<!-- 车辆管理 -->
<div class="all-page car-fun-group car-manage" style="display: none">
    <div class="header-style">
        <div class="car-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>车辆管理</p>
    </div>
    <div class="mine-body" id='mine-car-manage'>
    </div>
</div>
<!-- 车辆管理详情 -->
<div class="all-page car-fun-group car-manage-detail " style="display: none;">
    <div class="header-style" style="border-bottom:1px solid #eee">
        <div class="manage-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p class='car_add_title' style='display: none;'>车辆详情</p>
        <p class="car_add_title" style='display: none;'>添加车辆</p>
    </div>
    <div class="mine-body car-details-group" style="height:96vh">
        <div class="weui-form-preview" style="background-color: #eee;font-size:14px">
            <form id='carinfo_form'>
                <div class="weui-form-preview__bd" id="id_carinfo_area" style="background-color: white;height:540px;border-bottom:10px solid #eee;font-size:16px">
                    <div class="car_info">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车牌号</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" placeholder="车牌号" id="data_trailerplate" name="plate" style="border-bottom:1px solid #eee;height: 100%;text-align: right;">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车辆类型</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class='edit_carModel' readonly style="text-align: right;border:none;border-bottom:1px solid #eee;font-size:16px" placeholder="请选择">
                            <input type="hidden"  name="carModel" id='edit_carModel'>
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车牌颜色</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text"  class='edit_plateColor' readonly style="text-align: right;border:none;border-bottom:1px solid #eee;font-size:16px" placeholder="请选择"> 
                            <input type="hidden"  name="plateColor" id='edit_plateColor'>
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">运营方式</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" id="data_operation" value="营运" name='operation' style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车辆能源类型</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text"  class="edit_carEnergy" readonly style="text-align: right;border:none;border-bottom:1px solid #eee;font-size: 16px;" placeholder="请选择"> 
                            <input type="hidden"  name="carEnergy" id='edit_carEnergy'>
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车辆所有人</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" id="data_carowner" placeholder="车辆所有人" name="carOwner" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">发证机关</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" name="carIssue" placeholder="发证机关" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">注册日期</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" name="carReg" placeholder="注册日期" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">发证日期</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" placeholder="发证日期" name="carIssueDate" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">行驶证到期时间</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" name="carExpireDate" placeholder="行驶证到期时间" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车籍地</label>
                        </div>
                        <div style="flex:1">
                            <a href="javascript:void(0)" class="pick-area pick-area4" style="height:30px;text-align:left;"></a>
                            <input type="hidden" name="carRegPlace" value='四川省 德阳市 旌阳区'>
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:10px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车货总重(吨)</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value" id="data_car_weight" placeholder="车货总重" name='carWeight' style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车长(米)</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value"  name="carLength" placeholder="车长" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">道路运输证号</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value"  name="roadLisence" placeholder="道路运输证" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">挂车车牌号</label>
                        </div>
                        <div style="flex:1;">
                            <input type="text" class="weui-input weui-form-preview__value"  name="trailerPlate" placeholder="挂车车牌号" style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车辆载重(吨)</label>
                        </div>
                        <div style="flex:1;">
                            <input type="number" class="weui-input weui-form-preview__value"  name="carTonnage"  placeholder="车辆载重"  style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">车辆立方(方)</label>
                        </div>
                        <div style="flex:1;">
                            <input type="number" class="weui-input weui-form-preview__value"  id="data_carcapacity" name="carCapacity" value='0'  style="border:none;height: 100%;text-align: right;border-bottom:1px solid #eee">
                        </div>
                    </div>
                    <div class="car_info" style="padding-top:5px">
                        <div style="flex:1">
                            <label class="weui-form-preview__label">定位来源</label>
                        </div>
                        <div style="flex:1;">
                            <select class="form-control" name="locationSrc" style="width:180px">
                                <option selected value='中交新路'>中交兴路</option>
                                <option value='app端'>app端</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="weui-form-preview__bd" style="background-color:white;padding-top:5px">
                    <div style="display: flex;">
                        <div style="flex:1;text-align: center;">
                            <div style="width:100px;height:100px;margin:0 auto" id='xsz'>
                                <img src='./images/home/add_img.png' id="id_pic_xsz" style="width:100%;height:100%">
                                <input type="hidden" name="lisencePic">
                            </div>
                            <label class="weui-form-preview__label" style="margin-left:30%">行驶证</label>
                        </div>
                        <div style="flex:1;">
                            <div style="width:100px;height:100px;margin:0 auto" id='choose_img_road'>
                                <img src='./images/home/add_img.png' style="width:100%;height:100%" id="id_pic_ysxkz">
                                <input type="hidden" name="transportLisencePic">
                            </div>
                            <label class="weui-form-preview__label" style="margin-left:20%">道路运输许可证</label>
                        </div>
                    </div>
                    <div style="display: flex;">
                        <div style="flex:1;">
                            <div style="width:100px;height:100px;margin:0 auto" id='choose_img_person'>
                                <img src='./images/home/add_img.png' style="width:100%;height:100%" id="id_pic_rchz">
                                <input type="hidden" name="peopleAndCarPic">
                            </div>
                            <label class="weui-form-preview__label" style="margin-left:30%">人车合照</label>
                        </div>
                        <div style="flex:1;">
                            <div style="width:100px;height:100px;margin:0 auto" id='choose_img_trail'>
                                <img src='./images/home/add_img.png' style="width:100%;height:100%" id="id_pic_gcxsz">
                                <input type="hidden" name="trailerLisencePic">
                            </div>
                            <label class="weui-form-preview__label" style="margin-left:30%">挂车行驶证</label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div>
            <a href="javascript:" class="weui-btn weui-btn_primary car_add_btn" id="car_info_save" style='display:none;border-radius: 15px;width:80%;margin-top:10px;background-color:#008c00'>保存修改</a>
            <a href="javascript:" class="weui-btn weui-btn_primary car_add_btn" id="car_info_add" style='display:none;border-radius: 15px;width:80%;margin-top:10px;background-color:#008c00'>添加</a>
        </div>
        <div style="width:100%;height:40px"></div>
    </div>

</div>
<!-- 车主-评价 -->
<div class="all-page car-fun-group car-view-details" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="car-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>评价详情</p>
    </div>
    <div class='view-items' style="background-color: white;">
        <div class="weui-cell weui-cell_access view-item">
            <div class="">
                <img src="images/home/pj_a.png" class="account-img"  />
            </div>
            <div class="weui-cell__bd" style="font-size: 14px;">我的评价</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access view-item" style="border-bottom:1px solid #eee">
            <div class="">
                <img src="images/home/pj_b.png" class="account-img"/>
            </div>
            <div class="weui-cell__bd" style="font-size: 14px;">收到评价</div>
            <div class="weui-cell__ft"></div>
        </div>
    </div>
</div>
<!-- 车主-收到评价-->
<div class="all-page car-fun-group car-times-recording" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="views-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>收到评价</p>
    </div>
    <div class="get-views" style="width:100%;height:auto;"></div>
    <div style="width:100%;text-align: center;">没有更多数据了</div>
</div>
<!-- 车主-我的评价 -->
<div class="all-page car-fun-group driver-times-recording" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="views-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>我的评价</p>
    </div>
    <div class="set-views" style="width:100%;height:auto;"></div>
    <div style="width:100%;text-align: center;">没有更多数据了</div>
</div>
<!-- 咨询投诉 -->
<div class="all-page car-fun-group car-feadback">
    <div class="header-style">
        <div class="car-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>咨询投诉</p>
    </div>
    <div>
        <textarea class="weui-textarea pr-text" placeholder="请描述你所发生的问题" rows="5"
            style="width:100%;background-color: white;text-indent: 10px;"></textarea>
    </div>
    <a href="javascript:;" class="weui-btn weui-btn_primary  btn-style problem-put">提交</a>
</div>
<!-- 关于我们 -->
<div class="all-page car-fun-group car-aboutus" style="display: none">
    <div class="header-style">
        <div class="car-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>关于我们</p>
    </div>
    <div>
        <div class="mine-head mine-head-aboutus">
            <div>
                <img src="./images/home/home_logo.png" style="width:125px;height:60px;">
            </div>
            <div class="item_center" style="font-size:14px;">特力达供应链</div>
        </div>
        <div class="mine-body">
            <div class="weui-cell weui-cell_access car_ower_aboutMe">

                <div class="weui-cell__bd">网站地址</div>
                <div class="weui-cell__ft">https://tld.tld56.cn/h5/main</div>
            </div>
            <div class="weui-cell weui-cell_access ">

                <div class="weui-cell__bd">服务热线</div>
                <div class="weui-cell__ft">0838-2376960</div>
            </div>
            <div class="weui-cell weui-cell_access check-version" style="border-bottom: 1px solid #eee">
                <div class="weui-cell__bd">检查新版本</div>
                <div class="weui-cell__ft">检查更新</div>
            </div>
        </div>
    </div>
    <div class="weui-footer" style="margin-top: 50px">
        <p class="weui-footer__text">Copyright © 2020</p>
        <p class="weui-footer__text">特力达供应链 TLD56.cn 版权所有</p>
    </div>
</div>
<!--货主-菜单区-->
<div class="all-page home home-goods-mine" style="display:none;font-size: 16px;">
    <div class="mine-head">
        <div class="home-back header-title back-extends" style="top:5px;left:-5px;"><i class="weui-icon-back-arrow-thin"></i></div>
        <div class="mine-top mine-personal_info get-info">
            <img src="images/home/mine/cars/mine-2.png">
        </div>
        <div class="mine-top-name" >
            <span id='data_goodsowner-name' style="font-size:16px;vertical-align: middle;">--</span>
            <img src="images/home/credit.png" style="width:16px;height:16px;vertical-align: middle;margin-left:15px">
            <span style="color:#FFAE03;font-size:16px;vertical-align: middle;" id='points_goods'></span>
        </div>
        <div class="mine-head-phone" id='data_goodsowner-phone'>--</div>
    </div>
    <div class="mine-data" style='line-height:60px;height: 60px'>
        <div class="content-top-left goods-mine-data item_center">
            账户信息
        </div>
        <div class="content-top-right goods-mine-data item_center" >
            银行卡
        </div>
        <div class="content-top-center goods-mine-data item_center" >
            <!-- 冻结保证金 -->
        </div>
    </div>
    <div class="mine-body">
        <div class="weui-cell weui-cell_access mine-goods-func common-style">
            <div>
                <img src="images/home/mine/goods/goods_mine_a.png" />
            </div>
            <div class="weui-cell__bd">认证信息</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="mine-goods-func"></div>
        <div class="weui-cell weui-cell_access mine-goods-func common-style">
            <div class="">
                <img src="images/home/mine/goods/goods_mine_e.png" />
            </div>
            <div class="weui-cell__bd">数据统计</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-goods-func common-style">
            <div class="">
                <img src="images/home/mine/goods/goods_mine_f.png" />
            </div>
            <div class="weui-cell__bd">常用信息</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-goods-func common-style">
            <div class="">
                <img src="images/home/mine/goods/goods_mine_h.png" />
            </div>
            <div class="weui-cell__bd">在线评价</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-goods-func common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-4.png" />
            </div>
            <div class="weui-cell__bd">通知消息</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-goods-func  common-style">
            <div class="">
                <img src="images/home/mine/cars/mine-7.png" />
            </div>
            <div class="weui-cell__bd">修改密码</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-goods-func common-style edit-password">
            <div class="">
                <img src="images/home/mine/goods/goods_mine_i.png" />
            </div>
            <div class="weui-cell__bd">咨询投诉</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access mine-goods-func common-style">
            <div class="">
                <img src="images/home/mine/goods/goods_mine_j.png"/>
            </div>
            <div class="weui-cell__bd">关于我们</div>
            <div class="weui-cell__ft"></div>
        </div>
        <div class="weui-cell weui-cell_access common-style" id="goods-exit">
            <div class="">
                <img src="images/home/exit.png"  />
            </div>
            <div class="weui-cell__bd">退出账号</div>
            <div class="weui-cell__ft"></div>
        </div>
    </div>
</div>
<!--货源发布-->
<div class="all-page home home-goods-release" style="display: none">
    <div class="header-style top-fixed">
        <div class="home-back header-title back-extends" style="top:-5px;left:-5px;"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>发布货源</p>
    </div>
    <div id="goods-release-top" class="top40">
        带<span class="item_color">*</span>号的为必选选项，完善发货信息，则可以一键找车。货源信息越详细，越方便司机查看，可以调高货与车的匹配
    </div>
    <form id="id_form" name="form">
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>业务类型</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <select class="item_color_gray common" id="business-type" name="businessType" style="width:130px;margin-top:-10px;">
                        <option value="请选择">请选择</option>
                    </select>
                </div>
            </li>
        </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>货物类型</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <select class="item_color_gray common" id='data_goodstype' name="type" style="width:130px;margin-top:-10px;">
                        <option value="机械、设备、电器">机械,设备,电器</option>
                        <option value="非金属矿石">非金属矿石</option>
                        <option value="水泥">水泥</option>
                        <option value="钢铁">钢铁</option>
                        <option value="金属矿石">金属矿石</option>
                        <option value="煤炭、及制品">煤炭,及制品</option>
                        <option value="矿建材料">矿建材料</option>
                        <option value="木材">木材</option>
                        <option value="非金属矿石">非金属矿石</option>
                        <option value="化肥及农药">化肥及农药</option>
                        <option value="盐">盐</option>
                        <option value="粮食">粮食</option>
                        <option value="轻工材料及制品">轻工材料及制品</option>
                        <option value="有色金属">有色金属</option>
                        <option value="轻工医药产品">轻工医药产品</option>
                        <option value="现活农产品">现活农产品</option>
                        <option value="冷藏冷冻货物">冷藏冷冻货物</option>
                        <option value="商品汽车">商品汽车</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
            </li>
        </ul>
        <!-- <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>货主装货确认</span><span class="item_color">*</span>
                </div>
                <div style="float:right;">
                    <input type="radio" checked name="loadIssue" value="0"
                        style="vertical-align: middle;margin-left: 10px;"><span
                        style="margin-left: 10px;">否&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <input type="radio" class="weui" name="loadIssue" value="1" style="vertical-align: middle"><span
                        style="margin-left: 10px;">是</span>
                </div>
            </li>
        </ul> -->
        <ul class="list">
            <li style="height:40px;width:100%">
                <div style="float:left">
                    <span>货物名称</span>
                </div>
                <div style="float:right;">
                    <input type="text" placeholder="货物名称" id="data_goodsname" class="release-input common" name="name" style="border: none;outline: none;">
                </div>
            </li>
        </ul>
        <!--   <ul class="list">
            <li style="height:40px;width:100%">
                <div style="float:left">
                    <span>运输线路</span>
                </div>
                <div style="float:right;">
                    <input type="text" placeholder="起点——终点"  class="release-input common" style="border: none;outline: none;">
                </div>
            </li>
        </ul> -->
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>计量方式</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <select class="item_color_gray common" id="measure-type" name="calculateType" style="width:130px;margin-top:-10px;">
                        <option value="weight">重量(吨)</option>
                        <option value="cubic">体积(方)</option>
                        <option value="wholeCar">包车</option>
                    </select>
                </div>
            </li>
        </ul>
        <ul class="list charter-type type-one">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>重量(吨)</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input class="release-input goods-val goods_weight common" id='data_goodsw' type="number" name="weight" placeholder="请输入重量">
                </div>
            </li>
        </ul>
        <ul style="display: none;" class="list  charter-type type-two">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>体积(方)</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input class="release-input goods-val goods_volume common" id="volume" type="number" name="cubics" placeholder="请输入体积">
                </div>
            </li>
        </ul>
        <ul style="display: none" class="list charter1 charter-type type-three">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>车数</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="number" placeholder="包车数"  id="car-num" name="assignNum" class="release-input common">
                </div>
            </li>
        </ul>
        <ul style="display: none;" class="list charter-type type-three">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>每车载重</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input class="release-input goods-val common" id="one_carweight"  type="number" name="tonnesPerCar" placeholder="每车载重" readonly>
                </div>
            </li>
        </ul>
        <ul class="list charter1">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>单价</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="number" placeholder="单价" id="unitprice" name="unitPrice" class="release-input common">
                    <input type="hidden" name="cubicsPerCar" class="form-control" value="0" readonly>
                </div>
            </li>
        </ul>
        <ul class="list" >
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>总价</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="number" id="total-price" placeholder="总价格" name="totalPrice" class="release-input common" readonly>
                </div>
            </li>
        </ul>
        <ul class="list postition" data-id="start" >
            <li style="height:40px;width:100%">
                <div class="item_float_left" style="width:20%">
                    <span>出发地</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right" style="width:80%;">
                    <div class="weui-cell__ft"><input class="release-btn common" type="text" id="start_postition_content"  value="北京市市区" readonly><img
                            src="./images/home/arrow_right2.png"></div>
                    <input type="hidden" name="loadingAddr" id="start_postition_content_1" value="北京市市区">
                </div>
            </li>
        </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>货主</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <select name="consignor" id="find-consingor" class="common" style="width:130px;margin-top:-10px;">
                        <option value="请选择">请选择</option>
                    </select>
                </div>
            </li>
        </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>发货人姓名</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="text" placeholder="请输入发货人姓名" id="data_sendername" name="sender" class="release-input-group common">
                </div>
            </li>
        </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>发货人电话</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="number" placeholder="请输入发货人电话" id="data_sphone" name="consignorPhone" class="release-input-group common">
                </div>
            </li>
        </ul>
        <ul class="list postition" data-id="end" style="height:40px;">
            <li style="height:40px;width:100%">
                <div class="item_float_left" style="width:20%;">
                    <span>目的地</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right" style="width:80%;">
                    <div class="weui-cell__ft"><input class="release-btn common"  id="end_postition_content" type="text" value="北京市市区" readonly><img
                            src="./images/home/arrow_right2.png"></div>
                    <input type="hidden" name="unloadingAddr" id="end_postition_content_1" value="北京市市区">
                </div>
            </li>
        </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>收货人姓名</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="text" placeholder="请输入收货人姓名" id="data_rname" name="receiver" class="release-input-group common">
                </div>
            </li>
        </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>收货人电话</span><span class="item_color">*</span>
                </div>
                <div class="item_float_right">
                    <input type="number" placeholder="请输入收货人电话" id='data_rphone' name="receiverPhone" class="release-input-group common">
                </div>
            </li>
        </ul>
        <ul class="list" style="display:none">
        <li style="height:40px;width:100%;">
            <div class="item_float_left">
                <span>收货人身份证</span>
            </div>
            <div class="item_float_right">
                <input type="text" placeholder="请输入收货人身份证" id="data_rpid" name="receiverId" class="release-input-group">
            </div>
        </li>
    </ul>
        <ul class="list">
            <li style="height:40px;width:100%">
                <div class="item_float_left">
                    <span>公里数</span>
                </div>
                <div class="item_float_right">
                    <input type="text" id="distance"  name="kilos" class="release-input-group common" value="0" style="color:gray">
                </div>
            </li>
        </ul>
        <textarea class="weui-textarea common" id='data_mark' name="remark" placeholder="点击添加备注" rows="3"></textarea>
        <div style="width: 100%;text-align: center;margin-top: 1rem;">
            <input type="checkbox" id="is-agree" style="vertical-align: middle" checked>
            <span style="margin-left: 10px;vertical-align: middle">我已阅读并同意<a href="javascript:" id='agreement' style="color:#6596A5">《物流协议》</a></span>
        </div>
        <div class="release-submit">
            <a href="javascript:" class="weui-btn weui-btn_primary" id="btn-submit">发布</a>
        </div>
        <input type="hidden" id="total_latlng" name="latlng" >
    </form>
    <div style="width:100%;height:40px;"></div>
</div>
<!--货源发布-出发地点/目的地点面板-->
<div class="all-page selected_postition" id="start_postition" style="display: none">
    <div class="header-style">
        <div class=" postition-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p class="postition-title">出发地点选择</p>
        <p class="postition-title">目的地选择</p>
    </div>
    <div class="panel-order_body">
        <div class="search_a" style="position: relative">
            <div class="weui-cell" style="font-size: 12px;">
                <div class="weui-cell__bd"><input type="text" id="keyword" class="weui-input" placeholder="请输入地址" style="font-size:16px;width:100%;text-align:center;height:40px;"/></div>
            </div>
            <div style="width:94%;margin:0 auto;display:flex;">
                <div style="width:100px">常用地址选择</div>
                <div style="flex:1">
                    <select style="width:100%" id='select-address'>
                    </select>
                </div>
            </div>
            <div class="weui-cell" style="position: relative;">
                <script>
                    var searchService, markers = [];
                    var init = function() {
                        var center = new qq.maps.LatLng(39.916527, 116.397128);
                        var map = new qq.maps.Map(document.getElementById('container'), {
                            center: center,
                            zoom: 13
                        });

                        //设置Poi检索服务，用于本地检索、周边检索
                        searchService = new qq.maps.SearchService({
                            //检索成功的回调函数
                            complete: function(results) {
                                //设置回调函数参数
                                var pois = results.detail.pois;
                                var infoWin = new qq.maps.InfoWindow({
                                    map: map
                                });
                                $(".local_postition").html('');
                                var latlngBounds = new qq.maps.LatLngBounds();
                                for (var i = 0, l = pois.length; i < l; i++) {
                                    var poi = pois[i];
                                    var elem='<div class="postition_item"><div><p class="pos-name">'+pois[i].name+'</p><p class="pos-addr">'+pois[i].address+'<span class="get-latlan" style="display: none">'+JSON.stringify(poi.latLng)+'</span></p></div><div><img src="./images/home/arrow_right2.png"></div></div>';
                                    let index=0;
                                    //剔除不合格的地址
                                    index+=pois[i].address.indexOf('省');
                                    index+=pois[i].address.indexOf('市');
                                    index+=pois[i].address.indexOf('区');
                                    index+=pois[i].address.indexOf('县');
                                    if(index>-4){
                                        $(".local_postition").append(elem);
                                    }
                                    //扩展边界范围，用来包含搜索到的Poi点
                                    //检索成功，将结果渲染到页面。
                                    latlngBounds.extend(poi.latLng);
                                    (function(n) {
                                        var marker = new qq.maps.Marker({
                                            map: map
                                        });
                                        marker.setPosition(pois[n].latLng);

                                        marker.setTitle(i + 1);
                                        markers.push(marker);


                                        qq.maps.event.addListener(marker, 'click', function() {
                                            infoWin.open();
                                            infoWin.setContent('<div style="width:280px;height:100px;">' + 'POI的ID为：' +
                                                pois[n].id + '，POI的名称为：' + pois[n].name + '，POI的地址为：' + pois[n].address + '，POI的类型为：' + pois[n].type + '</div>');
                                            infoWin.setPosition(pois[n].latLng);
                                        });
                                    })(i);
                                }
                                //调整地图视野
                                map.fitBounds(latlngBounds);
                            },
                            //若服务请求失败，则运行以下函数
                            error: function() {
                            }
                        });

                    }

                    //清除地图上的marker
                    function clearOverlays(overlays) {
                        var overlay;
                        while (overlay = overlays.pop()) {
                            overlay.setMap(null);
                        }
                    }
                    //设置搜索的范围和关键字等属性
                    function searchKeyword() {
                        var keyword =$("#keyword").val();
                        var region = document.getElementById("region").value;
                        var pageIndex =0;
                        var pageCapacity =5;
                        clearOverlays(markers);
                        //根据输入的城市设置搜索范围
                        searchService.setLocation(region);
                        //设置搜索页码
                        searchService.setPageIndex(pageIndex);
                        //设置每页的结果数
                        searchService.setPageCapacity(pageCapacity);
                        //根据输入的关键字在搜索范围内检索
                        searchService.search(keyword);

                    }
                </script>
                <div style="position: absolute;z-index: 1000;top:0px;">
                    <input id="region" type="hidden" value="北京">
                </div>
                <div style="width:100vw;height:60vh;margin:0 auto" id="container"></div>
            </div>
            <div class="local_postition" style="opacity: 0.9;top:108px">
            </div>
    </div>
    </div>
</div>
<!-- 物流协议 -->
<div class="all-page js_dialog" id="androidDialog1" style=" display:none;opacity: 1;">
    <div class="weui-mask"></div>
    <div class="weui-dialog weui-skin_android">
        <div class="weui-dialog__hd"><strong class="weui-dialog__title" style="color:red">警告</strong></div>
        <div class="weui-dialog__bd">
            请仔细阅读并勾选<span style="color:#6596A5">物流协议</span>
        </div>
        <div class="weui-dialog__ft">
            <a href="javascript:"  id="dialog-hide" class="weui-dialog__btn weui-dialog__btn_default">确定</a>
        </div>
    </div>
</div>
<!-- 货源单 -->
<div class="all-page all-page home home-goods-mineresource details-group" style="display: none;">
    <div class="header-style">
        <div class="home-back header-title back-extends" style="left:-5px;top:-5px"><i class="weui-icon-back-arrow-thin"></i>
        </div>
        <p>货源单</p>
    </div>
    <!--主体-->
    <div class="main resource-main" id="resource_num">
        <div class="order-title">
            <div class="content-top-left content-group resource-all">
                <span class="order-item-on ">未完成</span>
            </div>
            <div class="content-top-right content-group" id='finished_sources'>
                <span style="margin-right:15px;font-size: 16px;">已完成</span>
            </div>
            <div class="content-top-center content-group">
                <span style="font-size: 16px;">运输中</span>
            </div>
        </div>
        <div class="resource-main-item" id='goods-myorder'>
            <div class="resource_item_group">
            </div>
            <div class="resource_item_group resource_item_group" style="display: none">
            </div>
            <div class="resource_item_group" style="display: none;"></div>
        </div>
    </div>
</div>
<!-- 货主-订单管理 -->
<div class="all-page home home-goods-ordermanage details-group" style="display: none">
    <header class="wy-header">
        <div class="home-back header-title back-extends" style="top:5px;left:-5px;"><i class="weui-icon-back-arrow-thin item_left"></i></div>
        <div class="wy-header-title">订单管理</div>
    </header>
    <div class="order-main" id="goods-ordermanage-page">
        <div id="order-title">
            <div class="content-top-left " style="margin-left:20px;font-size: 16px;position: relative;">
                <span class="tab-items order-item-on ">未完成</span>
                <span class="weui-badge" id="goods-unorder2" style="position: absolute; top: 0px; left: 46px;">0</span>
            </div>
            <div class="content-top-right" >
                <span class="tab-items" style="margin-right:15px;font-size: 16px;">已结算</span>
            </div>
            <div class="content-top-center" >
                <span class="tab-items" style="font-size: 16px;">已完成</span>
            </div>
        </div>
        <div class="order-main-item" id='order-manage-item'>
            <div class="item_group1 main-order-group">
                数据加载中...
            </div>
            <div class="item_group1 main-order-group" style="display: none">
                数据加载中...
            </div>
            <div class="item_group1 main-order-group" style="display: none">
                数据加载中...
            </div>
        </div>
    </div>
</div>
<!--订单列表-->
<div class="all-page" id="ordermanagedetail" style="display:none">
    <div class="header-style">
        <div class="goods-ordermanage-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>订单列表</p>
    </div>
    <!--主体-->
    <div class="main" id="order-top-style">
        <div class="main-body-navbar" id='main-body-bar'>
            <div style="background-color:#008C00;color:white">全部</div>
            <div>已接单</div>
            <div>已装货</div>
            <div>已卸货</div>
            <div>已结算 </div>
        </div>
        <div class="main-details">
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">出发地：</span>

                    <span class="" id='data_goods-start'></span>
                    <input type="hidden" id="data_rid">
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">目的地：</span>
                    <span class="" id='data_goods-end'></span>
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">货物类型：</span>

                    <span class="" id='data_goods-type'></span>
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">货物总重：</span>
                    <span class="" id='data_goods-weight'>0</span>吨
                </div>
            </div>
            <!-- <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">装&nbsp;车&nbsp;费：</span>

                    <span class="">0元</span>
                </div>
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">卸&nbsp;车&nbsp;费：</span>

                    <span class="">0元</span>
                </div>
            </div> -->
            <!-- <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">需求车数：</span>

                    <span class=""><span id="data_need-car">0</span>车</span>
                </div>
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">未接车数：</span>

                    <span class=""><span id="data_un-car">0</span>车</span>
                </div>
            </div> -->
            <!-- <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">装车时间：</span>

                    <span class="" >白天</span>
                </div>
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">卸车时间：</span>

                    <span class="">白天</span>
                </div>
            </div> -->
            <!-- <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">允许路耗：</span>

                    <span class="">0千克/车</span>
                </div>

            </div> -->
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">已接吨位：</span>

                    <span class="" id='data_goods-finished'></span>
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">未接吨位：</span>

                    <span class="" id='data_goods-unfinished'></span>
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">货物单价：</span>

                    <span class="" id='data_goods-unitprice'>0</span>
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px; ">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%">货物描述：</span>

                    <span class="" id='data_goods-desp'></span>
                </div>
            </div>
            <div class="weui-flex" style="margin: 5px 20px;" id="show-code">
                <div class="weui-flex__item">
                    <span class="placeholder" style="width:30%;font-style: italic;text-decoration: underline;color:#008c00">货源单二维码</span>
                </div>
            </div>
            <div style="width:200px;height:200px;margin:0 auto;display: none" id="code-panel">
                <img src="" alt="货源单二维码" style="width:100%;height:100%">
            </div>
        </div>
        <div class="main-order-group" id='goods-order-group'>
            <div class="main-order-group">
                <div style="width:100%;text-align:center;color:#4C4199">暂无派单</div>
            </div>
            <div class="main-order-group" style="display: none">
                <div style="width:100%;text-align:center;color:#4C4199">暂无派单</div>
            </div>
            <div class="main-order-group" style="display: none">
                <div style="width:100%;text-align:center;color:#4C4199">暂无派单</div>
            </div>
            <div class="main-order-group" style="display: none">
                <div style="width:100%;text-align:center;color:#4C4199">暂无派单</div>
            </div>
            <div class="main-order-group" style="display: none">
                <div style="width:100%;text-align:center;color:#4C4199">暂无派单</div>
            </div>
        </div>
    </div>
</div>
<!--货主-我的-功能区-->
<!--账户信息-->
<div class="all-page goods-fun-group goods-account-info" style="display: none;">
    <div class="header-style header-account" style="border:none;background-color:white;">
        <div class="goods-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin" style="color:black;"></i></div>
        <p style="color:black">账户</p>
    </div>
    <div id="info_balance">
        <p>账户余额(元)</p>
        <div style="font-size: 40px;margin-top: 30px;" id='goods-balance'>----</div>
    </div>
    <div class="mine-body" >
        <div>
            <div class="mine-menu-tab" style="border:none">
                <div style="flex:1;" class='mine-bills-active'>待支付</div>
                <div style="flex:1;" >已支付</div>
            </div>
            <div class='goods-mine-billss' style="height:70vh;overflow:scroll">
                <div class='bills'>
                    <p style="width:100%;text-align:center">数据加载中...</p>
                </div>
                <div class="bills page-hide">
                    <p style="width:100%;text-align:center">数据加载中...</p>
                </div>
            </div>
        </div>
    </div>
</div>
<!--货主-->
<div class="all-page goodsaccount-info-group goodsaccount-info_record" style="display: none">
    <div class="header-style">
        <div class="account-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>充值记录</p>
    </div>
    <div class="mine-body">
        <div class="weui-form-preview">
            <div class="weui-cells__group weui-cells__group_form">
                <div class="weui-form-preview__bd" style="padding-right: 40px;">
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="color:black;">运费</label>
                        <span class="">2020-7-15</span>
                    </div>
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="color:black;">运输单号</label>
                        <span class="">256484595258</span>
                    </div>
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="margin:0px;color:black;">余额：</label>
                        <span class="weui-form-preview__value cash-num">3560.00</span>
                        <span class="weui-form-preview__value cash-num-input">-3200</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="weui-form-preview">
            <div class="weui-cells__group weui-cells__group_form">
                <div class="weui-form-preview__bd" style="padding-right: 40px;">
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="color:black;">运费</label>
                        <span class="">2020-7-15</span>
                    </div>
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="color:black;">运输单号</label>
                        <span class="">256484595258</span>
                    </div>
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="margin:0px;color:black;">余额：</label>
                        <span class="weui-form-preview__value cash-num">3560.00</span>
                        <span class="weui-form-preview__value cash-num-input">-3200</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="weui-form-preview">
            <div class="weui-cells__group weui-cells__group_form">
                <div class="weui-form-preview__bd" style="padding-right: 40px;">
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="color:black;">运费</label>
                        <span class="">2020-7-15</span>
                    </div>
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="color:black;">运输单号</label>
                        <span class="">256484595258</span>
                    </div>
                    <div class="weui-form-preview__item">
                        <label class="weui-form-preview__label" style="margin:0px;color:black;">余额：</label>
                        <span class="weui-form-preview__value cash-num">3560.00</span>
                        <span class="weui-form-preview__value cash-num-input">-3200</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 支付密码 -->
<div class="all-page goodsaccount-info-group goodsaccount-info_pwd" style="background-color:#eee;height:100vh;display: none">
    <div class="header-style header-account">
        <div class="account-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin" style="color: white;"></i></div>
        <p>设置支付密码</p>
    </div>
    <div class="pwd">
        <div class="cell pwd_title" >请输入新的支付密码 </div>
        <div>
            <input type="number" maxlength="1">
            <input type="number" name='code[]'  maxlength="1">
            <input type="number" name='code[]'  maxlength="1">
            <input type="number" name='code[]'  maxlength="1">
            <input type="number" name='code[]'  maxlength="1">
            <input type="number" name='code[]'  maxlength="1">
        </div>
    </div>
</div>
<!-- 咨询投诉 -->
<div class="all-page goods-fun-group goods-feadback" style="display:none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>咨询投诉</p>
    </div>
    <div>
        <textarea class="weui-textarea goods-pr-text" placeholder="请描述你所发生的问题" rows="5"
            style="width:100%;background-color: white;text-indent: 10px;"></textarea>
    </div>
    <a href="javascript:;" class="weui-btn weui-btn_primary  btn-style goods-problem-put">提交</a>
</div>
<!-- 银行卡 -->
<div class="all-page goods-fun-group goods-account-bank" style="height:100vh;position:relative;display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>银行卡</p>
    </div>
    <div class="bank_data" id='goods-bank' style="width:100%;height:90vh">
        <div style="width:100%;text-align:center">暂无银行卡</div>
    </div>
    <div class="bank_add goods-add-bank" id='goods_add-bank' style="bottom:30px">添加银行卡</div>
</div>
<!-- 银行卡详情 -->
<div class="all-page car-bank-detail " style="height:100vh;background-color: #eee;display:none">
    <div class="header-style">
        <div class="bank-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>银行卡详情</p>
    </div>
    <div class="mine-body" >
            <div class="weui-form-preview__bd" style="width:90%;margin:10px auto;background-color:white;border-radius:10px;font-size:14px">
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">开户行</label>
                    <span class="weui-form-preview__value" id='data_bank'>----</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">银行账号</label>
                    <span class="weui-form-preview__value" id='data_bank-card'>----</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">姓名</label>
                    <span class="weui-form-preview__value" id='data_ownername'>----</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">预留手机号</label>
                    <span class="weui-form-preview__value" id='data_phone'>----</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">支付宝账号</label>
                    <span class="weui-form-preview__value" id='data_ailipay'>----</span>
                    <input type="hidden" id='data_bank-id'>
                </div>
            </div>
            <a href="javascript:" class="weui-btn weui-btn_primary" id="bank-del" style="margin-top:10px;background-color: red;">删除</a>

    </div>
</div>
<!-- 添加银行卡 -->
<div class="all-page goods-fun-bank add-bank-car" id="add-bank-card" >
    <div class="header-style">
        <div class="add-card-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>添加银行卡</p>
    </div>
    <div class="mine-body">
        <form id="goods_bankAdd_form">
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">联行号</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" id="goods_bank_contactLine" name="contactLine" placeholder="请输入联行号">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">银行卡号</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" id="goods_bank_card" name="card" placeholder="请输入银行卡号">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">开户行</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" id="goods_bank_bank" name="bank" placeholder="请输入开户行信息">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">户名</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" id="goods_name" name="name" placeholder="银行账户户名">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">手机号</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" name="mobile" placeholder="请输入预留手机号">
                </div>
            </div>
            <div class="weui-cell weui-cell_active">
                <div class="weui-cell__hd">
                    <label class="weui-label">支付宝</label></div>
                <div class="weui-cell__bd">
                    <input class="weui-input and-bankcard-input" name="alipayId" placeholder="请输入支付宝账号">
                </div>
            </div>
        </form>
        <a class="weui-btn weui-btn_primary btn-style" id='add-bank-goods' href="javascript:">添加</a>
    </div>

</div>
<!-- 保证金 -->
<div class="all-page goods-fun-group goods-account-cash" style="display: none">
    <div class="header-style" style="border:none">
        <div class="goods-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>冻结保证金</p>
    </div>
    <div class="cash">
        <p>冻结保证金(元)</p>
        <div class="cash-furture" id='freeze-bail'>0.00</div>
    </div>
</div>
<!-- 货主认证信息 -->
<div class="all-page goods-fun-group goods-certify" style="display: none">
    <div class="header-style top-fixed">
        <div class="goods-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p style="font-weight: bolder">货主认证信息</p>
    </div>
    <div style="width:100%;height:150px;background-color:#008C00;text-align: center;margin-top:40px">
        <img src="./images/home/certify.png"  class="certify_logo" >
        <span class="pass-cartify" id='is-goods-certify'>未认证</span>
    </div>
    <div class="mine-body">
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd"><span style="color:red">*</span>联系人</div>
            <div id='data_certify-name'>----</div>
        </div>
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd"><span class="item_color">*</span>身份证号</div>
            <div id='data_certify-pid'>----</div>
        </div>
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd"><span class="item_color">*</span>公司名称</div>
            <div id='data_certify-company'>----</div>
        </div>
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd"><span class="item_color">*</span>营业执照号</div>
            <div id='data_certify-licence'>----</div>
        </div>
        <div class="weui-cell weui-cell_access" style="height:10px;"> 
            <div class="weui-cell__bd"><span class="item_color">*</span>所在区域</div>
            <div id='data_certify-addr'>----</div>
        </div>
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd"><span class="item_color">*</span>详细地址</div>
            <div id='data_certify-addrs'>----</div>
        </div>
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd"><span class="item_color">*</span>开户许可证</div>
            <div id="click-licence">点击查看</div>
        </div>
            <div id="licence-check" class="consignor-phone"><img src="./images/home/nopic.jpg" style="width:100%;height:100%"></div>
        <div class="weui-cell weui-cell_access"  style="height:10px;">
            <div class="weui-cell__bd" id="pidf-click">
                <span class="pass-content">身份证正面照(点击查看)</span>
            </div>
        </div>
        <div id="pid-front" class="consignor-phone"><img src="./images/home/nopic.jpg" style="width:100%;height:100%"></div>
        <div class="weui-cell weui-cell_access"  style="height:10px;">
            <div class="weui-cell__bd" id="pidb-click">
                <span class="pass-content">身份证反面照(点击查看)</span>
            </div>
        </div>
        <div id="pid-back" class="consignor-phone"><img src="./images/home/nopic.jpg" style="width:100%;height:100%"></div>
        <div class="weui-cell weui-cell_access" style="height:10px;">
            <div class="weui-cell__bd" id='licence-click' >
                <span class="pass-content">营业执照(点击查看)</span>
            </div>
        </div>
        <div id="licence-img" class="consignor-phone"><img src="./images/home/nopic.jpg" style="width:100%;height:100%"></div>
    </div>
    <!-- <a href="javascript:;" class="weui-btn weui-btn_primary  btn-style"
        style="width: 80%;border-radius: 30px;" id='sure-info22'>确定</a> -->
</div>
<!-- 公司成员 -->
<div class="all-page goods-fun-group goods-member" style="display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <span style="font-weight: bolder">公司成员</span>
        <span class="goods-member-add">添加成员</span>
    </div>
    <div class="member-add-top">
        <div class="main-body">
            <div class="main-body-navbar">
                <div  style="background-color:#008C00;color:white">发货人</div>
                <div>财务</div>
                <div>收货人</div>
            </div>
            <div class="main-body-content" style="width:100%;height:100px;position:relative">
                <div class="content-group"></div>
                <div class="content-group" style="display: none"></div>
                <div class="content-group" style="display: none"></div>
                <div class="item_nodata_style">暂无数据</div>
            </div>
        </div>
    </div>
</div>
<!-- 添加公司成员 -->
<div class="all-page goods-member_add" style="display: none">
    <div id="goods_member_add">
        <div class="header-style">
            <div class="goods-member-back header-title back-extends" ><i
                    class="weui-icon-back-arrow-thin"></i></div>
            <p>新增公司成员</p>
        </div>
        <div class="mine-body" id="member_and_main">
            <div class="weui-cell weui-cell_access ">
                <div class="weui-cell__bd">姓名</div>
                <div><input type="text" class="weui-input" placeholder="请输入员工姓名"></div>
            </div>
            <div class="weui-cell weui-cell_access ">
                <div class="weui-cell__bd">手机号码</div>
                <div><input type="text" class="weui-input" placeholder="请输入员工手机号"></div>
            </div>
            <div class="weui-cell weui-cell_access ">
                <div class="weui-cell__bd">密码</div>
                <div><input type="text" class="weui-input" placeholder="请输入员工登录密码"></div>
            </div>
            <div class="weui-cell weui-cell_access">
                <div class="weui-cell__bd">员工角色</div>
                <div>
                    <select class="weui-select" style="width:150px;color:gray">
                        <option value="0">发货人</option>
                        <option value="1">财务</option>
                        <option value="2">收货人</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="member_add_btn">
            <a href="javascript:;" class="weui-btn weui-btn_primary  btn-style">保存</a>
        </div>
    </div>
</div>
<!-- 数据统计 -->
<div class="all-page goods-fun-group goods-statistic" style="display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends"><i class="weui-icon-back-arrow-thin"></i></div>
        <p>数据统计</p>
    </div>
    <div class="statistic" >
        <div class="mine-body statistic-item">
            <div class="weui-cell weui-cell_access goods-statistic-func">
                <div class="">
                    <img src="images/home/deliver.png" class="account-img"  />
                </div>
                <div class="weui-cell__bd" style="font-size: 14px;">发货统计</div>
                <div class="weui-cell__ft"></div>
            </div>
            <div class="weui-cell weui-cell_access goods-statistic-func" style="border-bottom:1px solid #eee">
                <div class="">
                    <img src="images/home/home_tongji.png" class="account-img"/>
                </div>
                <div class="weui-cell__bd" style="font-size: 14px;">运费统计(已付款)</div>
                <div class="weui-cell__ft"></div>
            </div>
        </div>
    </div>
</div>
<!-- 发货统计 -->
<div class="all-page goods-statistic-group goods-statistic_deliver" style="height:auto;background-color:#eee;display: none">
    <div class="header-style">
        <div class="statistic-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <span style="font-weight: bolder">发货统计</span>
    </div>
    <div class="main-body-title" style="background-color: white">
        <div>货源单号</div>
        <div>货物名称</div>
        <div>吨数</div>
    </div>
    <div class="deliver-mine-body resource_put" id="deliver-all" style="width:100%;height:auto;background-color: white">
        <div style="width:100%;text-align:center">暂无数据</div>
    </div>
    <div class="total total-style">
        <label>合计:</label>
        <span class="amount_weight" id="amount-weight">0</span>
        <span>吨</span>
        <span class="amount_weight" id="amount-fee">0</span>
        <span>元</span>
    </div>
</div>
<!-- 运费统计 -->
<div class="all-page goods-statistic-group goods-statistic_fare" style="display: none;">
    <div class="header-style">
        <div class="statistic-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <span style="font-weight: bolder">运费统计</span>
        <span class="deliver_reset_group">
            <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_primary" id='filter-bill1' style="height:25px;font-size:12px;line-height:25px;margin-top:5px">筛选</a>
        </span>
    </div>
    <div class="data-deliver" >
        <div id="start_time_picker2"><span></span>开始时间<img width="8px"
                src="images/home/sort.png" alt="sort"></div>
        <div  id="stop_time_picker2">结束时间 <img width="8px" src="images/home/sort.png" alt="sort">
        </div>
    </div>
    <div class="data-deliver-data" style="border:none">
        <div id="car_start_time1">2019-07-02</div>
        <div id="car_end_time1">2019-07-02</div>
    </div>
    <div style="background-color:white;height:20px;line-height: 20px;display:flex">
        <div style="flex:1;text-align: center;">运输单号</div>
        <div style="flex:1;text-align: center;">金额</div>
        <div style="flex:1;text-align: center;">结算时间</div>
    </div>
    <div class="deliver-mine-body" id="deliver-mine-body1" style="height:68vh;overflow: scroll;">
        <div style="width:100%;text-align:center;">暂无数据</div>
    </div>
    <div style="width:100%;text-align:center;height:30px;color:#87cefa;font-size:18px">
        合计:<span class="amount_car" id='data_total-fee1'>0</span>元 
    </div>
    <a href="javascript:" class="weui-btn weui-btn_primary" id='refresh-bill1' >刷新</a>
    <div style="position: absolute;left:50%;top:50%;display: none;margin-left: -10px;" class='load-bill'><i class="weui-loading weui-icon_toast"></i></div>
</div>
<!-- 常用信息 -->
<div class="all-page goods-fun-group goods-normal-info" style="display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>常用信息</p>
    </div>
    <div class="normal-info">
        <div class="mine-body normal-info-cont">
            <div class="weui-cell weui-cell_access goods-info-func">
                <div class="">
                    <img src="images/home/receive_addr.png" class="account-img" />
                </div>
                <div class="weui-cell__bd" style="font-size: 14px;">常用地址</div>
                <div class="weui-cell__ft"></div>
            </div>
        </div>
    </div>
</div>
<!-- 常用发货地址 -->
<div class="all-page normal-info-group normal-info_daddr" style="display: none">
    <div class="header-style">
        <div class="info-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>常用发货地址</p>
    </div>
    <div class="deliver-nodata"></div>
    <div style="width:100%;text-align: center;">暂无更多数据</div>
</div>
<!-- 常用地址 -->
<div class="all-page normal-info-group normal-info_raddr" style="display: none">
    <div class="header-style">
        <div class="info-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>常用地址</p>
    </div>
    <div class="mine-body recive-top" style="height:90vh;overflow: scroll;"></div>
</div>
<!-- 新增常用地址 -->
<div class="all-page info_raddr_edit" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="raddr-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>新增常用地址</p>
    </div>
    <div class="mine-body" style="background-color: white">
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__bd">联系人</div>
            <div><input type="text" class="weui-input" placeholder="联系人"></div>
        </div>
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__bd">联系电话</div>
            <div><input type="text" class="weui-input" placeholder="联系电话"></div>
        </div>
        <div class="weui-cell weui-cell_access " style="border-bottom:1px solid #eee">
            <div class="weui-cell__bd">信用代码</div>
            <div><input type="text" class="weui-input" placeholder="信用代码"></div>
        </div>
        <div class="weui-cell weui-cell_access " style="border-bottom:1px solid #eee">
            <div class="weui-cell__bd">发货地区</div>
            <div class="" id="areaPicher" style="float: right;"></div>
        </div>
        <textarea class="weui-textarea" placeholder="请填写详细地址" rows="3" style="border: none"></textarea>
    </div>
    <a href="javascript:;" class="weui-btn weui-btn_primary  btn-style"
        style="width:80%;border-radius: 30px;">保存</a>
</div>
<!-- 开票信息 -->
<div class="all-page normal-info-group normal-info_ticket" style="display: none">
    <div class="header-style">
        <div class="info-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <span>开票信息</span>
        <span class="info-ticket_add">添加</span>
    </div>
    <div class="deliver-nodata">暂无数据</div>
</div>
<!-- 新增开票信息 -->
<div class="all-page ticket_add" style="height:100vh;background-color:#eee;display:none">
    <div class="header-style">
        <div class="func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>新增开票信息</p>
    </div>
    <div class="mine-body" style="margin:0px;background-color: white">
        <div class="weui-cell weui-cell_active">
            <div class="weui-cell__hd"><label class="weui-label">公司名称</label></div>
            <div class="weui-cell__bd">
                <input style="text-align: right;" class="weui-input" placeholder="公司名称">
            </div>
        </div>
        <div class="weui-cell weui-cell_active">
            <div class="weui-cell__hd"><label class="weui-label">纳税人识别号</label></div>
            <div class="weui-cell__bd">
                <input style="text-align: right;" class="weui-input" placeholder="纳税人识别号">
            </div>
        </div>
        <div class="weui-cell weui-cell_active">
            <div class="weui-cell__hd"><label class="weui-label">注册地址</label></div>
            <div class="weui-cell__bd">
                <input style="text-align: right;" class="weui-input" placeholder="注册地址">
            </div>
        </div>
        <div class="weui-cell weui-cell_active">
            <div class="weui-cell__hd"><label class="weui-label">注册电话</label></div>
            <div class="weui-cell__bd">
                <input style="text-align: right;" class="weui-input" placeholder="注册电话" type="number"
                    pattern="[0-9]*">
            </div>
        </div>
        <div class="weui-cell weui-cell_active">
            <div class="weui-cell__hd"><label class="weui-label">开户行</label></div>
            <div class="weui-cell__bd">
                <input style="text-align: right;" class="weui-input" placeholder="开户行" type="text">
            </div>
        </div>
        <div class="weui-cell weui-cell_active">
            <div class="weui-cell__hd"><label class="weui-label">银行账号</label></div>
            <div class="weui-cell__bd">
                <input type="text" style="text-align: right;" class="weui-input" placeholder="银行账号">
            </div>
        </div>
    </div>
    <a href="javascript:;" class="weui-btn weui-btn_primary "
        style="width: 80%;margin-top: 2rem;letter-spacing: 5px;border-radius: 30px;">保存</a>
</div>
<!-- 评价列表 -->
<div class="all-page goods-fun-group goods-mine-view" style="height:100vh;background-color:#CDCCC7;display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>评价列表</p>

    </div>
    <div class="mine-body view-list">
        <div class="weui-form-preview" style="background-color: #eee;margin-bottom: 5px;">
            <div class="weui-form-preview__bd">
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">货运单号</label>
                    <span class="weui-form-preview__value">254684597512</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">货源单号</label>
                    <span class="weui-form-preview__value">3526521565486</span>
                </div>
                <div class="weui-form-preview__item">
                    <label class="weui-form-preview__label">评价</label>
                    <span class="weui-form-preview__value">问题处理很及时</span>
                </div>
            </div>
        </div>
        <div class="view-nodata">
            暂无更多数据
        </div>
    </div>
</div>
<!-- 货主-我的评价 -->
<div class="all-page goods-fun-group goods-times-complaint" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>评价详情</p>
    </div>
        <div class='goods-view-items' style="background-color: white;">
                <div class="weui-cell weui-cell_access goods-view-item">
                    <div class="">
                        <img src="images/home/pj_a.png" class="account-img"  />
                    </div>
                    <div class="weui-cell__bd" style="font-size: 14px;">我的评价</div>
                    <div class="weui-cell__ft"></div>
                </div>
                <div class="weui-cell weui-cell_access goods-view-item" style="border-bottom:1px solid #eee">
                    <div class="">
                        <img src="images/home/pj_b.png" class="account-img"/>
                    </div>
                    <div class="weui-cell__bd" style="font-size: 14px;">收到评价</div>
                    <div class="weui-cell__ft"></div>
                </div>
            </div>
</div>
<!-- 货主-收到评价-->
<div class="all-page car-fun-group goods-times-recording" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="goods-views-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>收到评价</p>
    </div>
    <div class="goods-get-views" style="width:100%;height:auto;"></div>
    <div style="width:100%;text-align: center;">没有更多数据了</div>
</div>
<!-- 车主-我的评价 -->
<div class="all-page car-fun-group consignor-times-recording" style="height:100vh;background-color:#eee;display: none">
    <div class="header-style">
        <div class="goods-views-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>我的评价</p>
    </div>
    <div class="goods-set-views" style="width:100%;height:auto;"></div>
    <div style="width:100%;text-align: center;">没有更多数据了</div>
</div>

<!-- 通知消息 -->
<div class="all-page goods-fun-group goods-notice-message" style="height:100vh;display: none;background:#eee">
    <div class="header-style top-fixed">
        <div class="goods-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>通知消息</p>
    </div>
    <div id='goods-message-sys' class='top40'></div>
    <div id="goods-message-top"></div>
</div>
<!-- 通知消息 -->
<div class="all-page car-fun-group car-notice-message" style="height:100vh;display: none;background:#eee">
    <div class="header-style top-fixed">
        <div class="car-func-back header-title back-extends"><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>通知消息</p>
    </div>
    <div id='message-sys' class='top40'></div>
    <div id='message-top'></div>
</div>
<!-- 关于我们 -->
<div class="all-page goods-fun-group goods-aboutus" style="display: none">
    <div class="header-style">
        <div class="goods-func-back header-title back-extends" ><i
                class="weui-icon-back-arrow-thin"></i></div>
        <p>关于我们</p>
    </div>
    <div>
        <div class="mine-head mine-head-aboutus">
            <div>
                <img src="./images/home/home_logo.png" style="width:125px;height:60px;">
            </div>
            <div class="item_center" style="font-size: 14px;">特力达供应链</div>
        </div>
        <div class="mine-body">
            <div class="weui-cell weui-cell_access car_ower_aboutMe">

                <div class="weui-cell__bd">网站地址</div>
                <div class="weui-cell__ft">https://tld.tld56.cn/h5/main</div>
            </div>
            <div class="weui-cell weui-cell_access ">

                <div class="weui-cell__bd">服务热线</div>
                <div class="weui-cell__ft">0838-2376960</div>
            </div>
            <div class="weui-cell weui-cell_access check-version" style="border-bottom: 1px solid #eee">
                <div class="weui-cell__bd">检查新版本</div>
                <div class="weui-cell__ft">检查更新</div>
            </div>
        </div>
    </div>
    <div class="weui-footer" style="margin-top: 50px">
        <p class="weui-footer__text">Copyright © 2020</p>
        <p class="weui-footer__text">特力达供应链 TLD56.cn 版权所有</p>
    </div>
</div>
<!--******************货源页****************************-->
<!--筛选-->
<div class="all-page page_goods_filter">
    <div class="panel-goods-header">
        <div class="weui-cells" style="margin-top:0;height: 40px;line-height:40px;">
            <div class="cargoods-back back-extends" style="float: left;margin-left:15px;" id='filter_group'><i class="weui-icon-back-arrow-thin"
                    style="text-align: left"></i></div>
            <div style="margin-left:44%"><span class="weui-cell__bd" style="text-align:center;">搜索资源</span>
            </div>
        </div>
    </div>
    <form action="">
        <div class="panel-me-id_body">
            <div class="weui-cells">
                <form id='filter-form'>
                    <div class="weui-cell" style="font-size: 16px;">
                        <div class="weui-cell__hd">
                            <img src="images/cars_source/point_a.png" 
                                style="width:5px;height:5px;vertical-align: middle">
                        </div>
                        <div class="weui-cell__bd" style="margin-left: 10px;">
                            <span style="vertical-align: middle">货主姓名</span>
                        </div>
                        <div class="weui-cell__ft">
                            <input type="text" name="sender" id='filter-sender' class="place-delivery weui-input" placeholder="请输入货主姓名">
                        </div>
                    </div>
                    <div class="weui-cell" style="font-size: 16px;">
                        <div class="weui-cell__hd">
                            <img src="images/cars_source/point_b.png" 
                                style="width:5px;height:5px;vertical-align: middle">
                        </div>
                        <div class="weui-cell__bd" style="margin-left: 10px;">
                            <span style="vertical-align: middle">货主电话</span>
                        </div>
                        <div class="weui-cell__ft">
                            <input type="number" name="consignorPhone" id='filter-phone' class='weui-input' placeholder="请输入货主电话">
                        </div>
                    </div>
                    <div class="weui-cell" style="font-size: 16px;">
                        <div class="weui-cell__hd">
                            <img src="images/tab/source.png"  style="width:15px;height:15px;vertical-align: middle">
                        </div>
                        <div class="weui-cell__bd" style="margin-left: 10px;">
                            <span style="vertical-align: middle">货物名称</span>
                        </div>
                        <div class="weui-cell__ft">
                            <input class="weui-input"  name='name' id='filter-name' placeholder="货物名称">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <a href="javascript:;" class="weui-btn weui-btn_primary filter-group"
            style="width: 80%;margin-top: 2rem;letter-spacing: 5px;display: none;" id='inner-search-goods' >搜索</a>
            <a href="javascript:;" class="weui-btn weui-btn_primary filter-group"
            style="width: 80%;margin-top: 2rem;letter-spacing: 5px;display: none;" id='outter-search-goods'>搜索</a>

    </form>
</div>
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/pick-pcc.min.1.0.1.js"></script>
    <script src="js/jquery.cookie.min.js"></script>
    <script src="js/mobile_common_v4.js"></script>
    <script src="js/comm.js"></script>
    <script src='js/weui.min.js'></script>
    <script src="./js/toast.script.js"></script>
    <script src="./js/bignumber.js"></script>
    <!-- <script src="./js/vconsole.min.js"></script>
    <script>
        var vconsole = new VConsole()
    </script> -->
    <!-- <script src="./js/oil.js"></script> -->
    <!-- <script src="./js/bscroll.js"></script> -->
    <script>
        var originalHeight=document.documentElement.clientHeight ||document.body.clientHeight;
        window.onresize=function(){
            //键盘弹起与隐藏都会引起窗口的高度发生变化
            var resizeHeight=document.documentElement.clientHeight || document.body.clientHeight;
                if(resizeHeight-0<originalHeight-0){
                    //键盘弹起
                    $('.keybord-change').hide()
                    $('.login_content').css({
                        top:10+'px',
                        marginTop:0+'px'
                    })
                }else{
                    //键盘放下
                    $('.keybord-change').show()
                    $('.login_content').css({
                        top:50+'%',
                        marginTop:-50+'px'
                    })
                }
        }
    </script>
    <!--页面刷新 -->
    <script>
        /******运单车辆定位****/
        var page=0;
        function _init(a,b) {
            var myLatlng = new qq.maps.LatLng(a,b);
            var myOptions = {
                zoom: 8,
                center: myLatlng
            };
            var map = new qq.maps.Map(document.getElementById("truck-map"), myOptions);
            var marker = new qq.maps.Marker({
                //设置Marker的位置坐标
                position: myLatlng,
                //设置显示Marker的地图
                map: map
            });
            marker.setVisible(true);
        }
    </script>
    <script>
        //状态存储
        let current_tab_page=0;//页面切换标识
        let order_id='';
        let current_order_details='';//确定当前订单详情页
        let info_page='goods';
        let cur_type=0;
        /**
         * 序列化表单为json
         */
        $.fn.serializeObject_comm = function() {
            var o = {};
            var a = this.serializeArray();
            $.each(a, function() {
                if (o[this.name] !== undefined) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            return o;
        };
        /**
        *  扫码接单
         *  gid 货源id
        * */
        function responseQrcode(data){
            var obj = {};
            try {
                data = JSON.parse(data)
            } catch (error) {
                
            }
            //获取货源id并存储
            let store = JSON.parse(j2aCls.GetToken())
            store.gid = data.sid
            j2aCls.SetToken(JSON.stringify(store))
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "getCars";
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            obj.ect = 'grab-order';
        }
        /**
         * 时间戳转格式
        * */
        function getFormat(){
            format = "";
            var nTime = new Date();
            format += nTime.getFullYear()+"-";
            format += (nTime.getMonth()+1)<10?"0"+(nTime.getMonth()+1):(nTime.getMonth()+1);
            format += "-";
            format += nTime.getDate()<10?"0"+(nTime.getDate()):(nTime.getDate());
            format += "T";
            format += nTime.getHours()<10?"0"+(nTime.getHours()):(nTime.getHours());
            format += ":";
            format += nTime.getMinutes()<10?"0"+(nTime.getMinutes()):(nTime.getMinutes());
            format += ":00";
            return format;
        }
        function formatDate(now) {
            now = parseInt(now) 
            var d = new Date(now * 1000);    //根据时间戳生成的时间对象
            var date = (d.getFullYear()) + "-" + (d.getMonth() + 1) + "-" +
           (d.getDate()) + " " + 
           (d.getHours()) + ":" + 
           (d.getMinutes()) + ":" + 
           (d.getSeconds());
           return date
        } 
        /**
         * 单位转换
         * */
        function unitConver(unit){
            let arr=['元/吨','吨'];
            switch(unit){
                case 'wholeCar':
                case 'rent':
                    arr.splice(0,1,'元/车');
                    arr.splice(1,1,'车');
                    break;
                case 'cubic':
                    arr.splice(0,1,'元/方');
                    arr.splice(1,1,'方');
                    break;
                default:
                    break;
            }
            return arr;
        }
        /**
         * 订单状态转换
         * */
        function statusConver(sta){
            let status='';
            switch(sta){
                case '1':
                    status='已接单';
                    break;
                case '2':
                    status='已装货';
                    break;
                case '3':
                    status='已卸货';
                    break;
                case '4':
                    status='已核算';
                    break;
                case '5':
                    status='已付款';
                    break;
            }
            return status;
        }
        /**
         *获取图片文件
         * */
        function getFileLink(fid){
            var obj = {};
            obj.function = "getFile";
            obj.fid = fid;
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            // let url = 'https://tld.0838mai.cn/php/srv/?msg='
            let url = 'https://tld.tld56.cn/php/srv/?msg='
            return url+JSON.stringify(obj);
        }
        /**
         *  获取装货地址 1->装货 2->卸货
        */
      function getFormatAddress(value,type){
            if(typeof value == 'object'){
                if(type == '1'){
                    return value.loadingAddr
                }else{
                    return value.unloadingAddr
                }
            }
            else if(value.indexOf('{') == 0){
                let addr=JSON.parse(value);
               if(typeof addr.loadingAddr != 'undefined'){
                   return addr.loadingAddr
               }else{
                   return addr.unloadingAddr
               }
            }else{
                let reg = /[\u4e00-\u9fa5a-zA-Z0-9-_]+/g
                let res = value.match(reg)[0]
                if(res =='loadingAddr' || res == 'unloadingAddr'){
                    return value.match(reg)[1]
                }
                return res
            }
        }

        /**
         * touchend消除点击击穿
         * */
        function stopTouchendPropagationAfterScroll(){
            var locked = false;
            window.addEventListener('touchmove', function(ev){
                locked || (locked = true, window.addEventListener('touchend', stopTouchendPropagation, true));
            }, true);
            function stopTouchendPropagation(ev){
                ev.stopPropagation();
                window.removeEventListener('touchend', stopTouchendPropagation, true);
                locked = false;
            }
        }
		/*
		* 打分生成star
		*/
	   function getStar(star){
		   let html = ''
		   let level = parseInt(Math.ceil(star/2))
		   switch(level){
			   case 5:
			   				for(let i=0;i<5;i++){
			   					html += '<img src="images/home/star_1.png" style="padding-top:10px">'
			   				}
			   				break
			   case 4:
			   			   for(let i=0;i<5;i++){
			   				   if(i<4){
			   					   html += '<img src="images/home/star_1.png" >'
			   				   }else{
			   					   html += '<img src="images/home/star_2.png" >'
			   				   }
			   			   }
			   			   break
			   			case 3:
			   				for(let i=0;i<5;i++){
			   					if(i<3){
			   						html += '<img src="images/home/star_1.png">'
			   					}else{
			   						html += '<img src="images/home/star_2.png">'
			   					}
			   				}
			   				break
			   case 2:
			   				for(let i=0;i<5;i++){
			   					if(i<2){
			   						html += '<img src="images/home/star_1.png">'
			   					}else{
			   						html += '<img src="images/home/star_2.png">'
			   					}
			   				}
			   				break
			   			default:
			   				for(let i=0;i<5;i++){
			   					if(i<1){
			   						html += '<img src="images/home/star_1.png">'
			   					}else{
			   						html += '<img src="images/home/star_2.png">'
			   					}
			   				}
			   				break
		   }
		   return html
       }
    /**
     * 基础功能抽离
    */
    //首页-货源渲染    
    function sourcesRender(data,type='load'){
        let {total,start} =  JSON.parse($('.page-data').val())
        let pages = {
            total,
            start
        }
        $('.page_goods_filter').hide();
        $('.weui-tab-edit').removeClass('page-hide')
        if(!data.rows.length && type == 'load'){
            $('#goods-page-filter').find('.data').html('<div style="width:100%;text-align:center">暂无数据</div>');
            return;
        }
        let btntext='',role='';
        let hide = ''
        if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
            btntext='抢单';
        }else{
            btntext='派单';
            hide = 'bill-hide'
        }
        var strObj = '<div id="top"></div>'
        for(let item of data.rows){
            let type=unitConver(item.calculateType);
                if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                    role='货主:'+item.consignor;
            }else{
                role=item.unitPrice+type[0];
            }
            let start_pos='',end_pos='';
            //装卸货地址转换
            start_pos = item.loadingAddr = getFormatAddress(item.loadingAddr,1)
            end_pos = item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)
            if(item.loadingAddr && item.loadingAddr.length>10){
            start_pos=item.loadingAddr.substring(0,10);
                start_pos+='...';
            }
            if(item.unloadingAddr && item.unloadingAddr.length>10){
            end_pos=item.unloadingAddr.substring(0,10); 
                end_pos+='...';
            }
            let ele = `<div class="content content-item"  data-uid=${item.id} style="height:120px;">
                                        <ul>
                                            <li style="color:gray">
                                                <img class="position-item" src="images/cars_source/point_a.png">
                                                <span>${start_pos}</span>
                                            </li>
                                            <li style="color:gray;margin-top:-15px;">
                                                <img src="images/cars_source/point_b.png" class="position-item">
                                                <span>${end_pos}</span>
                                            </li>
                                            <li style="margin-top:-5px;">
                                                <strong style="font-weight: bolder;">${item.name}</strong>
                                                <span style="margin-left: 25px;">${role}</span>
                                            </li>
                                        </ul>
                                        <div class="content-item-right" style="display:flex;flex-direction: column;text-align:right">
                                                <div style="font-size:16px;margin-top:8px">可抢单</div>
                                                <div style="font-weight: bolder;font-size:16px;margin-top:5px">${Number(item.remains).toFixed(2)+'&nbsp;'+ type[1]}</div>
                                                <div class=${hide} style="margin-top:8px"><a href="javascript:" class="weui-btn weui-btn_primary take_order_btn ttt" data-gid=${item.id}>抢单</a></div>
                                        </div>
                                        <div class="line-style"><span>线路:&nbsp;&nbsp;&nbsp;&nbsp;<span>${item.remark}</div>
                                    </div>`;
            if(item.status&&item.status=='0'){
            }else{
                if(Number(item.remains) > 0){
                    strObj += ele
                }
            }
        }
        // 加载更多按钮
        if(pages.total > pages.start && type == 'load'){
            $('.load-more').show()
            $('.no-data-show').hide()
        }else if(pages.total > pages.start && type == 'more'){
            $('.load-more').show()
            $('.no-data-show').hide()
        }else if(type == 'filter'){
            $('.load-more').hide()
            $('.no-data-show').hide()
        }else if(pages.total > 10){
            $('.load-more').hide()
            $('.no-data-show').show()
        }
        if(type == 'load' || type == 'filter'){
            if(strObj.trim() == '<div id="top"></div>'){
                $(".goods-page").find('.data').html(nullHtml)
            }else{
                $(".goods-page").find('.data').html(strObj)
            }
        }else if(type == 'more'){
            $(".goods-page").find('.data').append(strObj)
        }
        current_tab_page=0;
    }
    // 首页-车辆数据渲染
    function carsRender(data,type='load'){
        let {total,start} =  JSON.parse($('.car-page-data').val())
        let pages = {
            total,
            start
        }
        if(!data.rows.length){
            let ele='<div style="width:100%;text-align:center">暂无数据</div>';
            $("#car-page").find('.data').html(ele);
            return;
        }
        var strObj = '<div id="top1"></div>'
        for(let item of data.rows){
            strObj += ` <div class="content content-item" data-uid=${item.id} style="height:120px;border-top:1px solid #EDEDED">
                            <ul>
                                <li style="border-bottom: 1px solid #eee;color:gray">
                                    <div class="content-top-left">
                                        <img src="images/cars_source/car_sources.png" class="top-right-img" >
                                        <span style="font-size: 15px">${item.plate}</span>
                                    </div>
                                    <div class="content-top-right">
                                        <span style="margin-right:15px;font-size: 15px">待货中</span>
                                    </div>
                                    <div class="content-top-center">
                                        <span style="font-size: 15px">${item.carModel}</span>
                                    </div>
                                </li>
                                <li style="color:gray;">
                                    <img src="images/cars_source/point_a.png" class="position-item">
                                    <span style="font-size: 15px">${item.carIssue}</span>
                                </li>
                                <li style="color:gray;margin-top:-10px;">
                                    <img src="images/cars_source/point_b.png" class="position-item">
                                    <span style="font-size: 15px">${item.carRegPlace}</span>
                                </li>
                            </ul>
                        </div>`;
        }
        // <div class="content-right">
        //                         <a href="javascript:" class="weui-btn weui-btn_primary place_order">下单</a>
        //                     </div>
        $("#car-page").find('.data').html(strObj)
        // 加载更多按钮
        if(pages.total > pages.start && type == 'load'){
            $('.car-load-more').show()
            $('.car-nodata').hide()
        }else if(pages.total > pages.start && type == 'more'){
            $('.car-load-more').show()
            $('.car-nodata').hide()
        }else if(type == 'filter'){
            $('.car-load-more').hide()
            $('.car-nodata').hide()
        }else if(pages.total > 10){
            $('.car-load-more').hide()
            $('.car-nodata').show()
        }
        if(type == 'load' || type == 'filter'){
            if(strObj.trim() == '<div id="top1"></div>'){
                $("#car-page").find('.data').html(nullHtml)
            }else{
                $("#car-page").find('.data').html(strObj)
            }
        }else if(type == 'more'){
            $("#car-page").find('.data').append(strObj)
        }
        current_tab_page=0;
    }
    //重构
        /******************后台链接*******************/
        /**
         * 操作反馈
         * */
        function addToast(_content){
            $('#centerTips').html(_content);
            $('#centerTips').show();
            setTimeout(()=>{
                $('#centerTips').hide();
            },3000)
        }
        /**
         * 前台数据发送
         * */
        function sendMsg(obj){
            // android网络数据请求
            j2aCls.SendMsgViaHost(obj);
            // ajax网络数据请求。
            // postData_comm("/php/srv/",obj,function (data) {
            //     responseViaHost(data);
            // });
        }
        /**
         * android平台验证
        */
        function isAndroid(){
            var u = navigator.userAgent;
            if(u.indexOf('Android') > -1 || u.indexOf('Linux') > -1){
                return true;
            }
            return false
        }
         /**
         * 进入app,获取定位信息
         */
         let fromParams = ''
         window.onload = function(){
             stopTouchendPropagationAfterScroll()
             getLocation()
         }
        function getLocation(){
            let addr = j2aCls.GetLocation()
            if(addr && addr.indexOf('{') >= 0){
                try {
                    if(isAndroid()){
                        addr = JSON.parse(JSON.parse(addr))
                    }else{
                        addr = JSON.parse(addr)
                    }
                    fromParams = ''
                    fromParams += addr.lat +','
                    fromParams += addr.lng
                } catch (error) {
                    
                }
            }else{
                // setTimeout(function(){
                //     getLocation()
                // },1000)
            }
         }
         $('#geterror').on('touchend',function(){
             $(this).hide()
         })
        // 数据格式转换
        function dataFormat(data){
            if(typeof data.rows != 'undefined'){
                return data.rows
            }else if(typeof data.message.rows != 'undefined'){
                return data.mesage.rows
            }else if(typeof data.message.row != 'undefined'){
                return data.message.row
            }
        }
        /**
         * 后台数据回调
         * */
        function responseViaHost(data){
            // 数据格式调整
            try {
                data = JSON.parse(data)
            } catch (error) {
                data = data.replace(/("{)/g,'{')
                data = data.replace(/(}")/g,'}')
                data = data.replace(/(\]")/g,']')
                data = data.replace(/("\[)/g,'[')
                try {
                    data = JSON.parse(data)
                } catch (error) {
                    $('#geterror').html('后台数据有异常,点击屏幕退出')
                    $('#geterror').show()
                }
            }
            //初始化首页菜单栏
            {
                if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                    $('#tab2').hide();
                    $('#tab1').show();
                }else{
                    $('#tab1').hide();
                    $('#tab2').show();
                }
            }
             if(data.result == 'success'){
                // 按反馈值进行数据渲染
                switch(data.ext){
                    case 'login_success'://登陆成功
                        //信息存储
                        {
                            var store = {
                            token:data.message,
                            user:$('#login_user').val(),
                            pwd:$('#login_pwd').val(),
                            cur_load:'0'
                            }
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        $(".login").css('display','none');
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide')
                        $('#enter_page').show();
                        setTimeout(()=>{
                            $('#enter_page').hide();
                        },1000)
                        //获取登录用户数据
                        {
                            var obj21={};
                            obj21.token = JSON.parse(j2aCls.GetToken())['token'];
                            obj21.function='getMyinfo';
                            obj21.ext = 'login_info'
                            sendMsg(JSON.stringify(obj21));
                        }
                        break
                    case 'login_info'://存储登陆信息
                        let did = null , uid = null
                        if(data.role == 'driver'){
                            $('#tab2').hide();
                            $('#tab1').show();
                            did = data.id
                            // 获取历史订单
                            {
                                let his = {}
                                his.function = "fr_lik_waybills"
                                his.token = JSON.parse(j2aCls.GetToken())['token'];
                                his.conditions = {
                                    uid:data.id
                                }
                               // his.category = 'CX'
                               his.function = 'getWaybillsHis'
                                his.ext = 'history_bills'
                                sendMsg(JSON.stringify(his));
                            }
                        }else{
                            uid = data.id
                            $('#tab1').hide();
                            $('#tab2').show();
                        }
                        //信息存储
                        {
                            var store = JSON.parse(j2aCls.GetToken())
                            store.role = data.role
                            store.name = data.name
                            store.phone = data.user
                            if(uid){
                                store.uid = uid
                            }else{
                                store.did = did
                            }
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        break
                    case 'history_bills':
                        $('#history-bills').html(data.total)
                        break
                    case 'goods_myinfo'://货主我的
                        {
                            $('.scan_code').hide();
                            $('#see-contract').hide();
                            let info = null
                            if(!data.info){
                                info = data
                            }else{
                                info = data.info
                            }
                            data.name = !data.name ? data.user : data.name
                            data.phone = !data.phone ? data.user : data.phone
                            $('#data_goodsowner-name').html(data.name);
                            $('#points_goods').html(data.fraction + '分')
                            $('#data_goodsowner-phone').html(info.phone);
                            //渲染货主认证信息
                            $('#data_certify-name').html(data.name);
                            $('#data_certify-pid').html(data.pid);
                            $('#data_certify-company').html(info.company);
                            $('#data_certify-licence').html(info.code);
                            $('#data_certify-addr').html(info.address);
                            $('#data_certify-addrs').html(info.address);
                            // //个人信息渲染
                            $('#data_info-name').html(data.name);
                            $('#data_info-phone').html(info.phone);
                            if(data.signature){
                                $('#is_signature').html('<span style="color:#008c00">(已签名)</span>')
                                $("#my_signature").attr("src",getFileLink(info.signature));
                            }else{
                                $('#is_signature').html('(暂未签名)')
                            }
                        }
                        break
                    case 'cars_myinfo':
                        {
                            console.log(data)
                            let store = JSON.parse(j2aCls.GetToken())
                            store.star = data.points
                            j2aCls.SetToken(JSON.stringify(store))
                            $('.scan_code').show();
                            $('#see-contract').show();
                            let info = null
                            if(!data.info){
                                info = data
                            }else{
                                info = data.info
                            }
                            data.name = !data.name ? data.user : data.name
                            data.phone = !data.phone ? data.user : data.phone
                            //司机认证渲染
                            $('#sj_name').val(info.name);
                            $('#sj_phone').val(info.phone);
                            $('#sj_pwd').val(JSON.parse(j2aCls.GetToken())['pwd']);
                            $('#sj_idNumber').val(info.pid);
                            $("#data_driver-name").html(data.name)
                            $('#points_cars').html(data.fraction + '分')
                            $('#data_driver-phone').html(info.phone);
                            //个人信息渲染
                            $('#data_info-name').html(data.name);
                            $('#data_info-phone').html(info.phone);
                            if(data.signature){
                                $('#is_signature').html('<span style="color:#008c00">(已签名)</span>')
                                $("#my_signature").attr("src",getFileLink(info.signature));
                            }else{
                                $('#is_signature').html('(暂未签名)')
                            }
                        }
                        break
                    case "addSource"://发布货源
                        addToast("货源发布成功")
                        $(".home-goods-release").hide()
                        $(".weui-tab-edit").removeClass('page-hide')
                        $(location).attr('href', 'index.html?'+new Date().getTime());
                        window.location.reload()
                        $('#home-index-tab').click()
                        break;
                    case 'unloadddingWaybill'://卸货
                        $('#unfulled').html('0');
                        addToast("卸货成功");
                        $(location).attr('href', 'index.html?'+new Date().getTime());
                        window.location.reload()
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide');
                        $('#home-index-tab').click()
                        //数据清空
                        $('.unload-time').val('');
                        $('.unload-weight').val('');
                        $('.load-weight').val('');
                        $('#choose_img_unload').find('img').attr('src','./images/home/add_img.png')
                        $('.unload-goods-page').hide();
                        //重新加载数据
                        {
                            const ss1={};
                            ss1.token=JSON.parse(j2aCls.GetToken())['token'];
                            ss1.function='getWaybills'
                            ss1.ext = 'home_orders'
                            ss1.conditions={
                                uid:JSON.parse(j2aCls.GetToken())['did']
                            };
                            sendMsg(JSON.stringify(ss1));
                        }
                        break;
                    case 'loadddingWaybill'://装货
                        addToast("装货成功");
                        //数据清空
                        $('.load-time').val('');
                        $('#choose_img_load').find('img').attr('src','./images/home/add_img.png')
                        $('.load-goods-page').hide();
                        {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.weight = $('.load-weight').val()
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        //按钮切换
                        let elem=`<button class="load-btn btn-groups" id="unload-goods">卸货</button>`;
                        $('#unload-change').html(elem);
                        break;
                    case 'addUser'://注册用户
                        addToast('注册成功,即将跳转到登录页面...');
                        setTimeout(function(){
                            $('.register').hide();
                            $('.login').show();
                        },2000)
                        break;
                    case 'addCar'://添加车辆
                        addToast('车辆添加成功');
                        $('.all-page').hide();
                        $('.car-account-bank').css('display', 'block');
                        break;
                    case 'modifyCar'://车辆编辑
                        addToast('车辆修改成功');
                        $('.all-page').hide();
                        $('.home-car-carmanage').show();
                        break;
                    case 'modifyUser'://用户编辑
                        if($('#driver_certify').html()=='未认证'){
                            addToast('认证成功,即将跳转到车辆注册页面...');
                            setTimeout(() => {
                                $('.all-page').hide();
                                $('.home-car-carmanage').show();        
                            },1000) 
                        }else if($('#driver_certify').html()=='已认证'){
                            addToast('修改已保存');
                            $('.all-page').hide();
                            $('.weui-tab-edit').removeClass('page-hide');  
                        }
                        break;
                    case 'latestVehiclePosition'://获取定位
                        let a = parseFloat(data.message.lon/600000).toFixed(6);  //经度
                        let b = parseFloat(data.message.lat/600000).toFixed(6); //纬度
                        $('#current_pos').html(data.message.adr);
                        _init(b,a);
                        break;
                    case 'get_balance'://获取余额
                        if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                            $('#data_car-balance').html(parseFloat(data.message[0].totalAmount/100).toFixed(2));
                        }else{
                            if(data.message.length==3){
                                $('.home-goods-mine').css('display', 'none');
                                $('#bail').html(parseFloat(data.message[2].totalAmount/100).toFixed(2));
                                $('#freeze-bail').html(parseFloat(data.message[1].totalAmount/100).toFixed(2));
                                $('.goods-account-cash').css('display', 'block');
                            }
                        }
                        break;
                    case 'consignorRecharge'://货主充值
                        $('#finish-page').show();
                        break;
                    case 'vertify_code'://发送验证码
                        addToast('验证码发送成功')
                        break
                    case 'userinfo'://用户信息
                        if(data.ws_registered == '0'){
                            openBank()
                        }else if(data.ws_registered == '1'){
                            addToast('您已开通网银')
                            
                        }
                        break
                    case 'is_withdraw'://账户余额
                        if(data.result === 'success'){
                            $('#data_getbid').html(data.message.OrderNo)
                            $('#get-withdraw-cash').html(data.message.TotalAmount/100+'元')
                            $('#confirm-withdraw').show();
                        }else{
                            $('#withdraw').show();
                            return
                        }
                        break
                    case 'checkRegister'://网商注册
                        if(data.ws_registered == '0'){
                            addToast('网银开通成功')
                        }else if(data.ws_registered == '1'){
                            addToast('网银开通成功')
                        }
                        break
                    case 'home_source'://货源
                        // 存储分页数据
                        if($('.page-data').val()){
                            let {total,start} = JSON.parse($('.page-data').val())
                            $('.page-data').val(JSON.stringify({total,start:start+20}))
                        }else{
                            $('.page-data').val(JSON.stringify({total:data.total,start:20}))
                        }
                        sourcesRender(data,'load')
                        break
                    case 'home_cars'://车源
                        // 存储分页数据
                        if($('.car-page-data').val()){
                            let {total,start} = JSON.parse($('.car-page-data').val())
                            $('.car-page-data').val(JSON.stringify({total,start:start+50}))
                        }else{
                            $('.car-page-data').val(JSON.stringify({total:data.total,start:50}))
                        }
                        carsRender(data,'load')
                        break
                    case 'home_orders'://订单
                        {
                            let datas = dataFormat(data)
                            if(!datas.length){
                                $('.goods_order-group').eq(0).html(nullHtml);
                                $('#driver-orders').find('.order-group').eq(0).html(nullHtml);
                                $('#goods-unorder').html('0')
                                return;
                            }
                            $('#goods-unorder').html(datas.length)
                            let eleStr = '',driver_ele_str = ''
                            for(let item of datas){
                                let order_status=statusConver(item.status);
                                let menu='';
                                let cancel_menu='<button class="load-btn btn-groups" id="cancel-order" data-id='+item.id+' style="margin-right:5px;background-color:gray">取消运单</button>'
                                item.loadingValue=item.loadingValue?item.loadingValue:'0';
                                //装卸货
                                switch(item.status){
                                    case '1':
                                        menu='<button class="load-btn btn-groups" id="load-goods" data-id='+item.id+'>装货</button>';
                                        break;
                                    case '2':
                                        menu='<button class="load-btn btn-groups" id="unload-goods" data-id='+item.id+'>卸货</button>';
                                        break;
                                }
                                let type=unitConver(item.type);
                                
                                //装卸货地址转换
                                item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                                item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)
                                let ss = item.loadingValue
                                if(typeof item.loadingValue == 'undefined'){
                                    ss = 0
                                }
                                let ele=`  <div class="content common content-item consignor-details" data-id=${item.id} data-sid=${item.sid}  style="min-height:115px;height:auto;color:gray">
                                                        <div class="main-order-top" style="height:20px;display: flex">
                                                            <div style="flex:1;text-align: left">
                                                                运单号：<span class="order-transport-num">${item.sid}</span>
                                                            </div>
                                                            <div style="width:90px;text-align: right">
                                                                <span style="margin-right:15px;">${order_status}</span>
                                                                <input type="hidden" value=${item.id}>
                                                            </div>
                                                        </div>
                                                        <div style="height:20px;display: flex;">
                                                            <div style="flex:1;text-align: left">
                                                                司机：<span class="order-transport-num" style="vertical-align: middle">${item.driver}</span>
                                                            </div>
                                                            <div style="flex:1;text-align: right">
                                                                <span style="margin-right:15px;">车牌：${item.plate}</span>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <img src="images/cars_source/point_a.png" class="position-item">
                                                            <span>${item.loadingAddr}</span>
                                                        </div>
                                                        <div>
                                                            <img src="images/cars_source/point_b.png" class="position-item">
                                                            <span>${item.unloadingAddr}</span>
                                                        </div>
                                                        <div>
                                                        <div style="display: flex">
                                                            <div style="flex:1">
                                                                <span style="font-weight: bolder;color:black">${item.goods}</span>
                                                                <span style="padding-left: 20px;color:black">${item.unitPrice+type[0]}</span>
                                                            </div>
                                                            <div style="width:90px;color:black;text-align: right;margin-right:15px">
                                                                <span style="font-weight: bolder">${ss}吨</span>
                                                            </div>
                                                        </div>
                                                </div>`;

                                    let driver_ele='<div class="content car_orderdetails" data-id='+item.id+' data-role="part" data-sid='+item.sid+' style="height:140px;margin-top:10px;">\n' +
                                        '      <ul>\n' +
                                        '          <li style="border-bottom: 1px solid #eee;height:20px;color:gray">\n' +
                                        '                   <div class="" style="float: left">\n' +
                                        '                        订单号：<span class="order-transport-num"\n' +
                                        '                       >'+item.sid+'...</span>\n' +
                                        '                      </div>\n' +
                                        '                       <div class="" style="float: right">\n' +
                                        '                        <span style="margin-right:15px;">'+order_status+'</span>\n' +
                                        '                        </div>\n' +
                                        '           </li>\n' +
                                        '           <li style="color:gray;margin-left:-200px">\n' +
                                        '               <img src="images/cars_source/point_a.png" \n' +
                                        '               style="width:5px;height:5px;vertical-align: middle">\n' +
                                        '               <span>'+item.loadingAddr.substring(0,10)+'...'+'</span>\n' +
                                        '          </li>\n' +
                                        '          <li style="color:gray;margin-top: -10px;">\n' +
                                        '           <div style="float:left;color:gray">\n' +
                                        '           <img src="images/cars_source/point_b.png" \n' +
                                        '            style="width:5px;height:5px;vertical-align: middle">\n' +
                                        '          <span>'+item.unloadingAddr.substring(0,10)+'...'+'</span>\n' +
                                        '           </div>\n' +
                                        '            <div style="float:right ;margin-right: 15px;">\n' +
                                        '                  <span id="unload-change">'+cancel_menu+menu+'</span>   '+
                                        '             </div>\n' +
                                        '              <p style="clear:both"></p>\n' +
                                        '          </li>\n' +
                                        '         <li>\n' +
                                        '         <div style="display: flex">\n' +
                                        '           <div style="flex: 1;text-align:left">\n' +
                                        '               <span style="font-weight: bolder">'+item.goods+'</span>\n' +
                                        '               <span style="padding-left: 20px">'+item.unitPrice+type[0]+'</span>\n' +
                                        '           </div>\n' +
                                            '       <div style="width: 90px;text-align: right">\n' +
                                            '           <span class="load_weight">'+item.loadingValue+'</span><span style="margin-right:15px;">吨</span>\n' +
                                                ' </div>\n' +
                                        '         </li>\n' +
                                        '  </ul>\n' +
                                        '  </div>';
                                    eleStr += ele
                                    driver_ele_str += driver_ele
                            }
                            $('.goods_order-group').eq(0).html(eleStr);
                            $('#driver-orders').find('.order-group').eq(0).html(driver_ele_str);
                                //请求已完成订单
                                //请求车主完成订单
                            if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                            }else if(JSON.parse(j2aCls.GetToken())['role']=='consignor'){
                            }
                            current_tab_page=0;
                        }
                        break
                    case 'car_manage'://车辆管理
                        if(!data.rows.length){
                            $("#car-manage").html('');
                            $('#mine-car-manage').html('');
                            let btn=`<div id='add_car'>添加车辆</div> `;
                            $("#car-manage").append(btn);
                            $('#mine-car-manage').append(btn);
                            return;
                        }
                        $("#car-manage").html('')
                        $('#mine-car-manage').html('');
                        for(let item of data.rows){
                            let ele=`<div style="font-size:16px" class="weui-form-preview car-manage-item" data-id=${item.id}>
                                            <div class="weui-form-preview__bd">
                                                <div class="weui-form-preview__item">
                                                    <label class="weui-form-preview__label">车辆所有人</label>
                                                    <span class="weui-form-preview__value">${item.carOwner}</span>
                                                </div>
                                                <div class="weui-form-preview__item">
                                                    <label class="weui-form-preview__label">车辆载重</label>
                                                    <span class="weui-form-preview__value">${item.carWeight}吨</span>
                                                </div>
                                                <div class="weui-form-preview__item">
                                                    <label class="weui-form-preview__label">车牌号</label>
                                                    <span class="weui-form-preview__value">${item.plate}</span>
                                                </div>
                                                <div class="weui-form-preview__item">
                                                    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_default delete-car" data-id=${item.id}>删除</a>
                                                    <a href="javascript:" class="weui-btn weui-btn_mini weui-btn_default find-details">详情</a>
                                                </div>
                                            </div>
                                        </div>`;
                            $('#mine-car-manage').append(ele);
                            $("#car-manage").append(ele);
                        }
                        {
                            let btn=`<div id='add_car'>添加车辆</div> `;
                            $("#car-manage").append(btn);
                            $('#mine-car-manage').append(btn);
                        }
                        break
                    case 'load_more_sources'://加载更多货源
                        sourcesRender(data,'more')
                        break
                    case 'load_more_cars'://加载更多车源
                        carsRender(data,'more')
                        break
                    case 'filter_source'://筛选货源
                        sourcesRender(data,'filter')
                        break
                    case 'car_info'://车辆信息
                        if(!data.rows[0]){return;}
                        let car_data=data.rows[0];
                        $("#che_pai_hao").html(car_data.plate);
                        $('#che_liang_lei_xin').html(car_data.carModel);
                        $('#che_liang_zai_zhong').html(car_data.carTonnage);
                        break
                    case "user_info"://车辆认证信息
                        var info = data.rows[0];
                        $("#sji_form input[name='name']").val(info.name);
                        $("#sji_form input[name='phone']").val(info.phone);
                        $("#sji_form input[name='driveLicenseIssue']").val(info.driveLicenseIssue);
                        $("#sji_form input[name='driveLicense']").val(info.driveLicense);
                        $("#sji_form input[name='driveLicenseType']").val(info.driveLicenseType);
                        $("#sji_form input[name='driveLicenseValid']").val(info.driveLicenseValid);
                        $("#sji_form input[name='driveLicenseValidTo']").val(info.driveLicenseValidTo);
                        $("#sji_form input[name='driverCertificateNumber']").val(info.driverCertificateNumber);
                          $("#sji_form input[name='address']").val(info.address);
                        if( $("#sji_form input[name='driveLicense']").val()&&$("#sji_form input[name='driverCertificateNumber']").val()){
                            $('#driver_certify').html('已认证');
                        }
                        $("#sji_form input[name='driveLicensePic']").val(info.driveLicensePic);
                        $("#sji_form input[name='idPic_front']").val(info.idPic_front);
                        $("#sji_form input[name='idPic_back']").val(info.idPic_back);
                        $("#sji_form input[name='driveLicensePic']").val(info.driveLicensePic);
                        $("#sji_form input[name='driverCertificatePic']").val(info.driverCertificatePic);
                        $("#sji_form input[name='pid']").val(info.pid);
                        $("#sji_form #id_idPic_front").attr("src",getFileLink(info.idPic_front));
                        $("#sji_form #id_idPic_back").attr("src",getFileLink(info.idPic_back));
                        $("#sji_form #id_driveLicensePic").attr("src",getFileLink(info.driveLicensePic));
                        $("#sji_form #id_driverCertificatePic").attr("src",getFileLink(info.driverCertificatePic));
                        break
                    case 'car_fullorder'://司机已完成运单
                    $('#driver-orders').find('.order-group').html('');
                        $('.my_view').hide();
                        for(let item of data.rows){
                            let order_status=statusConver(item.status);
                            let unitarr=unitConver(item.type);
                         //装卸货地址转换
                            let  menu='<button class="load-btn btn-groups" id="get-cash-out" data-id='+item.id+'>收款</button>';
                            if(item.status=='3'||item.status=='4'){
                                menu='';
                            }
                            item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                            item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                                let driver_ele='<div class="content car_orderdetails" data-id='+item.id+'  data-role="full" data-sid='+item.sid+' style="height:140px;margin-top:10px;">\n' +
                                '      <ul>\n' +
                                '          <li style="border-bottom: 1px solid #eee;height:20px;color:gray">\n' +
                                '                   <div class="" style="float: left">\n' +
                                '                        订单号：<span class="order-transport-num"\n' +
                                '                       >'+item.sid+'...</span>\n' +
                                '                      </div>\n' +
                                '                       <div class="" style="float: right">\n' +
                                '                        <span style="margin-right:15px;">'+order_status+'</span>\n' +
                                '                        </div>\n' +
                                '           </li>\n' +
                                '           <li style="color:gray">\n' +
                                '               <img src="images/cars_source/point_a.png" \n' +
                                '               style="width:5px;height:5px;vertical-align: middle">\n' +
                                '               <span>'+item.loadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '          </li>\n' +
                                '          <li style="color:gray;margin-top: -10px;">\n' +
                                '           <div style="float:left;color:gray">\n' +
                                '           <img src="images/cars_source/point_b.png" \n' +
                                '            style="width:5px;height:5px;vertical-align: middle">\n' +
                                '          <span>'+item.unloadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '           </div>\n' +
                                '            <div style="float:right ;margin-right: 15px;">\n' +
                                '                  <span>'+menu+'</span>   '+
                                '             </div>\n' +
                                '              <p style="clear:both"></p>\n' +
                                '          </li>\n' +
                                '         <li>\n' +
                                    '         <div style="display: flex">\n' +
                                '           <div style="flex: 1">\n' +
                                '               <span style="font-weight: bolder">'+item.goods+'</span>\n' +
                                    '           <span style="padding-left: 20px">'+item.unitPrice+unitarr[0]+'</span>\n' +
                                '           </div>\n' +
                                    '       <div style="width:90px;text-align:right">\n' +
                                    '           <span style="padding-right: 15px;"><span>'+item.unloadingValue+'</span>'+unitarr[1]+'</span>\n' +
                                    '      </div>\n' +
                                '     </div>\n' +
                                    '         </li>\n' +
                                '  </ul>\n' +
                                '  </div>';
                                if(item.status=='3'||item.status=='4'){
                                $('#driver-orders').find('.order-group').eq(1).append(driver_ele);
                                }else if(item.status=='5'){
                                    $('#driver-orders').find('.order-group').eq(2).append(driver_ele);
                                }
                        }
                        break;
                    case 'goodsdetails'://货源单详情
                        const goodsdata=data.rows[0];
                         try {
                            if(Number(goodsdata.status) >= 3){
                                $('#loading-img').find('img').attr('src',getFileLink(goodsdata.pic_loading));
                                $('#unloading-img').find('img').attr('src',getFileLink(goodsdata.pic_unloading))
                            }else{
                                $('#loading-img').find('img').attr('src',getFileLink(goodsdata.pic_loadding));
                                $('#unloading-img').find('img').attr('src',getFileLink(goodsdata.pic_unloadding))
                            }
                        } catch (error) {
                            
                        }
                          //装卸货地址转换    
                        goodsdata.loadingAddr = getFormatAddress(goodsdata.loadingAddr,1)
                        goodsdata.unloadingAddr = getFormatAddress(goodsdata.unloadingAddr,2)
                        
                        $('#postition_latlng').val(goodsdata.latlng);
                        $('#data_goods-id').html(goodsdata.sid)
                        $("#gid").val(goodsdata.id);
                        $("#uid").val(goodsdata.uid);
                        $('#data_sender').html(goodsdata.sender);
                        $('#data_sender-phone').html(goodsdata.consignorPhone);
                        $("#data_start-pos").html(goodsdata.loadingAddr)
                        $("#data_end-pos").html(goodsdata.unloadingAddr)
                        $("#data_consignor").html(goodsdata.consignor)
                        $("#data_consignor-num").html(goodsdata.consignorPhone)
                        $("#data_reciver").html(goodsdata.receiver)
                        $("#data_reciver-num").html(goodsdata.receiverPhone)
                        $("#data_type").html(goodsdata.type)
                        let unit=unitConver(goodsdata.calculateType);
                        $('#data_remains').html('0')
                        $('#data_remains_weight').html('')
                        if(goodsdata.calculateType=='wholeCar'){
                            $('#data_remains').html(goodsdata.remains);
                        }
                        if(goodsdata.calculateType=='weight'){
                            $('#data_remains_weight').html(goodsdata.remains+'吨');
                        }
                        $("#data_car-num").html(goodsdata.assignNum)
                        $("#data_single-price").html(goodsdata.unitPrice+unit[0])
                        $("#data_weight").html(goodsdata.weight)
                        $("#data_desc").html(goodsdata.name)
                        $("#data_remark").html(goodsdata.remark)
                        break
                    case 'carsdetails'://司机订单详情
                        const dataarray=data.rows[0];
                        $('#data_waybill-ts').html('')
                        $('#data_waybill-td').html('')
                        try {
                            if(Number(dataarray.status) >= 3){
                                $('#loading-img').find('img').attr('src',getFileLink(dataarray.pic_loading));
                                $('#unloading-img').find('img').attr('src',getFileLink(dataarray.pic_unloading))
                            }else{
                                $('#loading-img').find('img').attr('src',getFileLink(dataarray.pic_loadding));
                                $('#unloading-img').find('img').attr('src',getFileLink(dataarray.pic_unloadding))
                            }
                        } catch (error) {
                            
                        }
                        $('#data_id').html(dataarray.sid);
						$('#data-billid').val(dataarray.id)
						$('#data-view-consignor').val(dataarray.consignor)
						$('#data-view-driver').val(dataarray.driver)
                        $('#data_waybill-driver').html(dataarray.driver);
                        $('#data_carplate').html(dataarray.plate);
                        //存储货主id用于评论
                        {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.goodsid = dataarray.gid
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        //装卸货地址转换
                        dataarray.loadingAddr = getFormatAddress(dataarray.loadingAddr,1)
                        dataarray.unloadingAddr = getFormatAddress(dataarray.unloadingAddr,2)

                        $('#data_loadingaddr').html(dataarray.loadingAddr);
                        $('#data_upload_addr').html(dataarray.unloadingAddr);
                        $('#data_order_consignor').html('');
                        $('#data_order_consignor').html(dataarray.sender);
                        $('#data_order_num').html(dataarray.consignorPhone);
                        $('#data_waybill-receiver').html(dataarray.receiver);
                        $('#data_waybill-rphone').html(dataarray.receiverPhone);
                        $('#data_waybill-good').html(dataarray.goods)
                        $('#data_waybill-price').html(dataarray.unitPrice+unitConver(dataarray.type)[0])
                        if(typeof dataarray.log != 'string'&&dataarray.log != null){
                            try {
                                $('#data_waybill-ts').html(formatDate(dataarray.log[1].ttag))
                                $('#data_waybill-td').html(formatDate(dataarray.log[2].ttag))
                            } catch (error) {}
                        }else{
                            try {
                                $('#data_waybill-ts').html(dataarray.log[1].ttag)
                                $('#data_waybill-td').html(dataarray.log[2].ttag)
                            } catch (error) {
                                
                            }
                        }
                        if(!dataarray.loadingValue||!dataarray.unitPrice){
                            $('#data_fee').html('0元');
                        }else{
                            let fee=parseFloat(dataarray.loadingValue)*parseFloat(dataarray.unitPrice);
                            if(dataarray.type=='rent'){
                                fee=dataarray.unitPrice
                            }
                            $('#data_fee').html(fee+'元');
                        }
                        if(dataarray.status=='3'||dataarray.status=='4'){
                            $('.my_view').show();
                        }
                        $('.load-btn').hide();
                        $('#thisid').val(dataarray.id);
                        if(dataarray.status==1){
                            $('#load-goods').show();
                        }else if(dataarray.status==2){
                            $('#unload-goods').show();
                        }
                        getUserStar(dataarray.uid)
                        //煤油
                        break;
                    case 'waybills'://货主订单页详情
                        let billdata=data.rows[0];
                        let obj=JSON.parse(billdata.log);
                        $("#data_id").html(obj[0].operator)
						$('#data-billid').val(billdata.id)
						$('#data-view-consignor').val(billdata.consignor)
						$('#data-view-driver').val(billdata.driver)
                        $("#data_carplate").html(billdata.carPlate)
                        //装卸货地址转换
                        billdata.loadingAddr = getFormatAddress(billdata.loadingAddr,1)
                        billdata.unloadingAddr = getFormatAddress(billdata.unloadingAddr,2)

                        $("#data_loadingaddr").html(billdata.loadingAddr)
                        $("#data_upload_addr").html(billdata.unloadingAddr)
                        $('#data_order_consignor').html('');
                        $("#data_order_consignor").html(billdata.sender)
                        $("#data_order_num").html(billdata.driverPhone)
                        if(!billdata.loadingValue||!billdata.unitPrice){
                            $('#data_fee').html('0元');
                        }else{
                            let fee=parseFloat(billdata.loadingValue)*parseFloat(billdata.unitPrice);
                            if(billdata.type=='rent'){
                                fee=billdata.unitPrice
                            }
                            $('#data_fee').html(fee+'元');
                        }
                        break
                    case "cardetails"://车辆详情
                        let cardata=data.rows[0];
                        //车牌号，车辆能源类型，车辆颜色
                        {
                            // 展示
                            // $('.edit_carModel').val(cardata.carModel)
                            // $('.edit_carEnergy').val(cardata.carEnergy)
                            // $('.edit_plateColor').val(cardata.plateColor)
                            //传值
                        }
                        //车辆类型
                        $('#data_carcapacity').html(cardata.carCapacity);
                        $("#carinfo_form input[name='driver_name']").val(cardata.driver_name);
                        $("#carinfo_form input[name='driver_phone']").val(cardata.driver_phone);
                        $("#carinfo_form input[name='plate']").val(cardata.plate);
                        $("#carinfo_form input[name='operation']").val(cardata.operation);
                        $("#carinfo_form input[name='carOwner']").val(cardata.carOwner);
                        $("#carinfo_form input[name='carIssue']").val(cardata.carIssue);
                        $("#carinfo_form input[name='carReg']").val(cardata.carReg);
                        $("#carinfo_form input[name='carIssueDate']").val(cardata.carIssueDate);
                        $("#carinfo_form input[name='carExpireDate']").val(cardata.carExpireDate);
                        $("#carinfo_form input[name='carRegPlace']").val(cardata.carRegPlace);
                        $("#carinfo_form input[name='carWeight']").val(cardata.carWeight);
                        $("#carinfo_form input[name='carLength']").val(cardata.carLength);
                        $("#carinfo_form input[name='roadLisence']").val(cardata.roadLisence);
                        $("#carinfo_form input[name='trailerPlate']").val(cardata.trailerPlate);
                        $("#carinfo_form input[name='carTonnage']").val(cardata.carTonnage);
                        $("#carinfo_form input[name='locationSrc']").val(cardata.locationSrc);
                        $("#carinfo_form input[name='lisencePic']").val(cardata.lisencePic);
                        $("#carinfo_form input[name='trailerLisencePic']").val(cardata.trailerLisencePic);
                        $("#carinfo_form input[name='transportLisencePic']").val(cardata.transportLisencePic);
                        $("#carinfo_form input[name='peopleAndCarPic']").val(cardata.peopleAndCarPic);
                        $("#carinfo_form input[name='uid']").val(cardata.id);
                        $("#carinfo_form #id_pic_xsz").attr("src",getFileLink(cardata.lisencePic));
                        $("#carinfo_form #id_pic_ysxkz").attr("src",getFileLink(cardata.transportLisencePic));
                        $("#carinfo_form #id_pic_rchz").attr("src",getFileLink(cardata.peopleAndCarPic));
                        $("#carinfo_form #id_pic_gcxsz").attr("src",getFileLink(cardata.trailerLisencePic));
                        break;
                    case "goodsowner"://发布货源货主选择
                        if(!data.rows.length){return}
                        //动态添加options
                        {
                            let users = data.rows[0]
                            var itm = '<option data-uid="' + users.id + '" value="' + users.id + '" >' + users.name + '</option>';
                            $("#find-consingor").html(itm);
                        }
                        break;
                    case "business-type"://业务类型
                        $("#business-type").empty();
                        if(!data.rows.length){return}
                        for (let i of data.rows) {
                            var itm = '<option data-uid="' + i.id + '" value="' + i.code+ '" >' + i.desp + '</option>';
                            $("#business-type").append(itm);
                        }
                        break;
                    case "normal-info"://常用信息
                        if(!data.rows.length){return;}
                        let addrs = ''
                        for(let item of data.rows){
                            let ele=`<div class="recive-cont"  style="height:auto;width:96%;margin:2px auto;border:1px solid #eee;border-radius:5px">
                                                <div >
                                                    <p style="padding-top:10px;">
                                                      <span>${item.contact}</span>
                                                      <span style="margin-left: 30px;">${item.phone}</span>
                                                  </p>
                                                  <p style="color:gray;margin-top:10px;">${item.address}</p>
                                              </div>
                                              <div class="addr-menu">
                                                  <div class="mine-body-receive" style="flex: 1;border:none">
                                                    <img src="./images/home/del.png" style="vertical-align: middle">
                                                    <span style="vertical-align: middle;margin-left: 5px;" class="address-del" data-id=${item.id}>删除</span>
                                                 </div>
                                                  <div style="flex: 1"></div>
                                              </div>
                                          </div>`;
                            addrs += ele
                        }
                        $(".recive-top").html(addrs);
                        addrs = null
                        break;
                    case 'grab-order'://抢单
                        if(data.rows.length==0){
                            addToast('请先添加车辆');
                            setTimeout(function(){
                                $('.all-page').hide();
                                $('.weui-tab-edit').addClass('page-hide');
                                $('.home-car-carmanage').show();
                            },1000)
                            return;
                        }
                        // 抢单
                        {
                            let carid=data.rows[0];
                            {
                                let store = JSON.parse(j2aCls.GetToken())
                                store.cid = carid.id
                                j2aCls.SetToken(JSON.stringify(store))
                            }
                            const catchorder={};
                            catchorder.token=JSON.parse(j2aCls.GetToken())['token'];
                            catchorder.function='catch';
                            catchorder.sid=JSON.parse(j2aCls.GetToken())['gid']
                            catchorder.uid=JSON.parse(j2aCls.GetToken())['did']
                            catchorder.cid=JSON.parse(j2aCls.GetToken())['cid']
                            catchorder.ext = 'grab_success';
                            sendMsg(JSON.stringify(catchorder))
                        }
                        break;
                    case 'myresources'://货主我的货源
                        {
                            let str = ''
                            if(!data.rows.length){
                                str = nullHtml
                            }
                            for(let item of data.rows){
                             //装卸货地址转换
                                item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                                item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)
                                item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                                item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)
                                let start_pos=null,end_pos=null;
                                start_pos=item.loadingAddr.substring(0,10);
                                end_pos=item.unloadingAddr.substring(0,10);
                                if(item.loadingAddr.length>10){
                                    start_pos+='...';
                                }
                                if(item.unloadingAddr.length>10){
                                    end_pos+='...';
                                }
                                let unitarr=unitConver(item.calculateType);
                                let frozen=` <button class="frozen-btn btn-groups" data-id=${item.id}>冻结</button>`;
                                if(item.status=='0'){
                                    frozen=` <button class="unfreeze-btn btn-groups-on" data-id=${item.id}>解冻</button>`
                                }
                                
                                let html = ` <div class="content content-item " data-uid=${item.id} style="height:140px;">
                                    <ul>
                                        <li style="border-bottom: 1px solid #eee;height:20px;color:gray">
                                            <div class="item_float_left">
                                                货源单号：<span class="order-transport-num" style="vertical-align: middle">${item.sid}</span>
                                            </div>
                                            <div class="item_float_right" >
                                                <span style="margin-right:15px;">运输中</span>
                                            </div>
                                        </li>
                                        <li style="color:gray">
                                            <img src="images/cars_source/point_a.png" class="position-item">
                                            <span>${start_pos}</span>
                                        </li>
                                        <li style="color:gray;margin-top: -10px;">
                                            <div class="item_float_left item_color_gray" >
                                                <img src="images/cars_source/point_b.png" class="position-item">
                                                <span>${end_pos}</span>
                                            </div>
                                            <div class="item_float_right" style="margin-right: 15px;">
                                                <span><button class="copy-btn btn-groups" data-id=${item.id}>复制</button></span>
                                                <span>${frozen}<span>
                                            </div>
                                            <p style="clear:both"></p>
                                        </li>
                                        <li>
                                            <div style="display: flex">
                                                <div style="flex:1">
                                                    <span style="font-weight: bolder">${item.name}</span>
                                                    <span style="padding-left: 20px">${item.unitPrice+unitarr[0]}</span>
                                                </div>
                                                <div style="width:140px;text-align: right;">
                                                    <span style="font-weight: bolder;margin-right: 15px">剩余:${Number(item.remains).toFixed(2)+unitarr[1]}</span>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>`;
                                if(!isNaN(item.remains) && Number(item.remains) > 0){
                                    str += html
                                }
                            }
                            $('#goods-myorder').find('.resource_item_group').eq(0).html(str);
                            $('#goods-myorder').find('.resource_item_group').eq(2).html(str);
                        }  
                        break;
                    case 'waybill'://订单
                        if(!data.message.rows.length){
                            $('#goods-order-group').find('.main-order-group').html('');
                            return
                        }
                        $('#goods-order-group').find('.main-order-group').html('');
                            for(let item of data.message.rows){
                                    //状态区分
                                 let status=statusConver(item.status);
                                 let unitarr=unitConver(item.type);
                                 
                            //装卸货地址转换
                            item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                            item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                                 item.loadingValue=item.loadingValue?item.loadingValue:'0';
                                    let ele=`  <div class="common waybills_style" data-id=${item.id} data-sid=${item.sid} data-status=${item.status}>
                                                <div class="main-order-top" style="height:20px;display: flex">
                                                    <div style="flex:1;text-align: left">
                                                        运单号：<span class="order-transport-num" >${item.sid}</span>
                                                    </div>
                                                    <div style="width:90px;text-align: right">
                                                        <span style="margin-right:15px;">${status}</span>
                                                    </div>
                                                </div>
                                                 <div style="height:20px;display: flex;">
                                                    <div style="flex:1;text-align: left">
                                                        司机：<span class="order-transport-num" style="vertical-align: middle">${item.driver}</span>
                                                    </div>
                                                    <div style="flex:1;text-align: right">
                                                        <span style="margin-right:15px;">车牌：${item.plate}</span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_a.png" class="position-item">
                                                    <span>${item.loadingAddr}</span>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_b.png" class="position-item">
                                                    <span>${item.unloadingAddr}</span>
                                                </div>
                                                <div style="display: flex">
                                                    <div style="flex:1">
                                                        <span style="font-weight: bolder;color:black">${item.goods}</span>
                                                        <span style="padding-left: 20px">${item.unitPrice+unitarr[0]}</span>
                                                    </div>
                                                    <div style="width:90px;color:black;text-align: right;margin-right:15px">
                                                        <span style="font-weight: bolder">${item.loadingValue+unitarr[1]}</span>
                                                    </div>
                                                </div>
                                        </div>`;
                                        $('#goods-order-group').find('.main-order-group').eq(0).append(ele)
                                        if(item.status=='1'){
                                            $('#goods-order-group').find('.main-order-group').eq(1).append(ele)
                                        }else if(item.status=='2') {
                                            $('#goods-order-group').find('.main-order-group').eq(2).append(ele)
                                        }
                                }
                                break;
                    case 'waybill_dt'://已完成运单
                        let undata = data.message.row
                        if(!undata.length){
                            addToast('暂无运单')
                            return
                        }
                        $('#goods-order-group').find('.main-order-group').eq(3).html('');
                        $('#goods-order-group').find('.main-order-group').eq(4).html('');
                        for(let item of undata){
                            //状态区分
                            let status1=statusConver(item.status);
                            let unitarr=unitConver(item.type);
                            item.loadingValue=item.loadingValue?item.loadingValue:'0';
                            
                         //装卸货地址转换
                       
                        item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                        item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                            let ele=`  <div class="common waybills_style" data-id=${item.id} data-sid=${item.sid} data-status=${item.status} data-role='full'>
                                             <div class="main-order-top" style="height:20px;display: flex">
                                                    <div style="flex:1;text-align: left">
                                                        运单号：<span class="order-transport-num" >${item.sid}</span>
                                                    </div>
                                                    <div style="width:90px;text-align: right">
                                                        <span style="margin-right:15px;">${status1}</span>
                                                    </div>
                                                </div>
                                                 <div style="height:20px;display: flex;">
                                                    <div style="flex:1;text-align: left">
                                                        司机：<span class="order-transport-num" style="vertical-align: middle">${item.driver}</span>
                                                    </div>
                                                    <div style="flex:1;text-align: right">
                                                        <span style="margin-right:15px;">车牌：${item.plate}</span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_a.png" class="position-item">
                                                    <span>${item.loadingAddr}</span>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_b.png" class="position-item">
                                                    <span>${item.unloadingAddr}</span>
                                                </div>
                                                <div style="display: flex">
                                                    <div style="flex:1">
                                                        <span style="font-weight: bolder;color:black">${item.goods}</span>
                                                        <span style="padding-left: 20px">${item.unitPrice+unitarr[0]}</span>
                                                    </div>
                                                    <div style="width:90px;color:black;text-align: right;margin-right:15px">
                                                        <span style="font-weight: bolder">${item.loadingValue+unitarr[1]}</span>
                                                    </div>
                                                </div>

                                        </div>`;
                            if(item.status=='3'||item.status=='4'){
                                $('#goods-order-group').find('.main-order-group').eq(3).append(ele)
                            }else if(item.status=='5') {
                                $('#goods-order-group').find('.main-order-group').eq(4).append(ele)
                            }
                        }
                        break;
                    case 'waybilldetails'://货主订单已完成
                        {
                            $('#data_waybill-ts').html('')
                            $('#data_waybill-td').html('')
                            $('.my_view').hide();
                            let datas = dataFormat(data)[0]
                            //存储司机id用于发布评论
                            {
                                let store = JSON.parse(j2aCls.GetToken())
                                store.driverid = datas.uid
                                j2aCls.SetToken(JSON.stringify(store))
                            }
                            $('.is-carhidden').hide();
                            if(datas.status=='1'||datas.status=='2'){
                                $('.is-carhidden').show();
                            }
                            $('#data_id').html(datas.sid);
                            $('#data-billid').val(datas.id)
                            $('#data-view-consignor').val(datas.consignor)
                            $('#data-view-driver').val(datas.driver)
                            $('#data_waybill-driver').html(datas.driver);
                            $('#data_carplate').html(datas.plate);
                            //装卸货地址转换
                            datas.loadingAddr = getFormatAddress(datas.loadingAddr,1)
                            datas.unloadingAddr = getFormatAddress(datas.unloadingAddr,2)
                            try {
                                if(Number(datas.status) >= 3){
                                    $('#loading-img').find('img').attr('src',getFileLink(datas.pic_loading));
                                    $('#unloading-img').find('img').attr('src',getFileLink(datas.pic_unloading))
                                }else{
                                    $('#loading-img').find('img').attr('src',getFileLink(datas.pic_loadding));
                                    $('#unloading-img').find('img').attr('src',getFileLink(datas.pic_unloadding))
                                }
                            } catch (error) {
                                
                            }
                            $('#data_loadingaddr').html(datas.loadingAddr);
                            $('#data_upload_addr').html(datas.unloadingAddr);
                            $('#data_order_consignor').html('');
                            $('#data_order_consignor').html(datas.sender);
                            $('#data_order_num').html(datas.consignorPhone);
                            $('#data_waybill-receiver').html(datas.receiver);
                            $('#data_waybill-rphone').html(datas.receiverPhone);
                            $('#data_waybill-good').html(datas.goods)
                            $('#data_waybill-price').html(datas.unitPrice+unitConver(datas.type)[0])
                            try {
                                if(typeof datas.log != 'string'&&datas.log != null){
                                    $('#data_waybill-ts').html(formatDate(datas.log[1].ttag))
                                    $('#data_waybill-td').html(formatDate(datas.log[2].ttag))
                                }else{
                                    $('#data_waybill-ts').html(datas.log[1].ttag)
                                    $('#data_waybill-td').html(datas.log[2].ttag)
                                }
                            } catch (error) {
                                
                            }
                            if(datas.status=='3'||datas.status=='4'){
                                $('.my_view').show();
                            }
                            if(!datas.loadingValue||!datas.unitPrice){
                                $('#data_fee').html('0元');
                            }else{
                                let fee=parseFloat(datas.loadingValue)*parseFloat(datas.unitPrice);
                                if(datas.type=='rent'){
                                    fee=datas.unitPrice
                                }
                                $('#data_fee').html(fee+'元');
                            }
                            getUserStar(datas.uid)
                        }
                        break;
                    case 'gorder_manage'://货主订单未完成
                        if(!data.rows.length){
                            $('.order-main-item').find('.item_group1').eq(0).html(nullHtml);
							$('#goods-unorder2').html('0')
                            return
                        }
                        let innerStr = ''
                        $('#goods-unorder2').html(data.rows.length)
                        for(let item of data.rows){
                                  //装卸货地址转换
                            item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                            item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                            let status=statusConver(item.status);
                            let unitarr=unitConver(item.type);
                            let ss = item.loadingValue
                            if(typeof item.loadingValue == 'undefined'){
                                ss = 0
                            }
                            let ele=`  <div class="main-order common" data-id=${item.id} data-sid=${item.sid} data-status=${item.status} style="color:gray">
                                    <div class="main-order-top" style="height:20px;display: flex">
                                            <div style="flex:1;text-align: left">
                                                运单号：<span class="order-transport-num" >${item.sid}</span>
                                            </div>
                                            <div style="width:90px;text-align: right">
                                                <span style="margin-right:15px;">${status}</span>
                                            </div>
                                        </div>
                                        <div style="height:20px;display: flex;">
                                            <div style="flex:1;text-align: left">
                                                司机：<span class="order-transport-num" style="vertical-align: middle">${item.driver}</span>
                                            </div>
                                            <div style="flex:1;text-align: right">
                                                <span style="margin-right:15px;">车牌：${item.plate}</span>
                                            </div>
                                        </div>
                                        <div>
                                            <img src="images/cars_source/point_a.png" class="position-item">
                                            <span>${item.loadingAddr}</span>
                                        </div>
                                        <div>
                                            <img src="images/cars_source/point_b.png" class="position-item">
                                            <span>${item.unloadingAddr}</span>
                                        </div>
                                        <div>
                                            <div class="content-top-left">
                                                <span style="font-weight: bolder;color:black">${item.goods}</span>
                                            </div>
                                            <div class="content-top-right">
                                                <span style="margin-right:15px;">${ss}吨</span>
                                            </div>
                                            <div class="content-top-center">
                                                <span>${item.unitPrice+unitarr[0]}</span>
                                            </div>
                                        </div>
                                </div>`;
                                innerStr += ele
                            }
                            $('.order-main-item').find('.item_group1').eq(0).html(innerStr);
                        break;
                    case 'goods_full'://货主订单已完成-内
                        let datase  = data.rows
                        if(!datase.length){
                            $('.order-main-item').find('.item_group1').eq(1).html('');
                            $('.order-main-item').find('.item_group1').eq(2).html('');
                            return
                        }
                        $('.order-main-item').find('.item_group1').eq(1).html('');
                        $('.order-main-item').find('.item_group1').eq(2).html('');
                        for(let item of datase){
                            //状态区分
                            let status=statusConver(item.status);
                            let unitarr=unitConver(item.type);
                            
                        //装卸货地址转换
                        item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                        item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                                    let ele=`  <div class="main-order common" data-role='full' data-id=${item.id} data-sid=${item.sid} data-status=${item.status} style="color:gray">
                                                <div class="main-order-top" style="height:30px;display: flex">
                                                    <div style="flex:1;text-align: left">
                                                        运单号：<span class="order-transport-num" >${item.sid}</span>
                                                    </div>
                                                    <div style="width:90px;text-align: right;">
                                                        <span style="margin-right:15px;">${status}</span>
                                                    </div>
                                                </div>
                                                 <div style="height:20px;display: flex;">
                                                    <div style="flex:1;text-align: left">
                                                        司机：<span class="order-transport-num" style="vertical-align: middle">${item.driver}</span>
                                                    </div>
                                                    <div style="flex:1;text-align: right">
                                                        <span style="margin-right:15px;">车牌：${item.plate}</span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_a.png" class="position-item">
                                                    <span>${item.loadingAddr}</span>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_b.png" class="position-item">
                                                    <span>${item.unloadingAddr}</span>
                                                </div>
                                                <div>
                                                    <div class="content-top-left">
                                                        <span style="font-weight: bolder;color:black">${item.goods}</span>
                                                    </div>
                                                    <div class="content-top-right">
                                                        <span style="margin-right:15px;">${item.loadingValue+unitarr[1]}</span>
                                                    </div>
                                                    <div class="content-top-center">
                                                        <span>${item.unitPrice+unitarr[0]}</span>
                                                    </div>
                                                </div>
                                        </div>`;
                                  if(item.status=='3'||item.status=='4'){
                                    $('.order-main-item').find('.item_group1').eq(2).append(ele);
                                  }else if(item.status=='5'){
                                    $('.order-main-item').find('.item_group1').eq(1).append(ele);
                                  }
                                }
                        break;
                    case 'payto_driver'://司机获取已完成单子
                        if(!data.rows.length){
                            $('#deliver-mine-body').html('');
							 $('#deliver-mine-body1').html('');
                            return
                        }
                        let total_fee=0;
                        $('#deliver-mine-body').html('');
						 $('#deliver-mine-body1').html('');
                        for(let item of data.rows){
							if(JSON.parse(j2aCls.GetToken())['filter']){
								let date = JSON.parse(JSON.parse(j2aCls.GetToken())['filter'])
								if(item.otag>=date.start && item.otag<=date.end){
                                    let ele=` <div class="main-body-title">
                                                <div>${item.sid}</div>
                                                <div>${item.amount}</div>
                                                <div>${formatDate(item.otag)}</div>
                                            </div>`;
                                    total_fee+=parseFloat(item.amount);
                                    $('#deliver-mine-body').append(ele);
                                    $('#deliver-mine-body1').append(ele);
								}
							}else{
                                let ele=` <div class="main-body-title">
                                            <div>${item.sid}</div>
                                            <div>${item.amount}</div>
                                            <div>${formatDate(item.otag)}</div>
                                        </div>`;
                                total_fee+=parseFloat(item.amount);
                                $('#deliver-mine-body').append(ele);
                                $('#deliver-mine-body1').append(ele);
							}
                        }
                        total_fee = total_fee.toFixed(2)
                        $('#data_total-fee').html(total_fee);
                         $('#data_total-fee1').html(total_fee);
                         {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.filter = ''
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        break;
					case 'resource_get'://数据统计
                        //货主-数据统计-获取历史货源单
                        let str0 = '',totalCar = 0,totalWeight = 0 ,fees = 0
						for(let item of data.rows){
							let ele=` <div class="main-body-title">
										  <div>${item.sid}</div>
										  <div>${item.name}</div>
										  <div>${item.weight}</div>
                                      </div>`;
                            str0 += ele;
                            totalWeight += parseFloat(item.weight)
                            if(item.calculateType == 'wholeCar'){
                                // totalCar++
                                fees += parseFloat(item.unitPrice)
                            }else{
                                fees += parseFloat(item.unitPrice)*parseFloat(item.weight)
                            }
                        }
                        // $('#amount-car').html(totalCar)
                        $('#amount-weight').html(totalWeight)
                        $('#amount-fee').html(fees)
                        $('.resource_put').html(str0)
						break;
                    case 'consignor_orderdetails'://订单详情
                        $('.my_view').hide();
                        $('.is-carhidden').hide();
                        let odata = null
                        if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
                            odata = data.rows[0]
                        }else{
                            if(JSON.parse(j2aCls.GetToken())['consignor'] =='no'){
                                odata = data.message.row[0]
                                {
                                    let store = JSON.parse(j2aCls.GetToken())
                                    store.consignor = 'dede'
                                    j2aCls.SetToken(JSON.stringify(store))
                                }
                            }else{
                                odata = data.message.rows[0]
                            }
                        }
                        if(JSON.parse(j2aCls.GetToken())['card']=='no'){
                            {
                                let store = JSON.parse(j2aCls.GetToken())
                                store.card = 'dede'
                                j2aCls.SetToken(JSON.stringify(store))
                            }
                            odata = data.rows[0]
                        }
                        if(JSON.parse(j2aCls.GetToken())['role']!='driver'){
                            if(odata.status=='1'||odata.status=='2'){
                                $('.is-carhidden').show();
                            }
                        }
                        //订单详情数据渲染。
                        $('#data_id').html(odata.sid);
						$('#data-billid').val(odata.id)
						$('#data-view-consignor').val(odata.consignor)
						$('#data-view-driver').val(odata.driver)
                        $('#data_waybill-driver').html(odata.driver);
                        $('#data_carplate').html(odata.plate);
                         //存储司机id用于发布评论
                         {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.driverid = odata.uid
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        //装卸货地址转换
                        odata.loadingAddr = getFormatAddress(odata.loadingAddr,1)
                        odata.unloadingAddr = getFormatAddress(odata.unloadingAddr,2)
                        try {
                            if(Number(odata.status) >= 3){
                                $('#loading-img').find('img').attr('src',getFileLink(odata.pic_loading));
                                $('#unloading-img').find('img').attr('src',getFileLink(odata.pic_unloading))
                            }else{
                                $('#loading-img').find('img').attr('src',getFileLink(odata.pic_loadding));
                                $('#unloading-img').find('img').attr('src',getFileLink(odata.pic_unloadding))
                            }
                        } catch (error) {
                            
                        }
                        $('#data_loadingaddr').html(odata.loadingAddr);
                        $('#data_upload_addr').html(odata.unloadingAddr);
                        $('#data_order_consignor').html('');
                        $('#data_order_consignor').html(odata.sender);
                        $('#data_order_num').html(odata.consignorPhone);
                        $('#data_waybill-receiver').html(odata.receiver);
                        $('#data_waybill-rphone').html(odata.receiverPhone);
                        $('#data_waybill-good').html(odata.goods)
                        $('#data_waybill-price').html(odata.unitPrice+unitConver(odata.type)[0])
                        $('#data_waybill-ts').html('')
                        $('#data_waybill-td').html('')
                        try {
                            if(typeof odata.log != 'string'&&odata.log != null){
                            $('#data_waybill-ts').html(formatDate(odata.log[1].ttag))
                            $('#data_waybill-td').html(formatDate(odata.log[2].ttag))
                        }else{
                            $('#data_waybill-ts').html(odata.log[1].ttag)
                            $('#data_waybill-td').html(odata.log[2].ttag)
                        }
                        } catch (error) {
                            
                        }
                        if(odata.status=='3'||odata.status=='4'){
                            $('.my_view').show();
                        }
                        if(!odata.loadingValue||!odata.unitPrice){
                            $('#data_fee').html('0元');
                        }else{
                            let fee=parseFloat(odata.loadingValue)*parseFloat(odata.unitPrice);
                            if(odata.type=='rent'){
                                fee=odata.unitPrice
                            }
                            $('#data_fee').html(fee+'元');
                        }
						getUserStar(odata.uid)
                        break;
                    case 'driver_resources'://货源大厅
                        $('.page_goods_filter').hide();
                        $('.home-car-resource').show();
                        if(!data.rows.length){
                            $("#resource-holl").html('<div style="width:100%;text-align:center">对不起，没有搜索到货源</div>');
                            return;
                        }
                        let strs = ''
                        for(let item of data.rows){
                            //装卸货地址转换
                            item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                            item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)
                            let start_pos=null,end_pos=null;
                            start_pos=item.loadingAddr.substring(0,10);
                            end_pos=item.unloadingAddr.substring(0,10);
                            if(item.loadingAddr.length>10){
                                start_pos+='...';
                            }
                            if(item.unloadingAddr.length>10){
                                end_pos+='...';
                            }
                            let unitarr=unitConver(item.calculateType);
                            let ele=`<div class="content content-item"  data-uid=${item.id} style="height:120px;">
                                                            <ul>
                                                                <li style="color:gray">
                                                                    <img class="position-item" src="images/cars_source/point_a.png">
                                                                    <span>${start_pos}</span>
                                                                </li>
                                                                <li style="color:gray;margin-top:-15px;">
                                                                    <img src="images/cars_source/point_b.png" class="position-item">
                                                                    <span>${end_pos}</span>
                                                                </li>
                                                                <li style="margin-top:-5px;">
                                                                    <strong style="font-weight: bolder;">${item.name}</strong>
                                                                    <span style="margin-left: 25px;">货主:${item.consignor}</span>
                                                                </li>
                                                            </ul>
                                                            <div class="content-item-right" style="display:flex;flex-direction: column;text-align:right">
                                                                    <div style="font-size:16px;margin-top:8px">可抢单</div>
                                                                    <div style="font-weight: bolder;font-size:16px;margin-top:5px">${Number(item.remains).toFixed(2)+'&nbsp;'+ unitarr[1]}</div>
                                                                    <div  style="margin-top:8px"><a href="javascript:" class="weui-btn weui-btn_primary take_order_btn ttt" data-gid=${item.id}>抢单</a></div>
                                                            </div>
                                                            <div class="line-style"><span>线路:&nbsp;&nbsp;&nbsp;&nbsp;<span>${item.remark}</div>
                                                            </div>`;
                            if(item.status&&item.status=='0'){
                            }else{
                                if(Number(item.remains) > 0){
                                    strs += ele
                                }
                            }
                        }
                        if(!strs){
                            $("#resource-holl").html(nullHtml);
                            return
                        }
                        $("#resource-holl").html(strs);
                        break;
                    case 'driver_orders'://订单管理
                        if(!data.rows.length){
                            $('.car-main-item').find('.car_item_group').eq(0).html('<div style="width:100%;color:gray">暂无数据</div>');
                            $('#unfulled').html('0');
                            return;
                        }
                        $('.car-main-item').find('.car_item_group').eq(0).html('');
                        for(let item of data.rows){
                            let order_status=statusConver(item.status);
                            let menu='',units=unitConver(item.type);
                            item.loadingValue=item.loadingValue?item.loadingValue:'0';
                            let cancelBill = '<button class="load-btn btn-groups" id="cancel-order" style="margin-right:5px;background-color:gray" data-id='+item.id+'>取消运单</button>'
                            //订单状态
                            switch(item.status){
                                case '1':
                                    menu='<button class="load-btn btn-groups" id="load-goods">装货</button>';
                                    break;
                                case '2':
                                    menu='<button class="load-btn btn-groups" id="unload-goods">卸货</button>';
                                    break;
                            }
                            
                            //装卸货地址转换
                            item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                            item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                            let unitarr=unitConver(item.type);
                                let driver_ele='<div class="content content-item car-unfull"  data-sid='+item.sid+' style="height:140px;">\n' +
                                '      <ul>\n' +
                                '          <li style="border-bottom: 1px solid #eee;height:20px;color:gray">\n' +
                                '                   <div class="" style="float: left">\n' +
                                '                        订单号：<span class="order-transport-num"\n' +
                                '                       >'+item.sid+'...</span>\n' +
                                '                      </div>\n' +
                                '                       <div class="" style="float: right">\n' +
                                '                        <span style="margin-right:15px;">'+order_status+'</span>\n' +
                                '                        </div>\n' +
                                '           </li>\n' +
                                '           <li style="color:gray">\n' +
                                '               <img src="images/cars_source/point_a.png" \n' +
                                '               style="width:5px;height:5px;vertical-align: middle">\n' +
                                '               <span>'+item.loadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '          </li>\n' +
                                '          <li style="color:gray;margin-top: -10px;">\n' +
                                '           <div style="float:left;color:gray">\n' +
                                '           <img src="images/cars_source/point_b.png" \n' +
                                '            style="width:5px;height:5px;vertical-align: middle">\n' +
                                '          <span>'+item.unloadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '           </div>\n' +
                                '            <div style="float:right ;margin-right: 15px;">\n' +
                                '                  <span id="unload-change">'+cancelBill+menu+'</span>   '+
                                '                  <input type="hidden" id="thisid" value='+item.id+'>'+
                                '             </div>\n' +
                                '              <p style="clear:both"></p>\n' +
                                '          </li>\n' +
                                '         <li>\n' +
                                    '       <div style="display: flex">' +
                                '             <div style="flex: 1">\n' +
                                '               <span style="font-weight: bolder">'+item.goods+'</span>\n' +
                                    '               <span style="padding-left: 20px">'+item.unitPrice+unitarr[0]+'</span>\n' +
                                '             </div>\n' +
                                '             <div style="width:90px;text-align: right">\n' +
                                '               <span class="load_weight">'+item.loadingValue+'</span><span style="margin-right:15px;"><span>吨</span></span>\n' +
                                '             </div>\n' +
                                '           </div>\n' +
                                    '         </li>' +
                                '  </ul>\n' +
                                '  </div>';
                                if(item.status=='3'){
                                    $('.car-main-item').find('.car_item_group').eq(2).append(driver_ele);
                                }else if(item.status=='4'){
                                    $('.car-main-item').find('.car_item_group').eq(1).append(driver_ele);
                                }else{
                                    $('.car-main-item').find('.car_item_group').eq(0).append(driver_ele);
                                    $('#unfulled').html('1');
                                }
                        }
                        break;
                    case 'order_full'://车主订单管理
                        if(!data.rows.length){
                            $('.car-main-item .car_item_group').eq(1).html(nullHtml);
                            $('.car-main-item .car_item_group').eq(2).html(nullHtml);
                            return;
                        }
                        $('.my_view').hide();
                        let outterStr = '',outterStr1 = ''
                        for(let item of data.rows){
                            let order_status=statusConver(item.status);
                            let unitarr=unitConver(item.type);
                            
                        //装卸货地址转换
                        item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                        item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                        let  menu='<button class="load-btn btn-groups" id="get-cash-out" data-id='+item.id+'>收款</button>';
                        if(item.status == '3' || item.status == '4'){
                            menu = ''
                        }
                                let driver_ele='<div class="content content-item car_details" data-id='+item.id+' data-sid='+item.sid+' style="height:140px;">\n' +
                                '      <ul>\n' +
                                '          <li style="border-bottom: 1px solid #eee;height:20px;color:gray">\n' +
                                '                   <div class="" style="float: left">\n' +
                                '                        订单号：<span class="order-transport-num"\n' +
                                '                        >'+item.sid+'...</span>\n' +
                                '                      </div>\n' +
                                '                       <div class="" style="float: right">\n' +
                                '                        <span style="margin-right:15px;">'+order_status+'</span>\n' +
                                '                        </div>\n' +
                                '           </li>\n' +
                                '           <li style="color:gray">\n' +
                                '               <img src="images/cars_source/point_a.png" \n' +
                                '               style="width:5px;height:5px;vertical-align: middle">\n' +
                                '               <span>'+item.loadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '          </li>\n' +
                                '          <li style="color:gray;margin-top: -10px;">\n' +
                                '           <div style="float:left;color:gray">\n' +
                                '           <img src="images/cars_source/point_b.png" \n' +
                                '            style="width:5px;height:5px;vertical-align: middle">\n' +
                                '          <span>'+item.unloadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '           </div>\n' +
                                '            <div style="float:right ;margin-right: 15px;">\n' +
                                '                  <span>'+menu+'</span>   '+
                                '                  <input type="hidden" id="thisid" value='+item.id+'>'+
                                '             </div>\n' +
                                '              <p style="clear:both"></p>\n' +
                                '          </li>\n' +
                                '         <li>\n' +
                                    '       <div style="display: flex">' +
                                    '           <div style="flex: 1">\n' +
                                    '               <span style="font-weight: bolder">'+item.goods+'</span>\n' +
                                        '           <span style="padding-left: 20px">'+item.unitPrice+'</span>'+unitarr[0]+'\n' +
                                    '           </div>\n' +
                                    '           <div style="width:90px;text-align: right">\n' +
                                    '               <span style="margin-right:15px;">'+item.unloadingValue+unitarr[1]+'</span>\n' +
                                    '           </div>\n' +
                                '            </div>' +
                                    '       </li>' +
                                '  </ul>\n' +
                                '  </div>';
                                if(item.status=='3'||item.status=='4'){
                                    outterStr += driver_ele
                                }else if(item.status=='5'){
                                    outterStr1 += driver_ele
                                }
                        }
                        if(!outterStr1)outterStr1 = nullHtml
                        if(!outterStr)outterStr = nullHtml
                        $('.car-main-item').find('.car_item_group').eq(2).html(outterStr);
                        $('.car-main-item').find('.car_item_group').eq(1).append(outterStr1);
                        break;
                    case 'grab_success'://抢单成功
                        addToast('抢单成功');
                        $('#unfull').html('1')
                        //抢单成功则注销状态
                        {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.status = ''
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        //再次请求数据
                        const objs={};
                        objs.token=JSON.parse(j2aCls.GetToken())['token'];
                        objs.function='getWaybills';
                        objs.conditions={
                            uid:JSON.parse(j2aCls.GetToken())['did']
                        }
                        objs.ext='driver_orders';
                        sendMsg(JSON.stringify(objs))
                        $('.all-page').hide();
                        $('.weui-tab-edit').addClass('page-hide');
                        $('.home-car-ordermanage').show();
                        break;
                    case 'getcartype'://获取车辆类型
                            cur_type=0;
                           $('#get_type').html('');
                            for(let item of data.rows){
                                let ele=`<div data-val=${item.code} style="height:30px;line-height:30px;">${item.desp}</div>`;
                                if(!$('#get_type').html()){
                                    ele=`<div class='choose-on' data-val=${item.code} style="height:30px;line-height:30px;">${item.desp}</div>`;
                                }
                                $('#get_type').append(ele);
                            }
                            $('#single_page').show();
                            ;
                            break;
                    case 'getcarcolor'://获取颜色类型
                            cur_type=1;
                            $('#get_type').html('');
                            for(let item of data.rows){
                                let ele=`<div data-val=${item.code} style="height:30px;line-height:30px;">${item.desp}</div>`;
                                if(!$('#get_type').html()){
                                    ele=`<div class='choose-on' data-val=${item.code} style="height:30px;line-height:30px;">${item.desp}</div>`;
                                }
                                $('#get_type').append(ele);
                            }
                            $('#single_page').show();
                            ;
                        break;
                    case 'getcarenergy'://获取能源类型
                            cur_type=2;
                            $('#get_type').html('');
                            for(let item of data.rows){
                                let ele=`<div data-val=${item.code} style="height:30px;line-height:30px;">${item.desp}</div>`;
                                if(!$('#get_type').html()){
                                    ele=`<div class='choose-on' data-val=${item.code} style="height:30px;line-height:30px;">${item.desp}</div>`;
                                }
                                $('#get_type').append(ele);
                            }
                            $('#single_page').show();
                        ;
                        break;
                    case 'bankadd'://添加银行卡
                        addToast('银行卡添加成功');
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide');
                        ;
                        break;
                    case 'carbankinfo'://银行卡信息
                        if(!data.rows.length){
                            $('#car-bank').html('');
                            return;
                        }
                        $('#car-bank').html('');
                        for(let item of data.rows){
                            let ele=` <div class="bankcard-item" data-sid=${item.sid}>
                                        <div style="width:100%;height:30px;padding-left: 10px;padding-top: 10px;font-size: 16px;">
                                            <div style="float: left;" id='data_banker'>${item.bank}</div>
                                        </div>
                                        <div style="width:100%;height:30px;padding-left: 10px;">
                                            <div style="float: left" id='data_bankowner'>${item.name}</div>
                                            <!-- <div style="float: right;padding-right:15px;" id=bank_banktype>----</div> -->
                                        </div>
                                        <div style="float: right;padding-right:15px;font-size:25px" id='data_bankcard'>... ... ... ... ${item.card.substring(item.card.length-4)}</div>
                                    </div>`;
                            $('#car-bank').append(ele);
                        }
                        ;
                        break;
                    case 'goodsbankinfo'://银行卡信息
                        if(!data.rows.length){
                            $('#goods-bank').html(nullHtml);
                            return;
                        }
                        $('#goods-bank').html('');
                        for(let item of data.rows){
                            let ele=` <div class="bankcard-item" data-sid=${item.sid}>
                                        <div style="width:100%;height:30px;padding-left: 10px;padding-top: 10px;font-size: 16px;">
                                            <div style="float: left;" id='data_banker'>${item.bank}</div>
                                        </div>
                                        <div style="width:100%;height:30px;padding-left: 10px;">
                                            <div style="float: left" id='data_bankowner'>${item.name}</div>
                                            <!-- <div style="float: right;padding-right:15px;" id=bank_banktype>----</div> -->
                                        </div>
                                        <div style="float: right;padding-right:15px;font-size:25px" id='data_bankcard'>... ... ... ... ${item.card.substring(item.card.length-4)}</div>
                                    </div>`;
                            $('#goods-bank').append(ele);
                        }
                        ;
                        break;
                    case 'car_bank_info'://银行卡信息
                        $('#data_bank').html(data.rows[0].bank)
                        $('#data_bank-card').html(data.rows[0].card)
                        $('#data_ownername').html(data.rows[0].name)
                        $('#data_phone').html(data.rows[0].mobile)
                        $('#data_alipay').html(data.rows[0].alipayId)
                        $('#data_bank-id').val(data.rows[0].id)
                        $('.car-bank-detail').show();
                        ;
                        break;
                    case 'goods_bank_info'://银行卡信息
                        $('#data_goods_bank').html(data.rows[0].bank)
                        $('#data_gbank-card').html(data.rows[0].card)
                        $('#data_goods_ownername').html(data.rows[0].name)
                        $('#data_goods_phone').html(data.rows[0].mobile)
                        $('#data_goods_alipay').html(data.rows[0].alipayId)
                        $('#data_gbank-id').val(data.rows[0].id)
                        $('.goods-bank-detail').show();
                        ;
                        break;
                    case 'bank_del'://删除银行卡
                        $('.all-page').hide();
                        $('.home-car-mine').show();
                        addToast('银行卡删除成功');
                        ;
                        break;
                    case 'goods_bank_del'://删除银行卡
                        $('.all-page').hide();
                        $('.home-goods-mine').show();
                        addToast('银行卡删除成功');
                        ;
                        break;
                    case 'goodslist'://货源列表
                        let listObj=data.rows[0];
                        //装卸货地址转换
                        listObj.loadingAddr = getFormatAddress(listObj.loadingAddr,1)
                        listObj.unloadingAddr = getFormatAddress(listObj.unloadingAddr,2)

                        $('#data_goods-start').html(listObj.loadingAddr);
                        $('#data_rid').val(listObj.id);
                        $('#data_goods-end').html(listObj.unloadingAddr);
                        $('#data_goods-type').html(listObj.type);
                        let unitarr=unitConver(listObj.type);
                        switch(listObj.type){
                            case 'weight':
                                break;
                            case 'rent':
                                $('#data_need-car').html(listObj.weight);
                                $('#data_un-car').html(listObj.remains);
                                break;
                            case 'cubic':
                                break;
                        }
                        $('#data_goods-unitprice').html(listObj.unitPrice+unitarr[0]);
                        // 总重，已接吨位和可接吨位
                        $('#data_goods-weight').html(listObj.weight);
                        $('#data_goods-unfinished').html(listObj.remains+'吨')
                        let isFinished = parseFloat((Number(listObj.weight)-Number(listObj.remains)).toFixed(10))
                        if(isFinished < 0){
                            isFinished = 0
                        }
                        $('#data_goods-finished').html(isFinished+'吨')
                        // end
                        $('#data_goods-desp').html(listObj.remark);
                        {
                            const getbill={};
                            getbill.token=JSON.parse(j2aCls.GetToken())['token'];
                            getbill.function='fr_gc_waybills';
                            getbill.rsn = listObj.sid
                            getbill.category = 'CXC'
                            getbill.ext = 'waybill'
                            sendMsg(JSON.stringify(getbill))
                        }
                        break;
                    case 'copy_data'://复制货源单
                        let copydata=data.rows[0];
                        if(data.rows.length){
                            addToast('复制失败')
                        }
                        addToast('复制成功');
                        $('#data_goodstype').val(copydata.type);
                        $('#data_goodsname').val(copydata.name);
                        $('#data_goodsw').val(copydata.weight);
                        $('#unitprice').val(copydata.unitPrice);
                        $('#total-price').val(copydata.totalPrice);
                        $('#data_sendername').val(copydata.sender);
                        $('#data_sphone').val(copydata.consignorPhone);
                        $('#data_rname').val(copydata.receiver);
                        $('#data_rphone').val(copydata.receiverPhone);
                        $('#data_rpid').val(copydata.receiverId);
                        $('#data_mark').val(copydata.remark);
                        //地址
                        $('#start_postition_content_1').val(JSON.stringify(copydata.loadingAddr));
                        $('#end_postition_content_1').val(JSON.stringify(copydata.unloadingAddr));
                        //装卸货地址转换
                        copydata.loadingAddr = getFormatAddress(copydata.loadingAddr,1)
                        copydata.unloadingAddr = getFormatAddress(copydata.unloadingAddr,2)

                        $('#start_postition_content').val(copydata.loadingAddr);
                        $('#end_postition_content').val(copydata.unloadingAddr);
                        $('#distance').val(copydata.kilos);
                        $('#total_latlng').val(JSON.stringify(copydata.latlng));
                        //获取业务信息
                        {
                            let cons= {};
                            cons.token = JSON.parse(j2aCls.GetToken())['token'];
                            cons.function = "getBusinessType";
                            cons.ext = 'business-type';
                            sendMsg(JSON.stringify(cons));
                            setTimeout(()=>{
                                $('.details-group').hide();
                                $('.home-goods-release').show();
                            },1000)
                        }
                        //获取货主
                        {
                            let obj1={};
                            obj1.token = JSON.parse(j2aCls.GetToken())['token'];
                            if(JSON.parse(j2aCls.GetToken())['uid']){
                            obj1.conditions={
                                id:JSON.parse(j2aCls.GetToken())['uid'],
                                }
                            }
                            obj1.function = "getUsers";
                            obj1.ext = 'goodsowner';
                            sendMsg(JSON.stringify(obj1));
                        }
                        break;
                    case 'frozen'://冻结货源
                        addToast('货源单已被冻结')
                        ;
                        break;
                    case 'unfreeze'://解冻
                        addToast('货源单已解冻')
                        ;
                        break;
                    case 'getbankcard'://获取银行卡
                        if(!data.rows.length){
							addToast('暂无银行卡,请前往添加...')
							setTimeout(() => {
								$('.all-page').hide()
								$('.car-account-bank').css('display', 'block');
							},2000)
                        }else{
                            //确认是否有提现
                            
                            let bankdata=data.rows[0];
                            let bank=bankdata.bank.substring(0,bankdata.bank.indexOf('行')+1);
                            let card=bankdata.card.substring(bankdata.card.length-4);
                            $('#data_getbank').html(bank+'('+card+')');
                            $('#bank-account').html(bankdata.name);
                            $('#bank-out').html(bank);
                            $('#bank-card').html(bankdata.card);
                            let obj={};
                            obj.token=JSON.parse(j2aCls.GetToken())['token'];
                            obj.function='getWithdraws';
                            obj.category='WS';
                            obj.uid = JSON.parse(j2aCls.GetToken())['did']
                            obj.ext = 'is_withdraw'
                            sendMsg(JSON.stringify(obj))
                        }
                        break;
                    case 'withdraw_success'://提现成功
                        addToast('您已发起提现,预计两小时内到账');
                        break;
                    case 'goods_info'://货主信息
                        if(!data.balance){
							$('#goods-balance').html('0.00')
						}else{
                            try {
                                let cash = data.balance
							    $('#goods-balance').html(parseFloat(cash.avaliable).toFixed(2));
                            } catch (error) {
                                $('#goods-balance').html('0.00')
                            }
						}
                        break;		
                    case 'p_view'://评价
                        if(typeof data.message == 'undefined'){
                            addToast('评价成功')
                        }else{
                            addToast(data.message)
                        }
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide');
                        ;
                        break;
					case 'view_del'://评论删除
						addToast('评论删除成功')
                        $(location).attr('href','index.html?'+new Date().getTime())
                        window.location.reload()
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide');
                        $('#home-index-tab').click()
						break;
                    case 'receive_payment'://收款成功
                        addToast('收款成功');
                        ;
                        break;
                    case 'cancel_bill'://取消运单
                        addToast('运单已取消')
                        $(location).attr('href', 'index.html?'+new Date().getTime());
                        window.location.reload()
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide');
                        $('#home-index-tab').click()
                        break;
					case 'driver_view'://司机评价
						if(data.rows.length<=0){
							return
						}else{
							$('.get-views').html('')
							for(let item of data.rows){
								let html = `<div class="record-item view-groups">
													<div style="width:100%;height:20px">
														<div style="float:left;font-size:16px">运单号:${item.sid}</div>
														<div style="float:right;color:gray;margin-right:10px">货主:${item.consignor}</div>
													</div>
													<div class="weui-flex" style="height:20px;margin:0">
													    <div class="weui-flex__item"><div class="placeholder">${item.comment}</div></div>
													    <div class="weui-flex__item" style="text-align:right;margin-right:10px"><div class="placeholder">${getStar(item.points)}</div></div>
													</div>
													<p style="margin-top:10px;font-size:12px"><span style="color:gray">${formatDate(item.ttag)}</span></p>
												</div>`
								if(JSON.parse(j2aCls.GetToken())['did'] == item.toid){
									$('.get-views').append(html)
								}
							}
						}
						
						break
					case 'driver_get_view'://司机获取评价
						if(data.rows.length<=0){
							return
						}else{
							$('.set-views').html('')
							for(let item of data.rows){
								let html = `<div class="record-item" style="height:80px;border-bottom:3px solid #eee;color:black;font-size:14px;text-indent:10px">
													<div style="height:20px;display:flex">
														<div style="flex:1">运单号：${item.sid}</div>
														<div style="width:120px;text-align:right;margin-right:10px">货主：${item.consignor}</div>
													</div>
													<p style="font-size:16px"><span>${item.comment}</span><span></span></p>
													<div style="height:20px;display:flex;margin-top:10px">
														<div style="flex:1;font-size:12px;color:gray;">${formatDate(item.ttag)}</div>
														<div style="flex:1;text-align:right;margin-right:20px;"><span class="del-view" style="fomt-size:16px;" data-bid=${item.bid} data-uid=${item.uid}>删除</span></div>
													</div>
												</div>`
								$('.set-views').append(html)
							}
						}
						
						break
					case 'consignor_view'://货主评价
						if(data.rows.length<=0){
							$('.goods-get-views').html('')
							return
						}else{
							$('.goods-get-views').html('')
							for(let item of data.rows){
								let html = `<div class="record-item view-groups">
													<div style="width:100%;height:auto">
														<div style="float:left;font-size:16px">运单号:${item.sid}</div>
														<div style="float:right;color:gray;margin-right:10px">司机:${item.driver}</div>
													</div>
													<div class="weui-flex" style="height:20px;margin:0">
													    <div class="weui-flex__item"><div class="placeholder">${item.comment}</div></div>
													    <div class="weui-flex__item" style="text-align:right;margin-right:10px"><div class="placeholder">${getStar(item.points)}</div></div>
													</div>
													<p style="margin-top:10px;font-size:12px"><span style="color:gray">${formatDate(item.ttag)}</span></p>
												</div>`
								if(JSON.parse(j2aCls.GetToken())['uid'] == item.toid){
										$('.goods-get-views').append(html)
								}
							}
						}
						
						break
					case 'consignor_get_view'://货主获取评价
						if(data.rows.length<=0){
							return
						}else{
							$('.goods-set-views').html('')
							for(let item of data.rows){
								let html = `<div class="record-item" style="height:auto;border-bottom:3px solid #eee;color:black;font-size:14px;text-indent:10px">
													<div style="height:20px;display:flex">
														<div style="flex:1">运单号：${item.sid}</div>
														<div style="width:120px;text-align:right;margin-right:10px">司机：${item.driver}</div>
													</div>
													<p style="font-size:16px"><span>${item.comment}</span><span></span></p>
													<div style="height:20px;display:flex;margin-top:10px">
														<div style="flex:1;font-size:12px;color:gray;">${formatDate(item.ttag)}</div>
														<div style="flex:1;text-align:right;margin-right:20px;"><span class="del-view" style="fomt-size:16px;" data-bid=${item.bid}>删除</span></div>
													</div>
												</div>`
								$('.goods-set-views').append(html)
							}
						}
						
						break
					case 'sys_problem'://反馈
						addToast('反馈成功')
                        $(location).attr('href', 'index.html?'+new Date().getTime());
                        window.location.reload()
                        $('.all-page').hide();
                        $('.weui-tab-edit').removeClass('page-hide');
                        $('#home-index-tab').click()
						break;
                    case 'sys_msg'://系统消息
                        $('#message-sys').empty()
                        for(let item of data.rows){
                            if(item.push_status){
                                
                                    let html = `<div class="msg-item">
                                                    <div class="weui-flex message-groups">
                                                        <div class="weui-flex__item" ><div class="placeholder">系统通知</div></div>
                                                        <div class="weui-flex__item" style="text-align:right;margin-right:10px">
                                                            <div class="placeholder">
                                                                ${formatDate(item.update_time)}<img src="images/home/open.png" style="width:25px;height:25px;vertical-align:middle;">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="msg-content">${item.push_content}</div>
                                                </div>`
                                $('#message-sys').append(html)
                            }
                        }
                        //消息获取
                        {
                            let msg = {}
                            msg.token = JSON.parse(j2aCls.GetToken())['token']
                            msg.function = 'complaints_lie_biao'
                            msg.category = 'PL'
                            msg.users_id = JSON.parse(j2aCls.GetToken())['did']
                            msg.ext = 'msg_back'
                            sendMsg(JSON.stringify(msg))    
                        }
                        break;
					case 'msg_back'://x回复通知
						$('#message-top').empty()
						for(let item of data.rows){
							if(item.reply){
								
									let html = `<div class="msg-item">
													<div class="weui-flex message-groups">
														<div class="weui-flex__item" ><div class="placeholder">回复通知</div></div>
														<div class="weui-flex__item" style="text-align:right;margin-right:10px">
															<div class="placeholder">
																${formatDate(item.reply_time)}<img src="images/home/open.png" style="width:25px;height:25px;vertical-align:middle;">
															</div>
														</div>
													</div>
													<div class="msg-content">${item.reply}</div>
												</div>`
								$('#message-top').append(html)
							}
						}
						
						break
                    case 'goods_sys_msg'://货主系统消息
                         $('#goods-message-sys').empty()
                        for(let item of data.rows){
                            if(item.push_status){
                                
                                    let html = `<div class="msg-item">
                                                    <div class="weui-flex message-groups">
                                                        <div class="weui-flex__item" ><div class="placeholder">系统通知</div></div>
                                                        <div class="weui-flex__item" style="text-align:right;margin-right:10px">
                                                            <div class="placeholder">
                                                                ${formatDate(item.update_time)}<img src="images/home/open.png" style="width:25px;height:25px;vertical-align:middle;">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="msg-content">${item.push_content}</div>
                                                </div>`
                                $('#goods-message-sys').append(html)
                            }
                        }
                        //获取反馈
                        {
                            let msg1 = {}
                            msg1.token = JSON.parse(j2aCls.GetToken())['token']
                            msg1.function = 'complaints_lie_biao'
                            msg1.category = 'PL'
                            msg1.users_id = JSON.parse(j2aCls.GetToken())['did']
                            msg1.ext = 'goods_msg_back'
                            sendMsg(JSON.stringify(msg1))  
                        }  
                        break;
					case 'goods_msg_back'://回复消息
						$('#goods-message-top').empty()
						for(let item of data.rows){
							if(item.reply){
								let html = `<div class="msg-item">
												<div class="weui-flex message-groups">
													<div class="weui-flex__item" ><div class="placeholder">回复通知</div></div>
													<div class="weui-flex__item" style="text-align:right;margin-right:10px">
														<div class="placeholder">
															${formatDate(item.reply_time)}
															<img src="images/home/open.png" style="width:25px;height:25px;vertical-align:middle">
														</div>
													</div>
												</div>
												<div class="msg-content">${item.reply}</div>
											</div>`
								$('#goods-message-top').append(html)
							}
						}
						
						break
					case 'get_star'://获取评分
						let star = data.rows[0].points
						if(!star){
							$('#star-num').html('10.0')
						}else{
							star = JSON.parse(star)
							let num = (parseFloat(star.points)/star.times).toFixed(1)
							$('#star-num').html(num)
                        }
                        break
                    case 'recode'://是否开通网商
                        //访问用户，查看是否开通成功
                        {
                            let info1 = {}
                            info1.token=JSON.parse(j2aCls.GetToken())['token'];;
                            info1.function='getMyinfo';
                            info1.ext = 'checkRegister'
                            sendMsg(JSON.stringify(info1));
                        }
                        break
                    case 'withdraw_history'://提现明细
                        //提现明细
                        $('.withdraw-page').html('')
                        for(let item of data.rows){
                            let html = ` <div class="weui-form-preview">
                                            <div class="weui-cells__group weui-cells__group_form">
                                                <div class="weui-form-preview__bd" style="padding-right: 40px;">
                                                    <div class="weui-form-preview__item">
                                                        <label class="weui-form-preview__label cash_record">时间</label>
                                                        <span >${strToDate(item.finishDate)}</span>
                                                    </div>
                                                    <div class="weui-form-preview__item">
                                                        <label class="weui-form-preview__label cash_record">提现单号</label>
                                                        <span >${item.orderNo}</span>
                                                    </div>
                                                    <div class="weui-form-preview__item">
                                                        <label class="weui-form-preview__label cash_record">收入</label>
                                                        <span class="" style="color: #008c00">${parseFloat(item.totalAmount).toFixed(2)}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>`
                            $('.withdraw-page').append(html)
                        }
                        
                        break
                    case 'delete_car'://删除车辆
                        addToast('车辆删除成功')
                        $('.all-page').hide()
                        $('.weui-tab-edit').removeClass('page-hide')
                        break
                    case 'normal_address'://常用地址
                        let addr = ''
                        if(!data.rows.length){
                            $('#select-address').html('<option>暂无常用地址</option>')
                            return
                        }
                        for(let item of data.rows){
                            addr += `<option value=${item.address}>${item.address}</option>`
                        }
                        $('#select-address').html(addr)
                        addr = null
                        break
                    case 'address_del'://地址删除
                        addToast('删除成功')
                        $('.normal-info_raddr').hide()
                        $('.goods-normal-info').show()
                        break
                    case 'filter_car'://货源大厅筛选车辆
                        if(!data.message.total){
                                let ele='<div style="width:100%;text-align:center">暂无数据</div>';
                                $("#car-page").find('.data').html(ele);
                                return;
                            }
                            var str = ''
                            for(let item of data.message.row){
                                let ele=`<div class="content content-item" data-uid=${item.id} style="height:120px;border-top:1px solid #EDEDED">
                                        <ul>
                                            <li style="border-bottom: 1px solid #eee;color:gray">
                                            <div class="content-top-left">
                                            <img src="images/cars_source/car_sources.png" class="top-right-img" >
                                            <span style="font-size: 15px">${item.plate}</span>
                                            </div>
                                            <div class="content-top-right">
                                            <span style="margin-right:15px;font-size: 15px">待货中</span>
                                            </div>
                                            <div class="content-top-center">
                                            <span style="font-size: 15px">${item.carModel}</span>
                                            </div>
                                            </li>
                                            <li style="color:gray;">
                                            <img src="images/cars_source/point_a.png" class="position-item">
                                            <span style="font-size: 15px">${item.carIssue}</span>
                                            </li>
                                            <li style="color:gray;margin-top:-10px;">
                                                <img src="images/cars_source/point_b.png" class="position-item">
                                                <span style="font-size: 15px">${item.carRegPlace}</span>
                                            </li>
                                        </ul>
                                        <div class="content-right">
                                                <a href="javascript:" class="weui-btn weui-btn_primary place_order">下单</a>
                                            </div>
                                        </div>`;
                                str += ele
                            }
                        $("#car-page").find('.data').html(str);
                        str = null
                        break
                    case 'is_view'://是否已评价
                        if(data.rows.length){
                            $('#is-view').html('(已评价)')
                        }else{
                            $('#is-view').html('')
                        }
                        break
                    case 'goods_mine_bills'://货主-账户-运单获取
                        {
                            var strPay = '' , strFinished = '' , status = '' ,btn = ''
                            for(let item of data.rows){ 
                                switch(item.status){
                                    case '5':
                                    case '4':
                                        status = '已支付'
                                        btn = ''
                                        break
                                    case '3':
                                        btn = '<div class="goods-mine-paybtn">申请支付</div>'
                                        status = '已卸货'
                                        break
                                    default:
                                        status = ''
                                        btn = ''
                                }
                                // let am = item.unitPrice
                                // if(item.type != 'rent'){
                                //     am =  Number(item.unitPrice) * Number(item.loadingValue)
                                // } 
                                // let  mount = am - Number(item['loadingFee']) - Number(item['unloadingFee']) -Number(item['timeoutFee'])
                                // -Number(item['insurance']) -Number(item['additionalFee']) - Number(item['gasFee']) - Number(item['travelFee'])
                                let am = !item.consignor_amount ? '0' : item.consignor_amount
                                if(item.status == '5'){
                                    item.amount = am
                                }
                                let hetong = null
                                if(item.type == 'rent'){
                                    hetong = item.unitPrice
                                }else{
                                    hetong = (Number(item.unitPrice) * Number(item.loadingValue)).toFixed(2)
                                }
                                let ele = `  <div><div class="content common content-style" data-id=${item.id} data-sid=${item.sid}  style="height:auto;color:gray;border-bottom:10px solid #eee">
                                                <div class="main-order-top" style="height:20px;display: flex">
                                                    <div style="flex:1;text-align: left">
                                                        运单号：<span class="order-transport-num">${item.sid}</span>
                                                    </div>
                                                    <div style="width:90px;text-align: right">
                                                        <span style="margin-right:15px;">${status}</span>
                                                        <input type="hidden" value=${item.id}>
                                                    </div>
                                                </div>
                                                <div style="height:20px;display: flex;">
                                                    <div style="flex:1;text-align: left">
                                                        司机：<span class="order-transport-num" style="vertical-align: middle">${item.driver}</span>
                                                    </div>
                                                    <div style="flex:1;text-align: right">
                                                        <span style="margin-right:15px;">车牌：${item.plate}</span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_a.png" class="position-item">
                                                    <span>${getFormatAddress(item.loadingAddr)}</span>
                                                </div>
                                                <div>
                                                    <img src="images/cars_source/point_b.png" class="position-item">
                                                    <span>${getFormatAddress(item.unloadingAddr)}</span>
                                                </div>
                                                <div style="display: flex">
                                                    <div style="flex:1">
                                                        <span style="font-weight: bolder;color:black">${item.goods}</span>
                                                    </div>
                                                    <div class="goods-paybtn-func" data-id=${item.id} data-amount=${hetong}>${btn}</div>
                                                </div>
                                            </div></div>`;
                                            // <span style="padding-left: 20px;color:black">${item.amount}元</span>
                                if(item.status == '3' && item.consignor_status != '1'){
                                    strPay += ele
                                }else if(item.status == '5'){
                                    strFinished += ele
                                }
                            }
                            strPay = !strPay ? nullHtml : strPay
                            strFinished = !strFinished ? nullHtml : strFinished
                            $('.goods-mine-billss').find('.bills').eq(0).html(strPay)
                            $('.goods-mine-billss').find('.bills').eq(1).html(strFinished)
                        }
                        break
                    case 'sure_pay'://货主确认支付
                        addToast('确认支付成功')
                        //刷新订单
                        {
                            let obj = {}
                            obj.token = JSON.parse(j2aCls.GetToken())['token']
                            obj.function = 'fr_lik_waybills'
                            obj.category = 'CX'
                            obj.consignor = JSON.parse(j2aCls.GetToken())['name']
                            obj.ttag = '1609776000'
                            obj.ext = 'goods_mine_bills'
                            sendMsg(JSON.stringify(obj))
                        }
                        break
                    case 'finished_sources'://货源单已完成
                        {
                        let str = '',count = 0
                        for(let item of data.message.row){
                            //装卸货地址转换
                            let start_pos = getFormatAddress(item.loadingAddr,1).substring(0,10)
                                ,end_pos = getFormatAddress(item.unloadingAddr,2).substring(0,10)
                            if(item.loadingAddr.length>10){
                                start_pos+='...';
                            }
                            if(item.unloadingAddr.length>10){
                                end_pos+='...';
                            }
                            let unitarr=unitConver(item.calculateType);
                            let ele =` <div class="content  " data-uid=${item.id} style="height:auto;border-bottom:10px solid #eee">
                                    <ul>
                                        <li style="border-bottom: 1px solid #eee;height:20px;color:gray">
                                            <div class="item_float_left">
                                                货源单号：<span class="order-transport-num" style="vertical-align: middle">${item.sid}</span>
                                            </div>
                                            <div class="item_float_right" >
                                                <span style="margin-right:15px;">已完成</span>
                                            </div>
                                        </li>
                                        <li style="color:gray">
                                            <img src="images/cars_source/point_a.png" class="position-item">
                                            <span>${start_pos}</span>
                                        </li>
                                        <li style="color:gray;margin-top: -10px;">
                                            <div class="item_float_left item_color_gray" >
                                                <img src="images/cars_source/point_b.png" class="position-item">
                                                <span>${end_pos}</span>
                                            </div>
                                            <div class="item_float_right" style="margin-right: 15px;">
                                                <span><button class="copy-btn btn-groups" data-id=${item.id} data-fin='yes'>复制</button></span>
                                                <span><span>
                                            </div>
                                            <p style="clear:both"></p>
                                        </li>
                                        <li>
                                            <div style="display: flex">
                                                <div style="flex:1">
                                                    <span style="font-weight: bolder">${item.name}</span>
                                                    <span style="padding-left: 20px">${item.unitPrice+unitarr[0]}</span>
                                                </div>
                                                <div style="width:140px;text-align: right;">
                                                    <span style="font-weight: bolder;margin-right: 15px">总重:${item.weight}吨</span>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>`;
                                str += ele
                                //$('#goods-myorder').find('.resource_item_group').eq(1).append(ele);
                            }
                            $('#goods-myorder').find('.resource_item_group').eq(1).html(str);
                        }
                        break
                    case 'goods_bills_finished'://货主-已完成单
                        $('.goods_order-group').eq(1).html('');
                        $('.goods_order-group').eq(2).html('');
                        let order_sts='';
                        let cunits='';
                        for(let item of data.rows){
                            order_sts=statusConver(item.status);
                            cunits=unitConver(item.type);
                            //装卸货地址转换
                            item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                            item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)

                            let ele='<div class="content content-item consignor-details" data-id='+item.id+' data-role="full" data-sid='+item.sid+' style="height:140px;">\n' +
                            '      <ul>\n' +
                            '          <li style="border-bottom: 1px solid #eee;height:20px;color:gray">\n' +
                            '                   <div class="" style="float: left">\n' +
                            '                        运单号：<span class="order-transport-num"\n' +
                            '                       >'+item.sid+'...</span>\n' +
                            '                      </div>\n' +
                            '                       <div class="" style="float: right">\n' +
                            '                        <span style="margin-right:15px;">'+order_sts+'</span>\n' +
                            '                        </div>\n' +
                            '           </li>\n' +
                            '           <li style="color:gray;text-align:left">\n' +
                            '               <img src="images/cars_source/point_a.png" \n' +
                            '               style="width:5px;height:5px;vertical-align: middle">\n' +
                            '               <span>'+item.loadingAddr.substring(0,10)+'...'+'</span>\n' +
                            '          </li>\n' +
                            '          <li style="color:gray;margin-top: -10px;">\n' +
                            '           <div style="float:left;color:gray">\n' +
                            '           <img src="images/cars_source/point_b.png" \n' +
                            '            style="width:5px;height:5px;vertical-align: middle">\n' +
                            '          <span>'+item.unloadingAddr.substring(0,10)+'...'+'</span>\n' +
                            '           </div>\n' +
                            '            <div style="float:right ;margin-right: 15px;">\n' +
                            '             </div>\n' +
                            '              <p style="clear:both"></p>\n' +
                            '          </li>\n' +
                            '         <li>\n' +
                                    '<div style="display: flex">'+
                            '           <div style="flex: 1;text-align: left">\n' +
                            '         <span style="font-weight: bolder">'+item.goods+'</span>\n' +
                                '         <span style="padding-left: 20px">'+item.unitPrice+cunits[0]+'</span>\n' +
                            '           </div>\n' +
                            '       <div style="width:90px">\n' +
                            '      <span><span>'+item.value+'</span>'+cunits[1]+'</span>\n' +
                            '      </div>\n' +
                                '</div>'+
                            '     </li>\n' +
                            '  </ul>\n' +
                            '  </div>';
                            if(item.status=='3'||item.status=='4'){
                                $('.goods_order-group').eq(2).append(ele);
                            }else if(item.status=='5'){
                                $('.goods_order-group').eq(1).append(ele);
                            }
                        }
                        break
                    case 'goods_bills_finished_outer'://货主订单已完成
                        {
                            let order_sts='';
                            let cunits='',str = '',strFin = ''
                            for(let item of data.rows){
                                order_sts=statusConver(item.status);
                                cunits=unitConver(item.type);
                                //装卸货地址转换
                                item.loadingAddr = getFormatAddress(item.loadingAddr,1)
                                item.unloadingAddr = getFormatAddress(item.unloadingAddr,2)
                                let ele='<div class="content content-item consignor-details" data-id='+item.id+' data-role="full" data-sid='+item.sid+' style="height:140px;">\n' +
                                '      <ul>\n' +
                                '          <li style="border-bottom: 1px solid #eee;height:20px;color:gray">\n' +
                                '                   <div class="" style="float: left">\n' +
                                '                        运单号：<span class="order-transport-num"\n' +
                                '                       >'+item.sid+'...</span>\n' +
                                '                      </div>\n' +
                                '                       <div class="" style="float: right">\n' +
                                '                        <span style="margin-right:15px;">'+order_sts+'</span>\n' +
                                '                        </div>\n' +
                                '           </li>\n' +
                                '           <li style="color:gray;text-align:left">\n' +
                                '               <img src="images/cars_source/point_a.png" \n' +
                                '               style="width:5px;height:5px;vertical-align: middle">\n' +
                                '               <span>'+item.loadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '          </li>\n' +
                                '          <li style="color:gray;margin-top: -10px;">\n' +
                                '           <div style="float:left;color:gray">\n' +
                                '           <img src="images/cars_source/point_b.png" \n' +
                                '            style="width:5px;height:5px;vertical-align: middle">\n' +
                                '          <span>'+item.unloadingAddr.substring(0,10)+'...'+'</span>\n' +
                                '           </div>\n' +
                                '            <div style="float:right ;margin-right: 15px;">\n' +
                                '             </div>\n' +
                                '              <p style="clear:both"></p>\n' +
                                '          </li>\n' +
                                '         <li>\n' +
                                        '<div style="display: flex">'+
                                '           <div style="flex: 1;text-align: left">\n' +
                                '         <span style="font-weight: bolder">'+item.goods+'</span>\n' +
                                    '         <span style="padding-left: 20px">'+item.unitPrice+cunits[0]+'</span>\n' +
                                '           </div>\n' +
                                '       <div style="width:90px">\n' +
                                '      <span><span>'+item.value+'</span>'+cunits[1]+'</span>\n' +
                                '      </div>\n' +
                                    '</div>'+
                                '     </li>\n' +
                                '  </ul>\n' +
                                '  </div>';
                                if(item.status=='3'||item.status=='4'){
                                    str += ele
                                }else if(item.status=='5'){
                                    strFin += ele
                                }
                            }
                            if(!str)str = nullHtml
                            if(!strFin)strFin = nullHtml
                            $('.goods_order-group').eq(2).html(str);
                            $('.goods_order-group').eq(1).html(strFin);
                        }
                        break
                    case 'goods_finished'://货主-订单-订单详情
                        {
                            $('.my_view').hide();
                            $('.is-carhidden').hide();
                            let odata = dataFormat(data)[0]
                            if(JSON.parse(j2aCls.GetToken())['role'] == 'consignor'){
                                if(odata.status=='1'||odata.status=='2'){
                                    $('.is-carhidden').show();
                                }
                            }
                            //订单详情数据渲染。
                            $('#data_id').html(odata.sid);
                            $('#data-billid').val(odata.id)
                            $('#data-view-consignor').val(odata.consignor)
                            $('#data-view-driver').val(odata.driver)
                            $('#data_waybill-driver').html(odata.driver);
                            $('#data_carplate').html(odata.plate);
                            //存储司机id用于发布评论
                            {
                                let store = JSON.parse(j2aCls.GetToken())
                                store.driverid = odata.uid
                                j2aCls.SetToken(JSON.stringify(store))
                            }
                            //装卸货地址转换
                            odata.loadingAddr = getFormatAddress(odata.loadingAddr,1)
                            odata.unloadingAddr = getFormatAddress(odata.unloadingAddr,2)
                            try {
                                if(Number(odata.status) >= 3){
                                    $('#loading-img').find('img').attr('src',getFileLink(odata.pic_loading));
                                    $('#unloading-img').find('img').attr('src',getFileLink(odata.pic_unloading))
                                }else{
                                    $('#loading-img').find('img').attr('src',getFileLink(odata.pic_loadding));
                                    $('#unloading-img').find('img').attr('src',getFileLink(odata.pic_unloadding))
                                }
                            } catch (error) {
                                
                            }
                            $('#data_loadingaddr').html(odata.loadingAddr);
                            $('#data_upload_addr').html(odata.unloadingAddr);
                            $('#data_order_consignor').html('');
                            $('#data_order_consignor').html(odata.sender);
                            $('#data_order_num').html(odata.consignorPhone);
                            $('#data_waybill-receiver').html(odata.receiver);
                            $('#data_waybill-rphone').html(odata.receiverPhone);
                            $('#data_waybill-good').html(odata.goods)
                            $('#data_waybill-price').html(odata.unitPrice+unitConver(odata.type)[0])
                            $('#data_waybill-ts').html('')
                            $('#data_waybill-td').html('')
                            if(typeof odata.log != 'string'&&odata.log != null){
                                $('#data_waybill-ts').html(formatDate(odata.log[1].ttag))
                                $('#data_waybill-td').html(formatDate(odata.log[2].ttag))
                            }else{
                                $('#data_waybill-ts').html(odata.log[1].ttag)
                                $('#data_waybill-td').html(odata.log[2].ttag)
                            }
                            if(odata.status=='3'||odata.status=='4'){
                                $('.my_view').show();
                            }
                            if(!odata.loadingValue||!odata.unitPrice){
                                $('#data_fee').html('0元');
                            }else{
                                let fee=parseFloat(odata.loadingValue)*parseFloat(odata.unitPrice);
                                if(odata.type=='rent'){
                                    fee=odata.unitPrice
                                }
                                $('#data_fee').html(fee+'元');
                            }
                            getUserStar(odata.uid)
                        }
                        break
                    case 'is_net_bank_on'://车主-获取网商银行注册信息
                        if(data.ws_registered == '1'){
                            $('.is-bank-open').html('<span style="color:#008c00">已开通</span>')
                        }
                        break
                    case 'consignor-info'://获取货主信息
                        {
                            let info = data.rows[0]
                            $('#data_certify-pid').html(info.pid)
                            $('#licence-check').find('img').attr('src',getFileLink(info.accountLicensePhoto));
                            $('#pid-front').find('img').attr('src',getFileLink(info.idPhoto_front));
                            $('#pid-back').find('img').attr('src',getFileLink(info.idPhoto_back));
                            $('#licence-img').find('img').attr('src',getFileLink(info.businessLicensePhoto));
                            if(info.pid && info.idPhoto_back){
                                $('#is-goods-certify').html('已认证')
                            }
                        }
                        break
                    case 'update_pwd'://账户密码修改
                        {
                            addToast('密码修改成功,请重新登陆')
                            //清空cookie
                            {
                                let store = JSON.parse(j2aCls.GetToken())
                                store.token = ''
                                store.role = ''
                                store.uid = ''
                                store.did = ''
                                j2aCls.SetToken(JSON.stringify(store))
                            }
                            setTimeout(() => {
                                $(location).attr('href', 'index.html?'+new Date().getTime());
                                window.location.reload()
                                $('.all-page').hide();
                                $('.weui-tab-edit').removeClass('page-hide');
                                $('#home-index-tab').click()
                            },1000)
                        }
                        break
                    case 'forget_pwd'://密码找回
                        addToast('密码已找回，请登录')
                        setTimeout(() => {
                            $('.register').hide()
                            $('.login').show()
                        },1000)
                        break
                    case '--以下为油气代码--':
                        break
                    case 'gas_list'://加油站首页数据
                        useStaion(data)
                        //数据清除
                        $('.filter-goods').html('0#')
                        break
                    case 'order_list'://订单列表
                        if(!data.message.row.length){
                            $('.total-cash').html('0')
                            $('.oil-order-data').html(nullHtml)
                            return
                        }
                        var html = ''
                        let totalCash = 0
                        for(let item of data.message.row){
                            html += order2string(item)
                            if(item.status == '2'){
                                totalCash += parseFloat(item.actual_amount)
                            }
                        }
                        $('.total-cash').html(totalCash.toFixed(2))
                        $('.oil-order-data').html(html)
                        break
                    case 'msg_list'://消息列表
                        if(!data.rows.length){
                            $('.oil-mine-msg').html('0')
                            return
                        }
                        msgData = []
                        let count = 0
                        for(let item of data.rows){
                            if(item.push_status == '1'){
                                let msgObj = {}
                                msgObj.content = item.push_content
                                msgObj.time = item.update_time
                                msgData.push(msgObj)
                                count++
                            }
                        }
                        $('.oil-mine-msg').html(''+count)
                        break
                    case 'recommend'://推荐入驻
                        addToast('推荐成功')
                        $('.oil-mine-recommend').hide()
                        $('.home-oil').show()
                        break
                    case 'gas_userinfo'://用户信息获取
                        $('.user-phone').html(data.user)
                        if(data.gas_plate){
                            $('#car-certify-yes').html('(已认证)')
                        }else{
                            $('#car-certify-yes').html('')
                        }
                        data.gasoline_Balance = (!data.gasoline_Balance)?'0':data.gasoline_Balance
                        $('.user-balance').html(Number(data.gasoline_Balance).toFixed(2))
                        break
                    case 'paycash'://生成支付订单
                        $('#oil-gun').val('')
                        //加载页面
                        $('.oil-detail').hide()
                        $('.oil-order-topay').show()
                        $('.data-sid').html(data.sid)
                        {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.orderNo = data.message
                            store.paytype = data.status
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        break
                    case 'ordertopay'://确认支付订单
                        if(JSON.parse(j2aCls.GetToken())['isalipay'] == 'yes'){
                            //支付宝支付
                            j2aCls.PaywithAlipay(data.message)
                            alipayIsSuccess()//支付是否成功检测函数
                        }else if(JSON.parse(j2aCls.GetToken())['isalipay'] == 'wechat'){
                            //微信支付
                            j2aCls.PaywithWxpay(JSON.stringify(data.message));
                            alipayIsSuccess()//支付是否成功检测函数
                        }else{
                            //油气支付
                            addToast('支付成功')
                            $('.oil-order-topay').hide()
                            $('.home-oil').show()
                            //更新订单数据
                            {
                                var orderlist = paramObj('CX','gas_water_search')
                                orderlist.phone = JSON.parse(j2aCls.GetToken())['user']
                                orderlist.ext = 'order_list'
                                sendMsg(JSON.stringify(orderlist))
                            }
                        }
                        {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.isalipay = ''
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        break
                    case 'order_list_item'://订单详情
                        //订单页面数据渲染-优惠金额信息
                        let datas = data.message.row[0]
                        try {
                                if(Number(datas.status) >= 3){
                                    $('#loading-img').find('img').attr('src',getFileLink(datas.pic_loading));
                                    $('#unloading-img').find('img').attr('src',getFileLink(datas.pic_unloading))
                                }else{
                                    $('#loading-img').find('img').attr('src',getFileLink(datas.pic_loadding));
                                    $('#unloading-img').find('img').attr('src',getFileLink(datas.pic_unloadding))
                                }
                            } catch (error) {
                                
                            }
                        let x = BigNumber(datas.discounted_price)
                        let y = BigNumber(datas.other_offers)
                        let all_discount = BigNumber(datas.other_offers2).plus(x).plus(y) - 0
                        $('.discount-all').html(all_discount)//总优惠金额
                        let arr = ['amount','sid','order_time','gas_name','address','good','type','amount','quantity','discounted_price','other_offers','other_offers2','actual_amount']
                        data2page(arr,datas)
                        //支付方式判断
                        switch(datas.payment_method){
                            case '3':
                                $('.data-paytype').html('油气点支付')
                                break
                            case '2':
                                $('.data-paytype').html('微信支付')
                                break
                            case '1':
                                $('.data-paytype').html('支付宝支付')
                                break
                            default:
                        }
                        //支付状态判断
                        switch(datas.status){
                            case '2':
                                $('.data-paystatus').html('已支付')
                                break
                            default:
                                $('.data-paystatus').html('已关闭')
                        }
                        break
                    case 'recharge-back'://充值返利查询
                        let param1 = parseFloat($('input[name="recharge-cash"]').val())
                        //计算折扣价
                        for(let i=0;i<data.rows.length;i++){
                            if(param1>=parseFloat(data.rows[i].recharge_lower) && param1<=parseFloat(data.rows[i].recharge_upper)){
                                let discount = param1 *parseFloat(data.rows[i].num)/100
                                $('input[name="recharge-back"]').val(cash2point(discount))
                                $('input[name="recharge-actual"]').val(cash2point(param1+discount))
                                return
                            }
                        }
                        if(!$('input[name="recharge-actual"]').val()){
                            $('input[name="recharge-back"]').val('0.00')
                            $('input[name="recharge-actual"]').val(param1)
                        }
                        break
                    case 'alipay_status'://支付状态查询
                        if(data.message.row[0].status == '2'){
                            addToast('支付成功')
                            $('.oil-order-topay').hide()
                            $('.home-oil').show()
                            clearInterval(isPayTimer);
                            isPayTimer = null;
                            //更新订单数据
                            var orderlist = paramObj('CX','gas_water_search')
                            orderlist.phone = JSON.parse(j2aCls.GetToken())['user']
                            sendMsg(JSON.stringify(orderlist))
                            //壳牌数据传输
                            if(data.message.row[0].brand == '壳牌'){
                                let obj = paramObj('OZF','syncYcShellPaymentNotify')
                                obj.order_id = JSON.parse(j2aCls.GetToken())['orderNo']
                                sendMsg(JSON.stringify(obj))
                            }
                        }else if(data.message.row[0].status == '1'){
                            alipayIsSuccess()
                        }
                        break
                    case 'order_recharge'://用户充值订单生成
                        {
                            let store = JSON.parse(j2aCls.GetToken())
                            store.recharge_id = data.message
                            store.recharge_type = data.status
                            j2aCls.SetToken(JSON.stringify(store))
                        }
                        break
                    case 'wxpay_recharge'://微信充值
                        j2aCls.PaywithWxpay(JSON.stringify(data.message));
                        isAlipayRecharge(JSON.parse(j2aCls.GetToken())['recharge_id'])
                        break
                    case 'alipay_recharge'://支付宝充值
                        j2aCls.PaywithAlipay(data.message)
                        isAlipayRecharge(JSON.parse(j2aCls.GetToken())['recharge_id'])
                        break
                    case 'alipay_re_success'://充值是否成功
                        if(data.rows[0].status == '2'){
                            $('.oil-recharge-confirm').hide()
                            $('.home-oil').show()
                            clearInterval(isRechargeTimer);
                            isRechargeTimer = null;
                            //更新油气值
                            let updateOrder = paramObj('PL','gas_balance_update')
                            updateOrder.order_id = JSON.parse(j2aCls.GetToken())['recharge_id']
                            updateOrder.ext = 're_msg_push'
                            sendMsg(JSON.stringify(updateOrder))
                            //更新用户信息
                            var userObj = paramObj('none','getMyinfo')
                            userObj.ext = 'gas_userinfo'
                            sendMsg(JSON.stringify(userObj))
                            {
                                let store = JSON.parse(j2aCls.GetToken())
                                store.recharge_id = ''
                                j2aCls.SetToken(JSON.stringify(store))
                            }
                        }else if(data.rows[0].status == '1'){
                            isAlipayRecharge(JSON.parse(j2aCls.GetToken())['recharge_id'])
                        }
                        break
                    case 'cancel_order'://取消订单
                        addToast('该订单已取消')
                        //更新订单数据
                        var orderlist = paramObj('CX','gas_water_search')
                        orderlist.phone = JSON.parse(j2aCls.GetToken())['user']
                        orderlist.ext = 'order_list'
                        sendMsg(JSON.stringify(orderlist))
                        break
                    case 'recharge_list'://获取充值列表
                        //充值列表
                        if(!data.rows.length){
                            $('.oil-recharge-item').html(nullHtml)
                        }else{
                            let datastr = rechargeList2string(data.rows)
                            $('.oil-recharge-item').html(datastr)
                        }
                        break
                    case 'car_certify'://车辆认证
                        //车辆认证
                        addToast('认证成功')
                        $('.oil-mine-certify').hide()
                        $('.home-oil').show()
                        //清空数据
                        $('input[name="plate"]').val('')
                        $('input[name="everyone"]').val('')
                        break
                    case 're_msg_push'://充值成功提示
                        addToast(data.message)
                        break
                    case '处理图片':
                        break
                    case 'upload_licence':
                        $('#upload-driverlicence').find('img').attr('src',getFileLink(data.message.fid));
                        $('#file-id').val(data.message.fid)
                        break;
                    case 'xsz_d':
                        $('#xsz').find('img').attr('src',getFileLink(data.message.fid));
                        // $("#carinfo_form input[name='plate']").val(data.message.plate);
                        // $("#carinfo_form input[name='carOwner']").val(data.message.owner)
                        // $("#carinfo_form input[name='carReg']").val(obj.message.reg)
                        // $("#carinfo_form input[name='carIssueDate']").val(obj.message.issu)
                        $("#carinfo_form input[name='lisencePic']").val(data.message.fid)
                        break;
                    case 'road':
                        $('#choose_img_road').find('img').attr('src',getFileLink(data.message.fid));
                        $("#carinfo_form input[name='transportLisencePic']").val(data.message.fid)
                        break;
                    case 'person_and_car':
                        $('#choose_img_person').find('img').attr('src',getFileLink(data.message.fid));
                        $("#carinfo_form input[name='peopleAndCarPic']").val(data.message.fid)
                        break;
                    case 'trailer':
                        $('#choose_img_trail').find('img').attr('src',getFileLink(data.message.fid));
                        $("#carinfo_form input[name='trailerLisencePic']").val(data.message.fid)
                        break;
                    case 'load_img':
                        $('#choose_img_load').find('img').attr('src',getFileLink(data.message.fid));
                        $('#img_load_fid').val(data.message.fid);
                        break;
                    case 'unload_img':
                        $('#choose_img_unload').find('img').attr('src',getFileLink(data.message.fid));
                        $('#img_unload_fid').val(data.message.fid);
                        break;
                    case 'idcard_front':
                        $('#choose_img_idf').find('img').attr('src',getFileLink(data.message.fid));
                        $("#sji_form input[name='pid']").val(data.message.id);
                        $("#sji_form input[name='idPic_front']").val(data.message.fid);
                        break;
                    case 'idcard_back':
                        $('#choose_img_idb').find('img').attr('src',getFileLink(data.message.fid));
                        $("#sji_form input[name='idPic_back']").val(data.message.fid);
                        break;
                    case 'is_licence':
                        $('#choose_img_licence').find('img').attr('src',getFileLink(data.message.fid));
                       // $("#sji_form input[name='name']").val(obj.message.name);
                        $("#sji_form input[name='driveLicense']").val(data.message.id);
                        // $("#sji_form input[name='driveLicenseType']").val(obj.message.allow);
                        // $("#sji_form input[name='driveLicenseValid']").val(obj.message.issue);
                        // $("#sji_form input[name='driveLicenseValidTo']").val(obj.message.period);
                        $("#sji_form input[name='driveLicensePic']").val(data.message.fid);
                        break;
                    case 'authority':
                        $('#choose_img_authority').find('img').attr('src',getFileLink(data.message.fid));
                        $("#sji_form input[name='driverCertificatePic']").val(data.message.fid);
                        break;
                    case 'carbill':
                        $('#choose_img_loadcard').find('img').attr('src',getFileLink(data.message.fid));
                        break;
                    case 'backbill':
                        $('#choose_img_loadback').find('img').attr('src',getFileLink(data.message.fid));
                        break;
                    case 'errorup':
                        $('#choose_img_errorup').find('img').attr('src',getFileLink(data.message.fid));
                        break;
                    case 'change_pic':
                        $('#personal').find('img').attr('src',getFileLink(data.message.fid));
                        break;
                    case 'get_bank':
                        $('#get-bank-img').find('img').attr('src',getFileLink(data.message.fid));
                        $('#bank-id').val(data.message.fid);
                        // $('#bank_card').val(data.message.number);
                        // $('#bank_bank').val(data.message.bank)
                        break;
                    case 'get_goodsbank':
                        $('#get-goodsbank-img').find('img').attr('src',getFileLink(data.message.fid));
                        $('#goods_bank-id').val(data.message.fid);
                        // $('#goods_bank_card').val(obj.message.number);
                        // $('#goods_bank_bank').val(obj.message.bank)
                        break;
                    default:
                }
             }else{
                //数据返回
                switch(data.message){
                    case '请勿频繁操作':
                        addToast(data.message)
                        $('#id_valid').attr("src","/php/srv/vt.php");
                        $('#id_validArea').css("display","block");
                        break
                    case '未登录':
                    case '未登陆':
                        if(current_tab_page!=1&&current_tab_page!=2&&current_tab_page!=3){
                            $('#bank-open').hide()
                            addToast(data.message)
                            setTimeout(function(){
                                //登陆记住密码
                                $('#login_user').val(JSON.parse(j2aCls.GetToken())['user']);
                                $('#login_pwd').val(JSON.parse(j2aCls.GetToken())['pwd']);
                                $('.login').show();
                            },1000)
                        }
                        break
                    default:
                        addToast(data.message)
                }
                try {
                    if(data.message.trim().substring(0,6) == '用户余额不足'){
                        addToast('用户余额不足，即将跳转充值页面')
                        setTimeout(function(){
                            $('#centerTips').hide();
                            $('.oil-order-topay').hide()
                            $('.oil-mine-recharge').show()
                        },1000)   
                    }
                } catch (error) {
                    
                }
                switch(data.ext){
                    case 'alipay_status':
                        clearInterval(isPayTimer);
                        isPayTimer = null;
                        break;
                    case 'alipay_re_success':
                        clearInterval(isRechargeTimer);
                        isRechargeTimer = null;
                        break;
                }
            }
        }
        function strToDate(str){
            let year = str.substring(0,4)+'-'
            let month = str.substring(4,6)+'-'
            let day = str.substring(6,8)+' '
            let hour = str.substring(8,10)+':'
            let min = str.substring(10,12)+':'
            let sec = str.substring(12,14)
            return year + month + day + hour + min + sec
        }
        //用户权限划分
        $(document).ready(function(){
            if(!j2aCls.GetToken()){
                let store = {}
                store.token = ''
                j2aCls.SetToken(JSON.stringify(store))
            }
           if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
            $('#tab2').hide();
            $('#tab1').show();
            $('.scan_code').show();
           }else{
            $('#tab1').hide();
            $('#tab2').show();
            $('.scan_code').hide();
           }
        })
        //首页-车源大厅筛选
        $('.home-car-filter-btn').on('touchend',function(e){
            stopTouchendPropagationAfterScroll()
            e.stopPropagation()
            let content = $('.home-car-content').val()
            if(content){
                let obj = {}
                obj.token = JSON.parse(j2aCls.GetToken())['token']
                obj.plate = content.trim().substring(0,6)
                obj.function = 'fr_lik_cars'
                obj.category = 'CX'
                obj.ext = 'filter_car'
                sendMsg(JSON.stringify(obj))
            }else{
                addToast('内容不能为空')
            }
            $('.home-car-content').val('')
        })
		/*
		*获取司机评价
		* */
		function getUserStar(uid){
			let obj = {}
			obj.token = JSON.parse(j2aCls.GetToken())['token']
			obj.conditions = {
				id:uid
			}
			obj.function = 'getUsers'
			obj.ext = 'get_star'
			sendMsg(JSON.stringify(obj))
		}
        /*获取车主信息*/
         //车主-我的-连接后台
         $('.page-car-mine').on('touchend', function () {
                stopTouchendPropagationAfterScroll();
                const obj={};
                obj.token=JSON.parse(j2aCls.GetToken())['token'];;
                obj.function='getMyinfo';
                obj.ext = 'cars_myinfo'
                sendMsg(JSON.stringify(obj));
                info_page='cars';
                $('.weui-tab-edit').addClass('page-hide');
                $('.home-car-mine').css('display', 'block')
            })
        //司机认证信息
        $('#shang_chuan_xing_xi').click(function () {
            if($('#data_ccertify-name').html()!='司机'&&$('#data_ccertify-pid').html()){
                addToast('您已通过实名认证')
                return;
            }
            $('#si_ji_xing_xi').css('display','block');
            $('.car-certify').css('display','none');
            })
        //司机认证
        $('#dji_ti_jiao').on('touchend',function(){
            var obj=$('#sji_form').serializeObject_comm();
            if(obj.name==''||obj.pid==''){
                addToast('姓名或身份证不能为空');
                return;
            }
            if(obj.driverCertificateNumber==''||obj.driveLicense==''){
                addToast('驾驶证号或从业资格证号不能为空');
                return;
            }
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "modifyUser";
            obj.sid=JSON.parse(j2aCls.GetToken())['did'];
            obj.psw_b=obj.psw_a;
            obj.user=obj.name;
            obj.role='driver';
            obj.ext = 'modifyUser'
            sendMsg(JSON.stringify(obj))
        })
        let timer = null 
        function deadline(){
            //清零操作
            clearInterval(timer)
            $('#remain-time').css('color','black')
            $('#disabled-btn').show()
            $('#get-valcode').hide()
            $('#remain-time').html('60')
            timer = setInterval(function(){
                $('#remain-time').html(parseInt($('#remain-time').html())-1)
                if(parseInt($('#remain-time').html())<=10){
                $('#remain-time').css('color','red')
                }
            },1000)
            //清除计时器
            setTimeout(function(){
                clearInterval(timer)
                $('#disabled-btn').hide()
                $('#get-valcode').show()
            },1000*60)
        }
        function openBank(){
             deadline()
                $('#bank-open').hide();
                $(".car-account-bank").css("display", 'none')
                $('#code-phone').val(JSON.parse(j2aCls.GetToken())['phone'])
                $('#message_check').show();
                let obj = {}
                obj.uid = JSON.parse(j2aCls.GetToken())['did']
                obj.token = JSON.parse(j2aCls.GetToken())['token']
                obj.category = 'WS'
                obj.function = 'sendRegSms'
                obj.ext = 'send_msg'
                sendMsg(JSON.stringify(obj))
        }
        $('#sure-btn').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            if($('#sure-contract').is(':checked')){
               getUserInfo()
            }else{
                addToast('请认真阅读并勾选协议');
                return;
            }
            
        })
        $('#get-valcode').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            let obj = {}
            obj.uid = JSON.parse(j2aCls.GetToken())['did']
            obj.token = JSON.parse(j2aCls.GetToken())['token']
            obj.category = 'WS'
            obj.function = 'sendRegSms'
            obj.ext = 'send_msg'
            sendMsg(JSON.stringify(obj))
        })
        $('#sure-cancel').on('touchend',function(){
            stopTouchendPropagationAfterScroll()
            $('#bank-open').hide()
        })
        //手机号操作
        $('#code-input').on('input',function(){
            if($(this).val().length==6){
                $('#code-sure').removeClass('weui-btn_disabled');
            }else{
                $('#code-sure').addClass('weui-btn_disabled');
            }
        })
        $('#code-sure').on('touchend',function(){
            if($('#code-input').val().length == 6){
                  stopTouchendPropagationAfterScroll();
                let obj = {}
                obj.uid = JSON.parse(j2aCls.GetToken())['did']
                obj.vcode = $('#code-input').val().trim()
                obj.token = JSON.parse(j2aCls.GetToken())['token']
                obj.category = 'WS'
                obj.function = 'updateValidateCode'
                obj.ext = 'recode'
                sendMsg(JSON.stringify(obj))
                 $('#message_check').hide();
            }else{
                
            }
        })
        $('#sji_rz').on('touchend',function(){
            $('#si_ji_xing_xi').css('display','none');
            $('.car-certify').css('display','block');
        })
        /*注册*/
        let isClick = true
        $('#get_code').on('click',function(){
            isClick = true
            const obj={};
            let phone=$('#rphone').val();
            if(!phone||!isMobile_comm(phone)){
                addToast('手机号格式不正确');
                return;
            }
            obj.phone = phone;
            obj.category = 'YZ'
            obj.function='send';
            obj.ext='vertify_code';
            sendMsg(JSON.stringify(obj));
        })
        //获取货源单二维码
        $('#show-code').on('touchend',function () {
            $('#code-panel').find('img').attr('src','/php/srv/?msg={"function":"sourceQrcode","rid":"'+$('#data_rid').val()+'","token":"'+JSON.parse(j2aCls.GetToken())['token']+'"}');
            $('#code-panel').toggle();
        })
		//注册用户
		{
			 $('#register-work').on('touchend',function(){
                stopTouchendPropagationAfterScroll();
                const obj={};
                let t=$('#rform').serializeArray();
                $.each(t,function(){
                    obj[this.name]=this.value;
                })
                if(!isMobile_comm(obj.phone)){
                    addToast('手机号格式不正确')
                    return;
                }
                if(!obj.phone||!$('#vcode').val()||!$('#rpwd').val()||!$('#rerpwd').val()){
                    addToast('必填项不能为空')
                    return;
                }
                if(obj.psw_a!=$('#rerpwd').val()){
                    addToast('两次密码不一致')
                    return;
                }
                if(!isClick){
                    addToast('请点击获取验证码')
                    return;
                }
                obj.phone = $("#rphone").val()
                obj.user= obj.phone;
                obj.vcode = $('#vcode').val()
                obj.function='addUser'
                obj.role='driver';
                obj.psw=obj.psw_a;
                obj.psw_b=obj.psw;
                obj.ext = 'addUser'
                // 一分钟后清除点击
                // setTimeout(() => {
                //     isClick = false
                // },1000*60*3)
                sendMsg(JSON.stringify(obj))
            }) 
		}
        // 查看运输合同
        {
            $('.check-tld').on('touchend',function(){
                stopTouchendPropagationAfterScroll()
                $('#tld-transport').slideDown()
            })
            $('.tld-transport-back').on('touchend',function(){
                stopTouchendPropagationAfterScroll()
                $('#tld-transport').slideUp()
            })
        }
        //忘记密码
        {
	       $('#forget-work').on('touchend',function(){
                stopTouchendPropagationAfterScroll();
                const obj={};
                let t=$('#rform').serializeArray();
                $.each(t,function(){
                    obj[this.name]=this.value;
                })
                if(!isMobile_comm(obj.phone)){
                    addToast('手机号格式不正确')
                    return;
                }
                if(!obj.phone||!$('#vcode').val()||!$('#pass').val()||!$('#rerpwd').val()){
                    addToast('必填项不能为空')
                    return;
                }
                if(obj.password!=$('#rerpwd').val()){
                    addToast('两次密码不一致')
                    return;
                }
                obj.phone = $("#rphone").val()
                obj.vcode = $('#vcode').val()
                obj.function='verification'
                obj.category = 'WJ'
                obj.psw=obj.pass;
                obj.ext = 'forget_pwd'
                sendMsg(JSON.stringify(obj))
            }) 
        }
        //获取已完成货源单
        {
            $('#finished_sources').on('touchend',function(){
                stopTouchendPropagationAfterScroll()
                let obj = {
                    token:JSON.parse(j2aCls.GetToken())['token'],
                    gid:JSON.parse(j2aCls.GetToken())['uid'],
                    function:'fr_lik_source',
                    category:'CX',
                    ext:'finished_sources'
                }
                sendMsg(JSON.stringify(obj))
            })
        }
        /*登录验证*/
      $("#id_submit").on('touchend',function () {
          stopTouchendPropagationAfterScroll();
            var obj = {};
            var t = $('#login_form').serializeArray();
            $.each(t, function() {
                obj[this.name] = this.value;
            });
            if(!obj.user||!obj.psw){
                addToast('用户名或密码不能为空')
                return;
            }
            obj.function = "login";
            obj.ext = 'login_success'
            sendMsg(JSON.stringify(obj));
        })
        $("#id_valid").on("click",function () {
            $(this).attr("src","/php/srv/vt.php");
        })
        $("#register_btn").on("click",function () {
            $(".is-title").css("display",'none');
            $(".is-register").css("display",'none');
            $(".is-btn").css("display",'none');
            $(".is-title").eq(0).css("display",'block');
            $(".is-register").eq(0).css("display",'block');
            $(".is-btn").eq(0).css("display",'block');
            $(".login").css("display",'none');
            $(".register").css("display",'block');
        })
        $("#forget_pwd").on('click',function () {
            $(".login").css("display",'none');
            $(".is-title").css('display','none')
            $(".is-title").eq(1).css('display','block')
            $(".is-register").css("display",'none')
            $(".is-register").eq(1).css("display",'block')
            $(".is-btn").css("display",'none')
            $(".is-btn").eq(1).css("display",'block')
            $(".register").css("display",'block');
        })
        /*发布货源样式修改*/
        $("#measure-type").on('change',function () {
            $(".charter-type").css("display",'none');
            //表单数据清零
            $(".goods_weight").val('');
            $('.goods_volume').val('');
            $('#unitprice').val('');
            $("#total-price").val('')
            $("#car-num").val('');
            $("#one_carweight").val('');
            switch($(this).val()){
                case 'weight':
                    $(".type-one").css("display",'block');
                    break;
                case 'cubic':
                    $(".type-two").css("display",'block');
                    break;
                case 'wholeCar':
                    $(".type-one").css('display','block');
                    $(".type-three").css("display",'block');
                    break;

            }
        })
        $(".postition").on('touchstart',function () {
                $(this).css("backgroundColor","#eee")
                $(this).find("li div div .release-btn").css("backgroundColor","#eee")
        })
        //发布货源-地址选择
        $(".postition").on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            init();
            $(this).css("backgroundColor","white")
            $(this).find("li div div .release-btn").css("backgroundColor","white")
            $(".home-goods-release").css("display",'none')
            $(".postition-title").css('display','none');
            $(".btn-departure_sure").css("display",'none');
          if($(this).data('id')=='start'){
              postition_choose_page=0;
              $(".postition-title").eq(0).css("display",'block');
              $(".btn-departure_sure").eq(0).css("display",'block');
          }else if($(this).data('id')=='end'){
              postition_choose_page=1;
              $(".postition-title").eq(1).css("display",'block')
              $(".btn-departure_sure").eq(1).css("display",'block');
          }
            $("#start_postition").css("display",'block');
            $(this).css("backgroundColor","white")
            $(this).find("li div div .release-btn").css("backgroundColor","white")
            //获取常用地址数据
            let obj = {}
            obj.token = JSON.parse(j2aCls.GetToken())['token']
            obj.function = 'getAddresses'
            obj.ext = 'normal_address'
            sendMsg(JSON.stringify(obj))
        })
        //发布货源-常用地址切换
        $(document).on('change','#select-address',function(){
            stopTouchendPropagationAfterScroll()
            $('#keyword').val($(this).val())
            searchKeyword();
        })
        $("#dialog-hide").on('click',function () {
            $("#androidDialog1").css("display",'none')
        })
        // 货源加载更多操作
        function loadMore(){
            let {total,start} = JSON.parse($('.page-data').val())
            var obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getSources';
            obj.start = start
            obj.count = 20
            obj.sort = 'otag'
            obj.order = 'desc'
            obj.ext = 'load_more_sources'
            sendMsg(JSON.stringify(obj));
            let data = {
                total,
                start:start+20
            }
            $('.page-data').val(JSON.stringify(data))
        }
        //车源加载更多
        function carLoadMore(){
            let {total,start} = JSON.parse($('.car-page-data').val())
            var obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getCars';
            obj.start = start
            obj.count = 50
            obj.sort = 'reg'
            obj.order = 'desc'
            obj.ext = 'load_more_cars'
            sendMsg(JSON.stringify(obj));
            let data = {
                total,
                start:start+50
            }
            $('.car-page-data').val(JSON.stringify(data))
        }
             //货源加载更多
        $(document).on('touchend','.load-more',function(){
            stopTouchendPropagationAfterScroll()
            loadMore()
        })
        // 车源加载更多
        $(document).on('touchend','.car-load-more',function(){
            stopTouchendPropagationAfterScroll()
            carLoadMore()
        })
        /*总价计算*/
        //1.重量方式总价计算
        $(".goods_weight").on('blur',function(){
            //计算每车载重
            if($(this).val()>0&&$('#car-num').val()>0){
                let price=$(this).val()/$("#car-num").val();
                $("#one_carweight").val(price);
            }else{
                $("#one_carweight").val('');
            }
            if(!$("#car-num").val()){
                if($(this).val()>0&&$("#unitprice").val()>0){
                    $("#total-price").val($(this).val()*$("#unitprice").val())
                }else{
                    $("#total-price").val('')
                }
            }
        });
        //2.体积方式总价计算
        $(".goods_volume").on('blur',function () {
            if($(this).val()>0&&$("#unitprice").val()>0){
                $("#total-price").val($(this).val()*$("#unitprice").val())
            }else{
                $("#total-price").val('')
            }
        })
        //包车方式总价计算
        $("#car-num").on('blur',function(){
            if($(this).val()>0){
                if($(".goods_weight").val()>0){
                    let price=$(".goods_weight").val()/$(this).val();
                    $("#one_carweight").val(price);
                }else{
                    $("#one_carweight").val('');
                }
            }
            if($(this).val()>0){
                if($("#unitprice").val()>0){
                    $("#total-price").val($(this).val()*$("#unitprice").val())
                }else{
                    $("#total-price").val('')
                }
            }
        })
        $("#unitprice").on('blur',function () {
            if(!$("#car-num").val()){
                if($(this).val()>0&&$(".goods_weight").val()>0){
                    $("#total-price").val($(this).val()*$(".goods_weight").val())
                }else{
                    $("#total-price").val('')
                }
            }
           if($(this).val()>0&&$(".goods_volume").val()>0){
               if($(".goods_volume").val()>0){
                   $("#total-price").val($(this).val()*$(".goods_volume").val())
               }else{
                   $("#total-price").val('')
               }
            }
           if($(this).val()>0&&$("#car-num").val()>0) {
               if ($("#car-num").val() > 0) {
                   $("#total-price").val($(this).val() * $("#car-num").val())
               }else{
                   $("#total-price").val('')
               }
           }
        })
        /*总价计算结束*/
        var obj_latlan={
            "start":{},
            "end":{}
        };
        var a,b;
        var arr1=['',''];
        /*获取地址*/
        $(document).on('touchstart',".postition_item",function () {
            $('.postition_item').css('background','white');
            $(this).css("background",'#eee')
        })
        $(document).on('touchend',".postition_item",function () {
            //清除数据
            $('#keyword').val('')
            $('.local_postition').html('')
            $(this).css("background",'white');
            let len=$(this).find('div .pos-addr').html().indexOf('<');
            let str=$(this).find('div .pos-addr').html().substring(0,len)
            //获得起始位置
            let startLan=$(this).find("div .pos-addr").html().indexOf('{');
            let endLan=$(this).find("div .pos-addr").html().indexOf('}');
            let startP=JSON.parse($(this).find('div .pos-addr').html().substring(startLan,endLan+1))
            if(postition_choose_page==0){
                $("#start_postition_content").val(str+'('+$(this).find('div .pos-name').html()+')');
                //获取行政编码
                let area={};
                area.loadingAddr=str.trim();
                let URL='https://restapi.amap.com/v3/geocode/geo?key=89ef6166b99895040a01182620d6c54d&address='+str;
                $.ajax({
                    url:URL,
                    dataType:"json",
                    type:"get",
                    success:function(data) {
                        let addr=data.geocodes[0]
                        area.province = {"name":addr.province,"code":""}
                        area.city = {"name":addr.city,"code":addr.citycode}
                        area.district = {"name":addr.district,"code":""}
                        area.country = {"name":"","code":""}
                        area.township = {"name":"","code":""}
                        area.address = addr.adcode;
                        $("#start_postition_content_1").val(JSON.stringify(area));
                        arr1[0]=addr.location;
                        if(arr1[0]&&arr1[1]){
                            URL='https://restapi.amap.com/v3/distance?key=89ef6166b99895040a01182620d6c54d&origins='+arr1[0]+'&destination='+arr1[1];
                            $.ajax({
                                url:URL,
                                dataType:"json",
                                type:"get",
                                success:function (data) {
                                    let koils=(parseFloat(data.results[0].distance)/1000).toFixed(2);
                                    $("#distance").val(koils)
                                },
                                error:function () {
                                    alert('网络错误，请稍后再试！');
                                }
                            })
                        }
                    },
                    error:function(){
                        alert('网络错误，请稍后再试！');
                    }
                });
                //end
                obj_latlan.start=JSON.parse($(this).find('div .pos-addr span').html());
                $("#total_latlng").val(JSON.stringify(obj_latlan));
            }else{
                $("#end_postition_content").val(str+'('+$(this).find('div .pos-name').html()+')');
                //获取行政编码
                let area={};
                area.unloadingAddr=str.trim();
                let URL='https://restapi.amap.com/v3/geocode/geo?key=89ef6166b99895040a01182620d6c54d&address='+str;
                $.ajax({
                    url:URL,
                    dataType:"json",
                    type:"get",
                    success:function(data) {
                        let addr=data.geocodes[0]
                        area.province = {"name":addr.province,"code":""}
                        area.city = {"name":addr.city,"code":addr.citycode}
                        area.district = {"name":addr.district,"code":""}
                        area.country = {"name":"","code":""}
                        area.township = {"name":"","code":""}
                        area.address = addr.adcode;
                        $("#end_postition_content_1").val(JSON.stringify(area));
                        arr1[1]=addr.location;
                        if(arr1[0]&&arr1[1]){
                            URL='https://restapi.amap.com/v3/distance?key=89ef6166b99895040a01182620d6c54d&origins='+arr1[0]+'&destination='+arr1[1];
                            $.ajax({
                                url:URL,
                                dataType:"json",
                                type:"get",
                                success:function (data) {
                                    let koils=(parseFloat(data.results[0].distance)/1000).toFixed(2);
                                    $("#distance").val(koils)
                                },
                                error:function () {
                                    alert('网络错误，请稍后再试！');
                                }
                            })
                        }
                    },
                    error:function(){
                        alert('网络错误，请稍后再试！');
                    }
                });
                //end
                obj_latlan.end=JSON.parse($(this).find('div .pos-addr span').html());
                $("#total_latlng").val(JSON.stringify(obj_latlan));
            }
            $("#start_postition").css("display",'none');
            $(".home-goods-release").css("display",'block');
        })
        /*发布货源链接后台*/
        $("#btn-submit").on('click',function () {
            if(!$("#is-agree").is(":checked")){
                $("#androidDialog1").css("display",'block');
                return;
            }else{
                var obj= {};
                var t = $('#id_form').serializeArray();
                $.each(t, function() {
                    obj[this.name] = this.value;
                });
                obj.uid=order_id;//所属用户id
                obj.gid=obj.consignor;//货主id
                obj.assign=0;
                obj.oneCarPrice=0.0;
                obj.volume=0;
                obj.loadIssue = '0'
                obj.operation=obj.businessType;
                obj.token = JSON.parse(j2aCls.GetToken())['token'];
                obj.loadIssue=parseInt(obj.loadIssue);
                obj.weight=obj.weight==''?0.0:parseFloat(obj.weight);
                obj.unitPrice=obj.unitPrice==''?0.0:parseFloat(obj.unitPrice);
                obj.assignNum=obj.assignNum==''?0.0:parseInt(obj.assignNum);
                obj.totalPrice=obj.totalPrice==''?0.0:parseFloat(obj.totalPrice);
                obj.function = "addSource";
                obj.ext = 'addSource'
                sendMsg(JSON.stringify(obj));
            }
        })
        //收款
        $(document).on('touchend','#get-cash-out',function(e){
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='recivePayment';
            obj.category='WS';
            obj.bid=$(this).data('id');
            obj.ext='receive_payment';
            sendMsg(JSON.stringify(obj))
        })
        /*当前位置选择*/
        // 城市选择按钮
        $("#keyword").on('input',function () {
            if($("#keyword").val()==''){
                $(".local_postition").html('');
            }
           searchKeyword();
        })
        //车源页
        $(document).on('touchend',".place_order",function () {
            if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                addToast('无此操作权限');
                return;
            }
            stopTouchendPropagationAfterScroll();
            order_id=$(this).parent().parent().data('uid');
           $(".weui-tab-edit").addClass('page-hide');
            var obj = {};
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "getBusinessType";
            obj.ext = 'business-type';
            sendMsg(JSON.stringify(obj));
            $(".home-goods-release").css("display",'block')
        })
        //货主-查看路线
        $('#check-line').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $('.goods-order-details').hide();
            $('.transport-line-page').show();
            $('#postition_latlng').val();
            //获得值
           // _roadinit($('#postition_latlng').val());
        })
        $('.transport-back').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $('.transport-line-page').hide();
            $('.goods-order-details').show();
        })
        //货主-我的
        $('.page-goods-mine').on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getMyinfo';
            obj.ext = 'goods_myinfo'
            sendMsg(JSON.stringify(obj));
            $('.weui-tab-edit').addClass('page-hide');
            info_page='goods';
            $('.home-goods-mine').css('display', 'block')
        })
        //货主-我的货源
        $('.page-goods-resources').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            current_order_details='resource_page'
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
			obj.start = 0
			obj.count = 1000
            obj.function='getSources';
            if(JSON.parse(j2aCls.GetToken())['uid']){
                obj.conditions={
                    gid:JSON.parse(j2aCls.GetToken())['uid']
                }
            }
            obj.ext = 'myresources';
            sendMsg(JSON.stringify(obj));
            $(".weui-tab-edit").addClass('page-hide');
            $('.home-goods-mineresource').css('display', 'block')
            isGoodsResource=1;
        })
        //车主-车辆管理
        $('.page-car-carmanage').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            isToptabCarDetails=1;
            var obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getCars';
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            obj.ext = 'car_manage'
            sendMsg(JSON.stringify(obj));
            $(".weui-tab-edit").addClass('page-hide');
            $('.home-car-carmanage').css('display', 'block')
        })
        //筛选货源
        $('#search-goods').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
        })
        //抢单
        $(document).on('touchend','.take_order_btn',function (e) {
			e.stopPropagation();
			stopTouchendPropagationAfterScroll()
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.gid = $(this).data('gid')
                j2aCls.SetToken(JSON.stringify(store))
            }
            var obj = {};
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "getCars";
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            obj.ext = 'grab-order';
            sendMsg(JSON.stringify(obj));
        })
        $('#choose-cancel').on('click',function(){
            $('.car-change').hide();
        })
        $('#unload-cancel').on('touchend',function(){
            $('.unload-goods-page').hide();
        })
        $('#load-cancel').on('touchend',function(){
            $('.load-goods-page').hide();
        })
        //抢单-确定车辆id
        $(document).on('touchend','.get-car',function(){
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.cid = $(this).data('cid')
                j2aCls.SetToken(JSON.stringify(store))
            }
        })
        //银行开通流程
        $('#bank-fir').on('touchend',function () {
            $('.bank-fir-page').hide();
            $('.bank-sec-page').show();
        })
        $('#bank-sec').on('touchend',function () {
            $('.bank-sec-page').hide();
            $('.bank-thr-page').show();
        })
        $('#bank-thr').on('touchend',function () {
            if(!$('#make-sure').is(':checked')){
                addToast('请先阅读并勾选协议');
                return;
            }
            $('.bank-thr-page').hide();
            $('#bank-open').show();
        })
        $('.sec-back').on('touchend',function () {
            $('.bank-sec-page').hide();
            $('.bank-fir-page').show();
        })
        $('.thr-back').on('touchend',function () {
            $('.bank-thr-page').hide();
            $('.bank-sec-page').show();
        })
        //车主-添加银行卡
        $('#add-bank').on('touchend',function(){
            const obj = $('#bankAdd_form').serializeObject_comm();
            obj.bankCardPic =$('#bank-id').val();
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "addBankCard";
            obj.ext='bankadd';
            obj.uid=JSON.parse(j2aCls.GetToken())['did'];
            sendMsg(JSON.stringify(obj));
        })
        //银行卡细节
        $(document).on('touchend','#car-bank .bankcard-item',function(){
            $('#car-account-bank').hide();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getBankCards';
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            obj.ext='car_bank_info';
            sendMsg(JSON.stringify(obj))
        })
        $(document).on('touchend','#goods-bank .bankcard-item',function(){
            $('.goods-account-bank').hide();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getBankCards';
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['uid']
            }
            obj.ext='goods_bank_info';
            sendMsg(JSON.stringify(obj))
        })
        $('.goods_bank-back').on('touchend',function () {
            $('.goods-bank-detail').hide();
            $('.goods-account-bank').show();
        })
        //删除银行卡
        $('#bank-del').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $('#bank-del-page').show();
        })
        $('#bank-del-cancel').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $('#bank-del-page').hide();
        })
        $('#bank-del-sure').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            let id=null;
            try {
                const obj = {};
                if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                    id=$('#data_bank-id').val();
                    obj.ext='bank_del';
                }else{
                    id=$('#data_gbank-id').val();
                    obj.ext='goods_bank_del';
                }
                obj.token = JSON.parse(j2aCls.GetToken())['token'];
                let arr=[];
                arr.push(id);
                obj.sids=arr;
                obj.function = "deleteBankCards";
                sendMsg(JSON.stringify(obj));
            } catch (error) {
                addToast(error)
            }
       
        })
        // 检查版本更新
        $('.check-version').on('touchend',function(){
           
        })
        //删除银行卡
        $('#goods_bank-del').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $('#bank-del-page').show();
        })
        //货主-添加银行卡
        $('#add-bank-goods').on('touchend',function(){
            const obj = $('#goods_bankAdd_form').serializeObject_comm();
            obj.bankCardPic =$('#goods_bank-id').val();
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "addBankCard";
            obj.ext='bankadd';
            obj.uid=JSON.parse(j2aCls.GetToken())['uid'];
            sendMsg(JSON.stringify(obj));
        })
        /*司机订单操作*/
            //取消订单
        $(document).on('touchend','#cancel-goods',function(){
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.sid=$('#thisid').val();
            obj.function = "cancelWaybill";
            sendMsg(JSON.stringify(obj))
        })
            //卸货
        $(document).on('touchend','#unload-goods',function(e){
            e.stopPropagation();
            stopTouchendPropagationAfterScroll()
            if($('.load-weight').val()){
                $('.unload-weight').val($('.load-weight').val());
            }else{
                $('.unload-weight').val(JSON.parse(j2aCls.GetToken())['weight']);
            }
            $('#unload-time').val(getFormat())
            $('.unload-goods-page').show();
        })
        //取消运单
        $(document).on('touchend','#cancel-order',function(e){
            stopTouchendPropagationAfterScroll()
            e.stopPropagation()
            const obj = {};
            obj.sid = $(this).data('id');
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "cancelWaybill";
            obj.ext = 'cancel_bill'
            sendMsg(JSON.stringify(obj))
        })
        $('#unload-work').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            if($('.unload-weight').val()<=0){
                addToast('卸货重量异常');
                return;
            }
            if(!$('#img_unload_fid').val()){
                addToast('请上传卸货凭证');
                return;
            }
            // 卸货
            var b = $('.unload-weight').val()
            var c = $('#img_unload_fid').val();
            let time = $('#unload-time').val().replace(/T/g," ")
            let d = new Date(time);
            let x = null
            if(isAndroid()){
                x = Number(d.getTime()) / 1000
            }else{
                x = Number(new Date(time.replace(/-/g,'/')).getTime()) / 1000
            }
            var unload = {
                value: b,
                wbimg: c,
                ttag: x
            };
            var params1 = JSON.stringify(unload)
            var newobj = {};
            newobj.token = JSON.parse(j2aCls.GetToken())['token'];
            newobj.function = "unloadddingWaybill";
            newobj.ext = 'unloadddingWaybill'
            if($('#thisid').val()){
                newobj.bid =$('#thisid').val();
            }else{
                newobj.bid =$('#unload-goods').data('id');
            }
            newobj.params = params1;
            sendMsg(JSON.stringify(newobj))
        })
        // 防抖
        function debounce(fn,delay){
            let timer = null 
            return function() {
                if(timer){
                    clearTimeout(timer) 
                    timer = setTimeout(fn,delay) 
                }else{
                    timer = setTimeout(fn,delay) 
                }
            }
        }
        //装货
        $(document).on('touchend','#load-goods',function(e){
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
            $('.load-time').val(getFormat());
            $('.load-goods-page').show();
        })
        function loadGoods(){
            stopTouchendPropagationAfterScroll();
            if(Number($('.load-weight').val()) <= 0){
                addToast('装货重量异常');
                return;
            }
            if(!$('.load-weight').val()){
                addToast('装货重量不能为空');
                return;
            }
            let time = $('#load-time').val().replace(/T/g," ")
            let d = new Date(time);
            let x = null
            if(isAndroid()){
                x = Number(d.getTime()) / 1000
            }else{
                x = Number(new Date(time.replace(/-/g,'/')).getTime()) / 1000
            }
            var y = $('.load-weight').val()
            var z = $('#img_load_fid').val();
            var load = {
                    value: y,
                    wbimg: z,
                    ttag: x
                };
            $('.load_weight').html(y);
            var params1= JSON.stringify(load);
            const objss = {};
            objss.token = JSON.parse(j2aCls.GetToken())['token'];
            objss.function = "loadddingWaybill";
            objss.ext = 'loadddingWaybill'
            if($('#thisid').val()){
                objss.bid =  $('#thisid').val();
            }else{
                objss.bid=$('#load-goods').data('id');
            }
            objss.params = params1;
            sendMsg(JSON.stringify(objss))
        }
        document.querySelector('#load-work').addEventListener('touchend',debounce(loadGoods,1000))
        //货主订单详情
        $(document).on('touchend','.consignor-details',function(){
            //请求数据
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            if($(this).data('role')=='full'){
                obj.function='fr_lik_waybills';
                obj.category = 'CX'
                obj.sid = $(this).data('sid')
                obj.ext = 'goods_finished'
                sendMsg(JSON.stringify(obj))
                $('.home-car-ordermanage').hide();
                $('.weui-tab-edit').addClass('page-hide');
                $('.car-ordermanage-detail').show();
                //获取评价数据
                {
                    obj.sid = undefined
                    obj.function = 'fr_gt_evaluat'
                    obj.category = 'PL'
                    obj.bid = $(this).data('id')
                    obj.uid = JSON.parse(j2aCls.GetToken())['uid']
                    obj.ext = 'is_view'
                    sendMsg(JSON.stringify(obj))
                }
            }else{
                {
                    let store = JSON.parse(j2aCls.GetToken())
                    store.consignor = 'dede'
                    j2aCls.SetToken(JSON.stringify(store))
                }
                obj.function='fr_gc_waybills';
                obj.category = 'CXC'
                obj.sid = $(this).data('sid')
            }
            obj.ext = 'consignor_orderdetails';
            sendMsg(JSON.stringify(obj));
            $('.home-car-ordermanage').hide();
            $('.weui-tab-edit').addClass('page-hide');
            $('.car-ordermanage-detail').show();
            //获取评价数据
            {
                obj.sid = undefined
                obj.function = 'fr_gt_evaluat'
                obj.category = 'PL'
                obj.bid = $(this).data('id')
                obj.uid = JSON.parse(j2aCls.GetToken())['uid']
                obj.ext = 'is_view'
                sendMsg(JSON.stringify(obj))
            }
        })
        $(document).on('touchend','.car_details',function(){
            //请求数据
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function = 'getWaybillsHis'
            obj.conditions = {
                sid:$(this).data('sid')
            }
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.card = 'no'
                j2aCls.SetToken(JSON.stringify(store))
            }
            obj.ext = 'consignor_orderdetails';
            sendMsg(JSON.stringify(obj));
            $('.home-car-ordermanage').hide();
            $('.weui-tab-edit').addClass('page-hide');
            $('.car-ordermanage-detail').show();
            //获取评论数据
            obj.conditions = undefined
            obj.function = 'fr_gt_evaluat'
            obj.category = 'PL'
            obj.bid = $(this).data('id')
            obj.uid = JSON.parse(j2aCls.GetToken())['did']
            obj.ext = 'is_view'
            sendMsg(JSON.stringify(obj))
        })
        $(document).on('touchend','.car-unfull',function(){
            //请求数据
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function = 'getWaybills'
            obj.conditions = {
                sid:$(this).data('sid')
            }
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.card = 'no'
                j2aCls.SetToken(JSON.stringify(store))
            }
           obj.ext = 'consignor_orderdetails';
            sendMsg(JSON.stringify(obj));
            $('.home-car-ordermanage').hide();
            $('.weui-tab-edit').addClass('page-hide');
            $('.car-ordermanage-detail').show();
        })
        //添加车辆按钮
        $(document).on('touchend','#add_car',function(){
            stopTouchendPropagationAfterScroll();
            $('#add_car_hide').hide();
            $('.car_add_btn').hide();
            $('.home-car-carmanage').hide();
            $('.car-manage').css('display', 'none');
            $('.car_add_title').hide().eq(1).show();
            $('#car_info_add').show();
            $('.car-manage-detail').show();
        })
        //添加车辆
        $('#car_info_add').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            var obj = $('#carinfo_form').serializeObject_comm();
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.uid=JSON.parse(j2aCls.GetToken())['did']
            obj.function='addCar';
            obj.carLength = parseFloat(obj.carLength);
            obj.carTonnage = parseFloat(obj.carTonnage);
            obj.carCapacity = parseFloat(obj.carCapacity);
            obj.ext = 'addCar'
            sendMsg(JSON.stringify(obj));
        })
        //车辆信息修改
        $('#car_info_save').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            const obj={};
            let t=$('#carinfo_form').serializeArray();
            $.each(t,function(){
                obj[this.name]=this.value;
            })
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.uid=JSON.parse(j2aCls.GetToken())['did']
            obj.sid=JSON.parse(j2aCls.GetToken())['cid']
            obj.function='modifyCar'
            obj.ext = 'modifyCar'
            sendMsg(JSON.stringify(obj));
        })
        //评价
        $('#view-btn').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $('#view-content').val('');
            $('.all-page').hide();
            $('#view-page').show();
        })
        $('#give_view').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            if(!$('#view-content').val()){
                addToast('请输入评价');
                return;
            }
            const view={};
            view.token = JSON.parse(j2aCls.GetToken())['token'];
            view.function = 'fr_sv_evaluat';
            view.bid = $('#data-billid').val()
            view.consignor = $('#data-view-consignor').val()
            view.driver = $('#data-view-driver').val()
            view.category = 'PL'
            view.sid = $('#data_id').html()
            view.points = parseInt($('#grades').val())
            view.comment = $('#view-content').val();
            if(JSON.parse(j2aCls.GetToken())['role']=='driver'){
                    view.toid = JSON.parse(j2aCls.GetToken())['goodsid'];
                    view.uid = JSON.parse(j2aCls.GetToken())['did'];
                    view.bstatus = 2
            }else{
                    view.toid = JSON.parse(j2aCls.GetToken())['driverid'];
                    view.uid = JSON.parse(j2aCls.GetToken())['uid'];
                    view.bstatus = 1
            }
            view.ext='p_view';
            sendMsg(JSON.stringify(view));
        })
		$('#view-content').on('input',function(){
			$('#view-nums').html($(this).val().length)
		})
        $('.view-back').on('touchend',function(){
            $('#view-page').hide();
            $('.car-ordermanage-detail').show();
        })
        //货主认证
        $('#sure-info').on('touchend',function () {
            $('#bank-open').show();
        })
        $('#preventClick').on('touchend',function(){

        })
        //退出系统
        $('#car-exit').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $('#exit_page').show();
            //将数据清零
            {
                let store = {
                    user:JSON.parse(j2aCls.GetToken())['user'],
                    pwd:JSON.parse(j2aCls.GetToken())['pwd']
                }
                j2aCls.SetToken(JSON.stringify(store))
            }
            current_order_details=null;
            setTimeout(function(){
                addToast('退出成功');
                $('.all-page').hide();
                $('.weui-tab-edit').removeClass('page-hide');
                $(location).attr('href', 'index.html?'+new Date().getTime());
                window.location.reload()
                $('.all-page').hide();
                $('.weui-tab-edit').removeClass('page-hide');
                $('#home-index-tab').click()
            },1500)
        })
        $("#goods-exit").on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $('#exit_page').show();
            //将数据清零
            {
                let store = {
                    user:JSON.parse(j2aCls.GetToken())['user'],
                    pwd:JSON.parse(j2aCls.GetToken())['pwd']
                }
                j2aCls.SetToken(JSON.stringify(store))
            }
            current_order_details=null;
            setTimeout(function(){
                addToast('退出成功');
                $('.all-page').hide();
                $('.weui-tab-edit').removeClass('page-hide');
                $(location).attr('href', 'index.html?'+new Date().getTime());
                window.location.reload()
                $('.all-page').hide();
                $('.weui-tab-edit').removeClass('page-hide');
                $('#home-index-tab').click()
            },1500)
        })
    </script>
    <script>
            /*顶部tab切换*/
$('.main-body-navbar').find('div').on('touchend', function () {
    stopTouchendPropagationAfterScroll()
    var index = $(this).index();
    if(index!=0){
        $(".main-details").css("display",'none');
    }else{
        $(".main-details").css("display",'block');
    }
    $('.main-body-content').find('.content-group').css('display', 'none');
    $('.main-body-content').find('.content-group').eq(index).css('display', 'block');
    $(this).siblings().css({
        color:'#008c00',
        backgroundColor:"white"
    });
    $(this).css({
        color:'white',
        backgroundColor: "#008c00"
    });
})
$(document).on('touchend','#main-body-bar div',function(){
    $('#goods-order-group .main-order-group').hide();
    let index=$(this).index();
    $('#goods-order-group').find('.main-order-group').eq(index).show();
    switch(index){
        case 3:
        case 4:
            const objs={};
            objs.token=JSON.parse(j2aCls.GetToken())['token'];
            objs.category = 'CX'
            objs.count = 50
            objs.consignor = JSON.parse(j2aCls.GetToken())['name']
            objs.function='fr_lik_waybills';
            objs.ext = 'waybill_dt';
            sendMsg(JSON.stringify(objs))
            break;
    }
})
//货主-订单管理
//货主订单未完成
$('.page-goods-ordermanage').on('touchend',function () {    
    stopTouchendPropagationAfterScroll();
    const obj={};
    current_order_details='orderlist_page'
    obj.token=JSON.parse(j2aCls.GetToken())['token'];
    obj.function='getWaybills'
    obj.conditions={
        gid:JSON.parse(j2aCls.GetToken())['uid']
    };
    obj.ext = 'gorder_manage';
    sendMsg(JSON.stringify(obj))
    $(".weui-tab-edit").addClass('page-hide');
    $('.home-goods-ordermanage').css('display', 'block')
    isGoodsResource=0;
})

//个人信息页回退
$('#info-back').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    $('.personal_info').hide();
    if(info_page=='goods'){
        $('.home-goods-mine').show();
    }else{
        $('.home-car-mine').show();
    }
})
function getBill(){
	const obj={};
	obj.function='getWaybillsHis',
	obj.token=JSON.parse(j2aCls.GetToken())['token'];
	obj.start = 0
	obj.count = 1000
	obj.order = 'desc'
	obj.sort = 'otag'
	if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
		obj.conditions={
		    uid:JSON.parse(j2aCls.GetToken())['did'],
            status:'5'
		}
	}else{
		obj.conditions={
		    gid:JSON.parse(j2aCls.GetToken())['uid'],
            status:'5'
		}
	}
	obj.ext = 'payto_driver';
	sendMsg(JSON.stringify(obj));
}
function dateToTtp(str){
	let time = new Date(str)
	return (Date.parse(time)/1000)
}
//刷新筛选
$('#refresh-bill').on('touchend',function(){
	stopTouchendPropagationAfterScroll()
	getBill()
	$('.load-bill').show()
	setTimeout(()=>{
		$('.load-bill').hide()
	},1000)
})
$('#refresh-bill').on('touchend',function(){
	stopTouchendPropagationAfterScroll()
	getBill()
	$('.load-bill').show()
	setTimeout(()=>{
		$('.load-bill').hide()
	},1000)
})
$('#refresh-bill1').on('touchend',function(){
	stopTouchendPropagationAfterScroll()
	getBill()
	$('.load-bill').show()
	setTimeout(()=>{
		$('.load-bill').hide()
	},1000)
})
//筛选运费
$('#filter-bill').on('touchend',function(){
	stopTouchendPropagationAfterScroll()
	let startT = $('#car_start_time').html() + " 00:00:00"
	let endT = $('#car_end_time').html() + " 12:00:00"
	let start = dateToTtp(startT)
	let end = dateToTtp(endT)
	let filter = {
		start:start,
		end:end
    }
    {
        let store = JSON.parse(j2aCls.GetToken())
        store.filter = JSON.stringify(filter)
        j2aCls.SetToken(JSON.stringify(store))
    }
	getBill()
	$('.load-bill').show()
	setTimeout(()=>{
		$('.load-bill').hide()
	},1000)
})
//筛选运费
$('#filter-bill1').on('touchend',function(){
	stopTouchendPropagationAfterScroll()
	let startT = $('#car_start_time1').html() + " 00:00:00"
	let endT = $('#car_end_time1').html() + " 12:00:00"
	let start = dateToTtp(startT)
	let end = dateToTtp(endT)
	let filter = {
		start:start,
		end:end
	}
    {
        let store = JSON.parse(j2aCls.GetToken())
        store.filter = JSON.stringify(filter)
        j2aCls.SetToken(JSON.stringify(store))
    }
	getBill()
	$('.load-bill').show()
	setTimeout(()=>{
		$('.load-bill').hide()
	},1000)
})
// 车主-我的功能区
$('.mine-body').find('.mine-car-func').on('touchend', function () {
    stopTouchendPropagationAfterScroll();
    var index = $(this).index();
    switch (index) {
        case 0: $('.home-car-mine').css('display', 'none');
            $('.car-certify').css('display', 'block');
            const car_obj={};
            car_obj.token=JSON.parse(j2aCls.GetToken())['token'];
            car_obj.function='getUsers';
            car_obj.conditions={
                id:JSON.parse(j2aCls.GetToken())['did']
            }
            car_obj.ext = 'user_info'
            sendMsg(JSON.stringify(car_obj))
            break;
        case 1: 
            $('.home-car-mine').css('display', 'none');
            $('.car-statistic').css('display', 'block');
			let date = new Date()
			$('#car_end_time').html(date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate())
            current_page=$('.car-statistic');
			getBill()
			$('.load-bill').show()
			setTimeout(()=>{
				$('.load-bill').hide()
			},500)
            break;
        case 2:
            const object={};
            object.function='getCars',
            object.token=JSON.parse(j2aCls.GetToken())['token'];
            object.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            object.ext = 'car_manage'
            sendMsg(JSON.stringify(object));
            $('.home-car-mine').css('display', 'none');
            $('.car-manage').css('display', 'block');
            isToptabCarDetails=0;
            break;
        case 3: $('.home-car-mine').css('display', 'none');
            $('.car-view-details').css('display', 'block');
            break;
        case 4: $('.home-car-mine').css('display', 'none');
            $('.car-feadback').css('display', 'block');
            break;
        case 5: $('.home-car-mine').css('display', 'none');
			$('.car-notice-message').css('display', 'block');
			let sys_msg = {}
            sys_msg.token = JSON.parse(j2aCls.GetToken())['token']
            sys_msg.category = 'PL'
            sys_msg.function ='message_push_list'
            sys_msg.ext = 'sys_msg'
            sendMsg(JSON.stringify(sys_msg))
            break;
        case 6:
            $('.home-car-mine').css('display', 'none');
            $('#current-page').val('driver')
            $('.personal-change-pwd').show()
            break
		case 7:
			$('.home-car-mine').css('display', 'none');
			$('.car-aboutus').css('display', 'block');
    }
})
      //车主功能
      $('.page-car-resource').on('touchend', function () {
        $(".weui-tab-edit").addClass('page-hide');
        $('.home-car-resource').css('display', 'block')
        stopTouchendPropagationAfterScroll()
        resource_page=0;
        page=1;
        const obj={};
        obj.token=JSON.parse(j2aCls.GetToken())['token'];
        obj.start = 0
        obj.count = 1000
        obj.sort = 'otag'
        obj.order = 'desc'
        obj.function='getSources';
        obj.ext='driver_resources';
        sendMsg(JSON.stringify(obj));
})

$('.page-car-ordermanage').on('touchend',function () {
    stopTouchendPropagationAfterScroll();
    current_order_details='car_oredrdetails';
    const obj={};
    obj.token=JSON.parse(j2aCls.GetToken())['token'];
    obj.function='getWaybills';
    obj.conditions={
        uid:JSON.parse(j2aCls.GetToken())['did']
    }
   obj.ext='driver_orders';
    sendMsg(JSON.stringify(obj))
    $(".weui-tab-edit").addClass('page-hide');
    $('.home-car-ordermanage').css('display', 'block')
})
//车主-获取网商是否注册
$('.get-info').on('touchend',function(){
    let obj = {}
    obj.token=JSON.parse(j2aCls.GetToken())['token'];
    obj.function = 'getMyinfo'
    obj.ext = 'is_net_bank_on'
    sendMsg(JSON.stringify(obj))
})
//筛选货源单
$('#filter_btn').on('touchend',function(){
    $('.filter-group').hide();
    $('#inner-search-goods').show();
    $(".home-car-resource").hide();
    $('.page_goods_filter').css('display','block')
})
$(".filter-operation").on('touchend',function () {
    stopTouchendPropagationAfterScroll();
    $('.filter-group').hide();
    $('#outter-search-goods').show();
    $(".weui-tab-edit").addClass('page-hide');
    $('.page_goods_filter').css('display','block')
})
$('.cargoods-back').on('touchend',function(){
    $('.all-page').hide();
   if(resource_page==0){
        $('.home-car-resource').show();
   }else{
       $('.weui-tab-edit').removeClass('page-hide');
   }
})
//订单页处理：
$('#driver-menu div').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    $('#driver-menu').find('div').removeClass('driver-menu-on');
    switch ($(this).index()){
        case 0:
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getWaybills';
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            current_tab_page=3;
            obj.ext = 'home_orders'
            sendMsg(JSON.stringify(obj)); 
            break;
        case 1:
        case 2:
            const billObj={};
            billObj.token=JSON.parse(j2aCls.GetToken())['token'];
            billObj.function='getWaybillsHis';
            billObj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did'],
            }
            billObj.order = 'desc'
            billObj.sort = 'otag'
            billObj.start=0;
            billObj.count=100;
            billObj.ext = 'car_fullorder';
            sendMsg(JSON.stringify(billObj)); 

            break;
    }
    $(this).addClass('driver-menu-on')
})
$(document).on('touchend','.car_orderdetails',function(){
    const obj={};
    obj.token=JSON.parse(j2aCls.GetToken())['token'];
    if($(this).data('role')=='full'){
        obj.function='getWaybillsHis';
    }else{
        obj.function='getWaybills';
    }
    obj.conditions={
        sid:$(this).data('sid')
    }
    obj.ext = 'carsdetails'
    sendMsg(JSON.stringify(obj))

    $('.weui-tab-edit').addClass('page-hide')
    $('.car-ordermanage-detail').show();
    $('.is-hidden').show();
    obj.conditions = undefined
    obj.function = 'fr_gt_evaluat'
    obj.category = 'PL'
    obj.bid = $(this).data('id')
    obj.uid = JSON.parse(j2aCls.GetToken())['did']
    obj.ext = 'is_view'
    sendMsg(JSON.stringify(obj))
})
//登录效果验证
//煤油
            //提现
            $('#car-withdraw').on('touchend',function () {
                $('#bal').html($('#data_car-balance').html());
                //获取银行卡
                const obj={};
                obj.token=JSON.parse(j2aCls.GetToken())['token'];
                obj.function='getBankCards';
                obj.conditions={
                    uid:JSON.parse(j2aCls.GetToken())['did']
                }
                obj.ext='getbankcard';
                sendMsg(JSON.stringify(obj));
            })
            $('.cash-back').on('touchend',function () {
                $('#withdraw').hide();
                $('#recharge').hide();
                $('#confirm-withdraw').hide()
                
            })
            $('.getout').on('touchend',function () {
                if($(this).data('type') === 'withdraw'){
                     if(!$('#getmoneys').val()||parseFloat($('#getmoneys').val())<0){
                        addToast('提现金额有误');
                        return;
                    }
                    $('#withdraw').hide();
                    $('#cash_num').html($('#getmoneys').val());
                    $('#getmoneys').val('')
                    $('#withdraw-page').show();
                }else{
                    let obj = {}
                    let amounts=$('#getmoneys').val()*100;
                    obj.token=JSON.parse(j2aCls.GetToken())['token'];
                    obj.function='confirmWithDraw';
                    obj.category='WS';
                    obj.uid=JSON.parse(j2aCls.GetToken())['did']
                    obj.sms = $("#id_smsCode").val();
                    sendMsg(JSON.stringify(obj))
                    $('#confirm-withdraw').hide()
                }
            })
            $('#withdraw-cancel').on('touchend',function () {
                const obj={};
                obj.token=JSON.parse(j2aCls.GetToken())['token'];
                obj.function='withDraw';
                obj.category='WS';
                obj.uid=JSON.parse(j2aCls.GetToken())['did'];
                obj.amount=parseFloat($('#cash_num').html());
                obj.ext='withdraw_success';
                sendMsg(JSON.stringify(obj));
                $('#withdraw-page').hide();
            })
            //充值
            $('#cash-put').on('touchend',function () {
                $('#recharge').show();
            })
            $('#push').on('touchend',function () {
                if(!$('#push-num').val()||parseFloat($('#push-num').val())<0){
                    addToast('充值金额有误');
                    return;
                }
                $('#recharge').hide();
                $('#money').html($('#push-num').val());
                const pushObj={};
                pushObj.token=JSON.parse(j2aCls.GetToken())['token'];
                pushObj.function='consignorRecharge';
                pushObj.ext = 'consignorRecharge'
                pushObj.uid=JSON.parse(j2aCls.GetToken())['uid'];
                pushObj.amount=$('#push-num').val()*100;
                sendMsg(JSON.stringify(pushObj));
            })
            $('#finished').on('touchend',function () {
                const info={};
                info.token=JSON.parse(j2aCls.GetToken())['token'];
                info.function='getMyinfo';
                info.ext='goods_info';
                sendMsg(JSON.stringify(info));
                $('#finish-page').hide();
            })
$('#rerpwd').on('blur',function(){
    if($(this).val()!==$('#rpwd').val()){
        $('#error-msg').html('两次密码不一致，请重新输入');
        $('#error-msg').show()
    }else{
        $('#error-msg').hide()
    }
})
//证件上传
$('#choose_img_idf').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("idCard",'idcard_front');
})
$('#choose_img_idb').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("idCard",'idcard_back');
})
$('#choose_img_licence').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("driveLicense",'is_licence');
})
$('#choose_img_authority').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("driverCertificate",'authority');
})
//扫描二维码
$('.scan_code').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.OpenScaner();
})
//装货
$('#choose_img_load').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("waybill",'load_img');
})
//卸货
$('#choose_img_unload').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("waybill",'unload_img');
})
//装车单
$('#choose_img_loadcard').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("waybill",'carbill');
})
//回执单
$('#choose_img_loadback').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("waybill",'backbill');
})
//异常上报
$('#choose_img_errorup').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("waybill",'errorup');
})
//行驶证
$('#xsz').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("carLicense",'xsz_d');
})
//道路运输证
$('#choose_img_road').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("roadLicense",'road');
})
//人车合照
$('#choose_img_person').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("carAndMan",'person_and_car');
})
//上传银行卡照片
$('#get-bank-img').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("bankCard",'get_bank');
})
$('#get-goodsbank-img').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("bankCard",'get_goodsbank');
})
//挂车
$('#choose_img_trail').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("trailerLicense",'trailer');
})
$('#camera').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("carAndMan",'change_pic');
})
$('#camera1').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    j2aCls.DoSelectPictrue("carAndMan",'change_pic');
})
//
$('#agreement').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    $('#agreement_page').show();
})
$('.agree-back').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    $('#agreement_page').hide();
})
function getBaseData(func,status){
    const colorObj={};
    colorObj.token=JSON.parse(j2aCls.GetToken())['token'];
    colorObj.function = func
    colorObj.ext = status
    sendMsg(JSON.stringify(colorObj))              
}
//获取车辆信息
$('.edit_carModel').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    getBaseData('getCarType','getcartype')
})
//获取车辆颜色
$('.edit_plateColor').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    getBaseData('getPlateColorTypes','getcarcolor')
})
//获取车辆能源类型
$('.edit_carEnergy').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    getBaseData('getEnergyTypes','getcarenergy')
})
$(document).on('touchend',"#get_type div",function(){
    stopTouchendPropagationAfterScroll();
    $('#get_type div').removeClass('choose-on')
    $(this).addClass('choose-on');
    if(cur_type==0){
        $('.edit_carModel').val($(this).html());
        $('#edit_carModel').val($(this).data('val'));
    }else if(cur_type==1){
        $('.edit_plateColor').val($(this).html());
        $('#edit_plateColor').val($(this).data('val'));
    }else if(cur_type==2){
        $('.edit_carEnergy').val($(this).html());
        $('#edit_carEnergy').val($(this).data('val'));
    }
})
//车货主-我的银行卡等操作
$('.mine-data').find('.car-mine-data').on('touchend', function () {
    stopTouchendPropagationAfterScroll();
    var index = $(this).index();
    $('.home-car-mine').css('display', 'none');
    switch (index) {
        case 0: 
            $('.car-account-info').css('display', 'block');
            const balance={};
            balance.token=JSON.parse(j2aCls.GetToken())['token'];
            balance.function='balance';
            balance.category='WS';
            balance.uid=JSON.parse(j2aCls.GetToken())['did'];
            balance.ext = 'get_balance'
            sendMsg(JSON.stringify(balance));
            break;
        case 1:
            iscar=1;
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getBankCards';
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['did']
            }
            obj.ext='carbankinfo';
            sendMsg(JSON.stringify(obj));
            $('.car-account-bank').css('display', 'block');
            break;
        case 2: 
            $('.car-account-cash').css('display', 'block');
            break;
    }
})
$('.mine-data').find('.goods-mine-data').on('touchend', function () {
    stopTouchendPropagationAfterScroll();
    var index = $(this).index();
	     $('.home-goods-mine').css('display', 'none');
    switch (index) {
        case 0: 
            $('.goods-account-info').css('display', 'block');
            const info={};
            info.token=JSON.parse(j2aCls.GetToken())['token'];
            info.function='getMyinfo';
            info.ext='goods_info';
            sendMsg(JSON.stringify(info));
            //获取订单
            {
                let obj = {}
                obj.token = JSON.parse(j2aCls.GetToken())['token']
                obj.function = 'fr_lik_waybills'
                obj.category = 'CX'
                obj.ttag = '1609776000'
                obj.consignor = JSON.parse(j2aCls.GetToken())['name']
                obj.ext = 'goods_mine_bills'
                sendMsg(JSON.stringify(obj))
            }
            break;
        case 1:    
            iscar=0;
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getBankCards';
            obj.conditions={
                uid:JSON.parse(j2aCls.GetToken())['uid']
            }
            obj.ext='goodsbankinfo';
            sendMsg(JSON.stringify(obj));
            $('.goods-account-bank').css('display', 'block');
            break;
        case 2:
			$('.goods-account-cash').css('display', 'block');
			const info1={};
			info1.token=JSON.parse(j2aCls.GetToken())['token'];
			info1.function='getMyinfo';
			info1.ext='goods_info';
			sendMsg(JSON.stringify(info1));
            break;
    }
})

//货主-我的-订单-确认支付
{
    let obj = null
    $('.mine-menu-tab').find('div').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('.mine-menu-tab').find('div').removeClass('mine-bills-active')
        $(this).addClass('mine-bills-active')
        let i = $(this).index()
        $('.goods-mine-billss').find('.bills').addClass('page-hide')
        $('.goods-mine-billss').find('.bills').eq(i).removeClass('page-hide')
    })
    $(document).on('touchend','.goods-paybtn-func',function(){
        stopTouchendPropagationAfterScroll()
        obj = {
            id:$(this).data('id'),
            status:1,
            category:'PL',
            token:JSON.parse(j2aCls.GetToken())['token'],
            function:'consignor_status'
        }
        var total = $(this).data('amount')
        $('.actual-pay-cash').html(`合同运费为${total}元`)
        $('.consignor-sure-pay').show()
    
    })
    $('#cancel-cash').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('.consignor-sure-pay').hide()
    })
    $('#sure-cash').on('touchend',function(){
        let vals = $('.cash-val').val()
        if(!vals){
            addToast('确认支付金额不能为空')
            return 
        }
        $('.consignor-sure-pay').hide()
        obj.amount = vals
        obj.ext = 'sure_pay'
        sendMsg(JSON.stringify(obj))
        $('.cash-val').val('')
    })
}
            // 车主-账户信息操作
            $('.mine-body').find('.car-account-info').on('touchend', function () {
                stopTouchendPropagationAfterScroll();
                var index = $(this).index();
                switch (index) {
                    case 0: $('.car-account-info').css('display', 'none');
                        $('.caraccount-info_record').css('display', 'block');
                        break;
                    case 1: $('.car-account-info').css('display', 'none');
                        $('.caraccount-cash_record').css('display', 'block');
                        break;
                }
            })
//货源搜索
$('#outter-search-goods').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    const obj={};
    if(!$('#filter-sender').val()&&!$('#filter-phone').val()&&!$('#filter-name').val()){
        //全搜索
    }else{
        let search={};
        if($('#filter-sender').val()){
            search.consignor=$('#filter-sender').val()
        }
        if($('#filter-phone').val()){
            search.consignorPhone=$('#filter-phone').val()
        }
        if($('#filter-name').val()){
            search.name=$('#filter-name').val()
        }
        obj.conditions=search;
    }
    obj.start = 0
    obj.count = 10000
    obj.token=JSON.parse(j2aCls.GetToken())['token'];
    obj.function='getSources';
    obj.ext = 'filter_source'
    sendMsg(JSON.stringify(obj));
   //海云天
})
//货源大厅搜索
$('#inner-search-goods').on('touchend',function(){
    stopTouchendPropagationAfterScroll();
    const obj={};
    if(!$('#filter-sender').val()&&!$('#filter-phone').val()&&!$('#filter-name').val()){
        //全搜索
    }else{
        let search={};
        if($('#filter-sender').val()){
            search.consignor=$('#filter-sender').val()
        }
        if($('#filter-phone').val()){
            search.consignorPhone=$('#filter-phone').val()
        }
        if($('#filter-name').val()){
            search.name=$('#filter-name').val()
        }
        obj.conditions=search;
    }
    obj.start = 0
    obj.count = 10000
    obj.ext='driver_resources';
    obj.token=JSON.parse(j2aCls.GetToken())['token'];
    obj.function='getSources';
    sendMsg(JSON.stringify(obj));
   //海云天
})
        /*tab切换*/
        $('.weui-tab .weui-tabbar a' ).on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            //若当前active，则不行动
            $(this).addClass('weui-bar__item_on');

            let src = $(this).find('img').last().attr("src");
            if(src.indexOf("_active")==-1)
            {
                let imgs = src.split(".");
                imgs[0] = imgs[0] + "_active";
                src = imgs.join(".");
                $(this).find('img').last().attr("src", src);
            }
            $(this).siblings().removeClass('weui-bar__item_on');
            let siblings = $(this).siblings();
            $(siblings).each(function (id,sb) {
                src = $(sb).find('img').last().attr("src");
                let imgs = src.split(".");
                imgs[0] = imgs[0].replace("_active","");
                src = imgs.join(".");
                $(sb).find('img').last().attr("src",src);
            })
            // 设置所有底部Panel均不可见
            $(".panel_bottom").children().css("display","none");
            // 设置当前选中panel可见
            let cmd = $(this).find("p").last().text();
            switch(cmd){
                case "首页":
                    $('.panel-index').css("display","block");
                    current_tab_page=0;
                    break;
                case "货源":
                    $('.page-data').val('')
                    $('.panel-goods').css("display","block");
                    current_tab_page=1;
                    resource_page=1;
                    page=0;
                    //拿取货源数据
                    var obj={};
                    obj.token=JSON.parse(j2aCls.GetToken())['token'];
                    obj.function='getSources';
                    obj.start = 0
                    obj.count = 20
                    obj.sort = 'otag'
                    obj.order = 'desc'
                    obj.ext = 'home_source'
                    sendMsg(JSON.stringify(obj));
                    break;
                case "车源":
                    $('.panel-cars').css("display","block");
                    current_tab_page=2;
                    //拿取车辆信息
                    var obj={};
                    obj.start = 0
                    obj.count = 50
                    obj.sort = 'reg'
                    obj.order = 'desc'
                    obj.token=JSON.parse(j2aCls.GetToken())['token'];
                    obj.function='getCars';
                    obj.ext = 'home_cars'
                    sendMsg(JSON.stringify(obj));
                    break;
                case "订单":
                    //货主订单未完成
                    $('.panel-order').css("display","block");
                    current_tab_page=3;
                    current_order_details='order_page';
                    let role=JSON.parse(j2aCls.GetToken())['role'];
                    $('.is-hidden').hide();
                    $('.orders-both').hide();
                    {
                        const obj={};
                        obj.token=JSON.parse(j2aCls.GetToken())['token'];
                        obj.function='getWaybills'
                        obj.ext = 'home_orders'
                        if(role=='consignor'){
                            obj.conditions={
                                gid:JSON.parse(j2aCls.GetToken())['uid']
                            };
                            $('#goods-order').show();
                        }else{
                            obj.conditions={
                                uid:JSON.parse(j2aCls.GetToken())['did']
                            };
                            $('#driver-order').show();
                        }
                        sendMsg(JSON.stringify(obj));
                    }
                    break;
            }
            //tab切换获取数据
        })
    </script>
    <script>
        /*注册操作*/
        $("#register-close").on("click",function () {
           $("#single_page").hide();
        })
        $('#close_page').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $(".register").hide();
        })
        $("#login-close").on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $('.login').css("display",'none');
        })
        $(".ishidden_pwd").on("touchstart",function () {
            $(".hiddengroup").css("display",'none')
            if($(this).parent().index()==3) {
                $(".input_pwd").attr("type",'text');
                $(".hiddengroup").eq(1).css("display",'block')
            }else{
                $(".input_pwd").attr("type",'password');
                $(".hiddengroup").eq(0).css("display",'block')
            }
        })
        //常用信息-常用地址删除
        $(document).on('touchend','.address-del',function(){
            stopTouchendPropagationAfterScroll()
            let id = $(this).data('id')
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.sids = [id];
            obj.function = "deleteAddresses";
            obj.ext = 'address_del'
            sendMsg(JSON.stringify(obj));
        })
        /*银行卡*/
        $(document).on('touchend','.bank_data div .bankcard-item',function(){
            stopTouchendPropagationAfterScroll();
          if(iscar===1){
              $(".car-account-bank").css("display",'none')
          }else{
              $(".goods-account-bank").css("display",'none')
          }
           $(".bank-detail").css("display",'block')
        })
        $(".bank-back").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            $(".car-bank-detail").css("display",'none');
            if(iscar===1){
                $(".car-account-bank").css("display",'block')
            }else{
                $(".goods-account-bank").css("display",'block')
            }
        })
        $(".order-tab").find(".content-group").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            switch($(this).index()){
                case 0:
                    const obj_un={};
                    obj_un.token=JSON.parse(j2aCls.GetToken())['token'];
                    obj_un.conditions={
                        gid:JSON.parse(j2aCls.GetToken())['uid']
                    }
                    obj_un.function='getWaybills';
                    current_tab_page=3;
                    obj_un.ext = 'home_orders'
                    sendMsg(JSON.stringify(obj_un))
                    break;
                case 1:
                case 2:
                    //货主订单已完成
                    const obj={};
                    obj.token=JSON.parse(j2aCls.GetToken())['token'];
                    obj.function='fr_lik_waybills'
                    obj.category = 'CX'
                    obj.count = 50
                    obj.consignor = JSON.parse(j2aCls.GetToken())['name']
                    obj.ext = 'goods_bills_finished_outer'
                    sendMsg(JSON.stringify(obj))
                    break;
            }
            $(this).siblings().find('.tab-items').removeClass('order-item-on')
            $(this).find('.tab-items').addClass('order-item-on')
            $(".goods_order-group").css("display", 'none')
            $(".goods_order-group").eq($(this).index()).css("display", 'block')
        })
        $(".goods_order-group").find(".content").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            $(".weui-tab-edit").addClass("page-hide");
            $('.car-ordermanage-detail').show();
        })
        /*货源页-详情*/
        $(document).on('touchend',".goods-page .content-item",function () {
            stopTouchendPropagationAfterScroll();
            if(JSON.parse(j2aCls.GetToken())['role']=='consignor'){
                return;
            }
            var obj={};
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.gid = $(this).data('uid')
                j2aCls.SetToken(JSON.stringify(store))
            }
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.conditions={
                id:$(this).data('uid')
            }
            obj.ext = 'goodsdetails';
            obj.function='getSources';
            sendMsg(JSON.stringify(obj))
            $(".goods-order-details").css("display",'block');
            $(".weui-tab-edit").addClass('page-hide');
            $(".home-car-resource").css("display",'none')
        })
        $(".goods-back").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            $(".goods-order-details").css("display",'none');
            if(page==1){
                $('.home-car-resource').show();
            }else if(page==0){
                $('.weui-tab-edit').removeClass('page-hide');
            }
        })
        //点击查看图片
        $("#click-licence").on('click',function (e) {
            e.stopPropagation();
            $("#licence-check").toggle();
        })
        $('#pidf-click').on('touchend',function(e){
            stopTouchendPropagationAfterScroll();
            $("#pid-front").toggle();
        })
        $('#pidb-click').on('touchend',function(e){
            stopTouchendPropagationAfterScroll();
            $("#pid-back").toggle();
        })
        $('#licence-click').on('touchend',function(e){
            stopTouchendPropagationAfterScroll();
            $("#licence-img").toggle();
        })
    /*    /!*车源页-详情*!*/
        //按钮操作**************************************************************
        $(".btn-touchend").on("touchend",function (e) {
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
            $(".weui-tab-edit").addClass("page-hide");
            $(".home-goods-release").css("display",'block')
        })
        $(".goods-grob-order").on("touchend",function (e) {
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
        })
        /*订单页详情*/
        $(document).on('touchend','.order-page div .order-group .content-item',function () {
            stopTouchendPropagationAfterScroll();
            var index=$(this).index();
            var obj={};
            var uid=$(this).data('id');
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.conditions={
                id:uid
            }
            obj.ext = 'waybills'
            obj.function='getWaybills';
            sendMsg(JSON.stringify(obj))
           $(".car-ordermanage-detail").css("display",'block');
            $(".weui-tab-edit").addClass('page-hide');
            $(".is-goods-orderdetails").css("display",'none')
            $(".is-hidden").css("display",'none')
        })
        //货主订单已完成
        $(document).on('touchend','.main-order-group .main-order',function(){
            stopTouchendPropagationAfterScroll();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            if($(this).data('role')=='full'){
                obj.function='fr_lik_waybills';
                obj.category = 'CX'
                {
                    let store = JSON.parse(j2aCls.GetToken())
                    store.ss = 'no'
                    j2aCls.SetToken(JSON.stringify(store))
                }
            }else{
                obj.function='getWaybills';
                obj.conditions = {
                    sid:$(this).data('sid')
                }
            }
            obj.sid = $(this).data('sid')
            obj.ext = 'waybilldetails';
            sendMsg(JSON.stringify(obj))
            $(".details-group").hide();
            $("#ordermanagedetail").css("display",'none');
            $(".car-ordermanage-detail").css("display",'block')
            isCarOrdermanage=0;
            $(".is-goods-orderdetails").css("display",'none')
            $(".is-hidden").css("display",'none')
            //评价数据获取
            if(parseInt($(this).data('status')) > 2){
                obj.sid = undefined
                obj.function = 'fr_gt_evaluat'
                obj.category = 'PL'
                obj.bid = $(this).data('id')
                obj.uid = JSON.parse(j2aCls.GetToken())['uid']
                obj.ext = 'is_view'
                sendMsg(JSON.stringify(obj))
            }
        })
        /*附近汽油站*/
        $('.but_pay').click(function () {
            $('.home-oil').css('display', 'none')
            $('.home-oil-orderSure').css('display', 'block')
        })
        $('.oilpay-back').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $('.home-oil').css('display', 'block')
            $('.home-oil-orderSure').css('display', 'none')
        })
        /*装车单*/
        $(".waybill-menu").find(".weui-cell").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            var index=$(this).index();
            switch(index){
                case 0:$(".car-ordermanage-detail").css("display",'none');
                       $(".onloadreceipt").css("display",'block');
                       break;
                case 1:$(".car-ordermanage-detail").css("display",'none');
                       $(".track-report").css("display",'block');
                        const obj = {};
                        obj.token = JSON.parse(j2aCls.GetToken())['token'];
                        obj.plate=$('#data_carplate').html();
                        obj.function = "latestVehiclePosition";
                        obj.ext = 'latestVehiclePosition'
                        sendMsg(JSON.stringify(obj))
                       break;
                case 2:$(".car-ordermanage-detail").css("display",'none');
                       $(".receipt").css("display",'block');
                      
                       break;
                case 3:$(".car-ordermanage-detail").css("display",'none');
                       $(".no-report").css("display",'block');
                       break;
            }
        })
        $(".goods-ordermanage-back").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            $("#ordermanagedetail").css("display",'none');
            if(isGoodsResource==1){
                $(".home-goods-mineresource").css("display",'block')
            }else{
                $(".home-goods-ordermanage").css("display",'block');
            }
        })
        /*起始位置面板*/
        /*订单详情返回*/
        $(".car-ordermanage-back").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            $(".car-ordermanage-detail").css("display",'none')
            $('.my_view').hide();
            switch(current_order_details){
                case 'resource_page':
                    $('#ordermanagedetail').show();
                    break;
                case 'order_page':
                    $('.weui-tab-edit').removeClass('page-hide');
                    $('.load-btn').show();
                    break;
                case 'orderlist_page':
                    $('.home-goods-ordermanage').css('display','block');
                    break;
                case 'car_oredrdetails':
                    $('.home-car-ordermanage').show();
            }
        })
        $(".waybill-group-back").on("touchend",function () {
            stopTouchendPropagationAfterScroll();
                $(".car-ordermanage-detail").css("display",'block');
                $(".waybill-group").css("display",'none')
        })
        /*异常上报*/
        $('.exception_reporting').click(function () {
            $('.home-car-ordermanage-detail ').css('display', 'none')
            $('.no-report').css('display', 'block')
        })
        $(document).on('touchend',".find-details",function () {
            stopTouchendPropagationAfterScroll();
            let uid=$(this).parent().parent().parent().data('id');
            var index=$(this).index();
            var obj={};
            //保存车辆id信息
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.cid = uid
                j2aCls.SetToken(JSON.stringify(store))
            }
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.conditions={
                id:uid
            }
            obj.function='getCars';
            obj.ext = 'cardetails';
            sendMsg(JSON.stringify(obj))
            $('#add_car_hide').show();
            $('.car-manage').hide();
            $('.car_add_btn').hide();
            $('#car_info_save').show();
            $('.car_add_title').hide().eq(0).show();
            $(".home-car-carmanage").css("display",'none');
            $(".car-manage-detail").css("display",'block')
        })
        //货主银行卡
        $('.goods-add-bank').on('touchend',function(){
            stopTouchendPropagationAfterScroll();
            $("#add-bank-card").css("display", 'block')
            $(".goods-account-bank").css('display', 'none');
        })
        $(".add-card-back").on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            $(".goods-account-bank").css('display', 'block');
            $("#add-bank-card").css("display", 'none')
        })
        function getUserInfo(){
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];;
            obj.function='getMyinfo';
            obj.ext = 'userinfo'
            sendMsg(JSON.stringify(obj));
        }
        //车主银行卡
        $(".car_bank_add").on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            $('.car-account-bank').hide()
            $('.add-bank-car').show()
        })
        $(".car-bank-back").on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            $('.all-page').hide()
            $(".car-account-bank").css("display", 'block')
            $("#add-bank-card1").css("display", 'none')
        })
        ///新增常用地址
        $('#areaPicher').pickArea({
            "format": "四川省/德阳市/旌阳区",
            "width": "210",
            "borderColor": "white",
            "arrowColor": "white",
            "listBdColor": "gray",
            "color": "black",
            "fontSize": "12px",
            "maxHeight": "200px",
            "getVal": function () {
                var thisdom = $("." + $(".pick-area-dom").val());
                thisdom.next().val($(".pick-area-hidden").val());
            }
        });
        ////货主-订单管理-管理详情
        $('.content-item-orderdetail').click(function () {
            $('.ordermanage-list').css('display', 'none')
            $('#ordermanagedetail').css('display', 'block')
        })
        /*车主-订单管理*/
        $(".main_body").find(".order-title div").on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            $(this).siblings().find('.tab-items').removeClass('order-item-on')
            $(this).find('.tab-items').addClass('order-item-on')
            switch($(this).index()){
                case 1:
                case 2:
                const billObj={};
                billObj.token=JSON.parse(j2aCls.GetToken())['token'];
                billObj.function='getWaybillsHis';
                billObj.start=0;
                billObj.count=100;
                billObj.order = 'desc'
                billObj.sort = 'otag'
                billObj.conditions={
                    uid:JSON.parse(j2aCls.GetToken())['did'],
                }
                billObj.ext='order_full'
                sendMsg(JSON.stringify(billObj)); 
                    break;
            }
            $(".car-main-item").find('.car_item_group').css("display", 'none')
            $(".car-main-item").find('.car_item_group').eq($(this).index()).css("display", 'block')
        })
        /*货主-订单管理*/
        // 货主订单已完成-内
        $(".order-main").find("#order-title div").on('touchend', function () {
            switch($(this).index()){
                case 1:
                case 2:
                    const billObj={};
                    billObj.token=JSON.parse(j2aCls.GetToken())['token'];
                    billObj.function='fr_lik_waybills';
                    billObj.category = 'CX'
                    billObj.count = 50
                    billObj.consignor = JSON.parse(j2aCls.GetToken())['name']
                    billObj.ext = 'goods_full';
                    sendMsg(JSON.stringify(billObj)); 
                    break;
            }
            stopTouchendPropagationAfterScroll();
            $(this).siblings().find('.tab-items').removeClass('order-item-on')
            $(this).find('.tab-items').addClass('order-item-on')
            $(".item_group1").css("display",'none');
            $(".item_group1").eq($(this).index()).css("display",'block')
        })
        $(".item_group1").find('.content').on("touchend",function () {
            stopTouchendPropagationAfterScroll();
            $(".home-goods-ordermanage").css("display",'none')
            $("#ordermanagedetail").css("display",'block')
        })
        /*数据统计*/
        $('.mine-body').find('.goods-statistic-func').on('touchend', function () {
            stopTouchendPropagationAfterScroll()
            var index = $(this).index();
            switch (index) {
                case 0: $('.goods-statistic').css('display', 'none');
                    $('.goods-statistic_deliver').css('display', 'block');
                    current_page=$('.goods-statistic_deliver');
					let obj = {}
					obj.function = 'getSourcesHis'
					obj.token=JSON.parse(j2aCls.GetToken())['token'];
					obj.start = 0
					obj.count = 1000
					obj.ext = 'resource_get'
					obj.conditions = {
						gid:JSON.parse(j2aCls.GetToken())['uid']
					}
					sendMsg(JSON.stringify(obj))
                    break;
                case 1: $('.goods-statistic').css('display', 'none');
					let date = new Date()
					$('#car_end_time1').html(date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate())
                    $('.goods-statistic_fare').css('display', 'block');
                    current_page=$('.goods-statistic_fare');
					getBill()
                    break;
            }
        })
        //司机-车辆删除
        $(document).on('touchend','.delete-car',function(){
            $('#current-car-id').val($(this).data('id'))
            $('#car-del-page').show()
        })
        //车辆删除取消
        $(document).on('touchend','#car-del-cancel',function(){
            $('#car-del-page').hide()
        })
        //车辆删除确认
        $(document).on('touchend','#car-del-sure',function(){
            let obj = {}
            obj.token = JSON.parse(j2aCls.GetToken())['token']
            obj.function = "deleteCars";
            obj.sids = [];
            obj.sids.push($('#current-car-id').val())
            obj.ext='delete_car';
            sendMsg(JSON.stringify(obj))
            $('#car-del-page').hide()
        })
       $(".car_item_group").find(".order-details").on('touchend',function () {
           stopTouchendPropagationAfterScroll();
           $(".is-hidden").css("display",'block')
           $(".is-goods-orderdetails").css("display",'block')
           $(".car-ordermanage-detail").css("display",'block');
           $(".home-car-ordermanage").css("display",'none')
       })
        $(".order-back").on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $(".car-ordermanage-detail").css("display",'none');
            $(".home-car-ordermanage").css("display",'block')
        })
        /*货主-货源单管理*/
        $(".resource-main").find(".order-title div").on('touchend', function () {
    
            stopTouchendPropagationAfterScroll();
            $(this).siblings().find('span').removeClass('order-item-on')
            $(this).find('span').addClass('order-item-on')
            //这里操作
            $(".resource-main-item").find('.resource_item_group').css("display", 'none')
            $(".resource-main-item").find('.resource_item_group').eq($(this).index()).css("display", 'block')
        })
        /*货源详情*/
        $(document).on('touchend','.resource_item_group .content-item',function(){
            stopTouchendPropagationAfterScroll();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.function='getSources';
            obj.conditions={
                id:$(this).data('uid')
            }
            obj.ext='goodslist';
            sendMsg(JSON.stringify(obj))
            $(".details-group").css("display", 'none')
            $("#ordermanagedetail").css("display",'block')
        })
        //复制货源单
        $(document).on('touchend','.copy-btn',function (e) {
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            if($(this).data('fin') == 'yes'){
                obj.function = 'getSourcesHis'
            }else{
                obj.function='getSources';
            }
            obj.conditions={
                id:$(this).data('id')
            }
            obj.ext='copy_data';
            sendMsg(JSON.stringify(obj));
        })
        //货源单冻结
        $(document).on('touchend','.frozen-btn',function (e) {
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.id=$(this).data('id');
            obj.function='disableSources';
            obj.ext='frozen';
            sendMsg(JSON.stringify(obj));
            $(this).removeClass('frozen-btn')
            $(this).html('解冻')
            $(this).removeClass('btn-groups')
            $(this).addClass('unfreeze-btn');
            $(this).addClass('btn-groups-on');
        })
        //货源单解冻
        $(document).on('touchend','.unfreeze-btn',function (e) {
            stopTouchendPropagationAfterScroll();
            e.stopPropagation();
            const obj={};
            obj.token=JSON.parse(j2aCls.GetToken())['token'];
            obj.id=$(this).data('id');
            obj.function='enableSources';
            obj.ext='unfreeze';
            sendMsg(JSON.stringify(obj));
            $(this).removeClass('unfreeze-btn')
            $(this).html('冻结')
            $(this).removeClass('btn-groups-on')
            $(this).addClass('frozen-btn');
            $(this).addClass('btn-groups');
        })
        /*订单详情*/
        $(".item-group").find('div').on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            $(".details-group").css("display", 'none')
            $("#ordermanagedetail").css("display", 'block')
        })
        /*附近汽油站*/
        /*首页返回操作*/
        $(".home-back").on('touchend', function () {
            stopTouchendPropagationAfterScroll();
            order_id=null;
            $('.all-page').hide();
            $('.weui-tab-edit').removeClass('page-hide');
        })
        /*货主*/
        $('.page-goods-publish').on('touchend',function () {
            stopTouchendPropagationAfterScroll();
            $(".weui-tab-edit").addClass('page-hide');
            var obj = {};
            obj.token = JSON.parse(j2aCls.GetToken())['token'];
            obj.function = "getBusinessType";
            obj.ext = 'business-type';
            sendMsg(JSON.stringify(obj));
            $('.home-goods-release').css('display', 'block')
            //获取货主信息
            {
                let obj1={};
                obj1.token = JSON.parse(j2aCls.GetToken())['token'];
                if(JSON.parse(j2aCls.GetToken())['uid']){
                obj1.conditions={
                    id:JSON.parse(j2aCls.GetToken())['uid'],
                    }
                }
                obj1.function = "getUsers";
                obj1.ext = 'goodsowner';
                sendMsg(JSON.stringify(obj1));
            }
        })
        //常用信息
        $('.mine-body').find('.goods-info-func').on('touchend', function () {
            stopTouchendPropagationAfterScroll()
            var index = $(this).index();
            switch (index) {
                case 0:
                    var obj = {};
                    obj.token = JSON.parse(j2aCls.GetToken())['token'];
                    obj.function = "getAddresses";
                    obj.ext = 'normal-info';
                    sendMsg(JSON.stringify(obj));
                    $('.goods-normal-info').css('display', 'none');
                    $('.normal-info_raddr').css('display', 'block');
                    break;
                case 1: $('.goods-normal-info').css('display', 'none');
                    $('.normal-info_ticket').css('display', 'block');
                    break;
            }
        })
        /*货主-我的-功能*/
$('.mine-body').find('.mine-goods-func').on('touchend', function () {
    stopTouchendPropagationAfterScroll();
    var index = $(this).index();
    // $('.home-goods-mine').css('display', 'none');
    //         $('.goods-member').css('display', 'block');
    switch (index) {
        case 0: $('.home-goods-mine').css('display', 'none');
            $('.goods-certify').css('display', 'block');
            {
                //获取账户信息
                let obj = {}
                obj.token = JSON.parse(j2aCls.GetToken())['token']
                obj.conditions = {
                    id:JSON.parse(j2aCls.GetToken())['uid']
                }
                obj.function = 'getUsers'
                obj.ext = 'consignor-info'
                sendMsg(JSON.stringify(obj))
            }
            break;
        case 1: 
            break;
        case 2: $('.home-goods-mine').css('display', 'none');
            $('.goods-statistic').css('display', 'block');
            break;
        case 3: $('.home-goods-mine').css('display', 'none');
            $('.goods-normal-info').css('display', 'block');
            break;
        case 4: $('.home-goods-mine').css('display', 'none');
            $('.goods-times-complaint').css('display', 'block');
            break;
        case 5: $('.home-goods-mine').css('display', 'none');
            $('.goods-notice-message').css('display', 'block');
			let sys_msg = {}
            sys_msg.token = JSON.parse(j2aCls.GetToken())['token']
            sys_msg.category = 'PL'
            sys_msg.function ='message_push_list'
            sys_msg.ext = 'goods_sys_msg'
            sendMsg(JSON.stringify(sys_msg))
            break;
        case 6:
            $('.home-goods-mine').css('display', 'none');
            $('#current-page').val('consignor')
            $('.personal-change-pwd').show()
            break
        case 7: $('.home-goods-mine').css('display', 'none');
			$('.goods-feadback').css('display', 'block');
            break;
		case 8:
			$('.home-goods-mine').css('display', 'none');
			 $('.goods-aboutus').css('display', 'block');
			break;
    }
    })
    //修改账户密码
    {
        $('.password-back').on('touchend',function(){
            $('.personal-change-pwd').hide()
            if($('#current-page').val() == 'driver'){
                $('.home-car-mine').show()
            }else if($('#current-page').val() == 'consignor'){
                $('.home-goods-mine').show()
            }
        })
        $('.submit-pwd-edit').on('touchend',function(){
            stopTouchendPropagationAfterScroll()
            let obj = formToSerialize('#pwd-form')
            if(!obj.pwd || !obj.repwd){
                addToast('必填项不能为空')
                return
            }
            if(obj.pwd !== obj.repwd){
                addToast('两次密码不一致，请重新输入')
                $('.reinput-pwd').focus()
                return
            }
            obj.token = JSON.parse(j2aCls.GetToken())['token']
            obj.function = 'pwd_update'
            obj.category = 'PL'
            if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
                obj.id = JSON.parse(j2aCls.GetToken())['did']
            }else if(JSON.parse(j2aCls.GetToken())['role'] == 'consignor'){
                obj.id = JSON.parse(j2aCls.GetToken())['uid']
            }
            obj.ext = 'update_pwd'
            sendMsg(JSON.stringify(obj))
        })
    }
    $('#is_trail').on('click',function(){
        switch($(this).val()){
            case '0':
                $("#is_trailer").hide();
                break;
            case '1':
                $('#is_trailer').show();
                break;
        }
    })
    //我的-个人信息返回
    $('.driver-info-back').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('#message_check').hide()
        $('.personal_info').show()
    })
	//车主评价
	$('.view-items .view-item').on('touchend',function(){
		stopTouchendPropagationAfterScroll()
		$('.car-view-details').hide()
		switch($(this).index()){
			case 0:
				$('.driver-times-recording').show()
				const dv = {}
				dv.token = JSON.parse(j2aCls.GetToken())['token'];
				dv.function = "fr_gt_evaluat";
				dv.category = 'PL'
				dv.uid = JSON.parse(j2aCls.GetToken())['did']
				dv.ext = 'driver_get_view'
				sendMsg(JSON.stringify(dv))
				break
			case 1:
				$('.car-times-recording').show()
				// //获取评价数据
				const ds = {}
				ds.token = JSON.parse(j2aCls.GetToken())['token'];
				ds.start = 0
				ds.count = 100000
				ds.function = "fr_gt_evaluat";
				ds.category = 'PL'
				ds.ext = 'driver_view'
				sendMsg(JSON.stringify(ds))
		}
	})
	
	$('.views-back').on('touchend',function(){
		stopTouchendPropagationAfterScroll()
		$('.all-page').hide()
		$('.car-view-details').show()
	})
	//货主评价
	$('.goods-view-items .goods-view-item').on('touchend',function(){
		stopTouchendPropagationAfterScroll()
		$('.goods-times-complaint').hide()
		switch($(this).index()){
			case 0:
				$('.consignor-times-recording').show()
				const cv = {}
				cv.token = JSON.parse(j2aCls.GetToken())['token'];
				cv.function = "fr_gt_evaluat";
				cv.category = 'PL'
				cv.uid = JSON.parse(j2aCls.GetToken())['uid']
				cv.ext = 'consignor_get_view'
				sendMsg(JSON.stringify(cv))
				break
			case 1:
				$('.goods-times-recording').show()
				// //获取评价数据
				const ds = {}
				ds.token = JSON.parse(j2aCls.GetToken())['token'];
				ds.function = "fr_gt_evaluat";
				ds.category = 'PL'
				ds.toid = JSON.parse(j2aCls.GetToken())['uid']
			    ds.ext = 'consignor_view'
				sendMsg(JSON.stringify(ds))
		}
	})
	$('.goods-views-back').on('touchend',function(){
		stopTouchendPropagationAfterScroll()
		$('.all-page').hide()
		$('.goods-times-complaint').show()
	})
	$('#see-contract').on('touchend',function(){
		stopTouchendPropagationAfterScroll()
		let id = $('#data-billid').val()
		let obj = {}
		obj.category = 'HT' 
		obj.wid = id
		obj.function = 'getWaybillContract'
        obj.token = JSON.parse(j2aCls.GetToken())['token']
        // let url = 'https://tld.0838mai.cn/php/srv/?msg='
        let url = 'https://tld.tld56.cn/php/srv/?msg='
        // j2aCls.ShowContactDocument('/php/srv/?msg=' + JSON.stringify(obj))
        j2aCls.ShowContactDocument(url+ JSON.stringify(obj))
	})
//评论删除
$(document).on('touchend','.del-view',function(){
	stopTouchendPropagationAfterScroll()
	let obj = {}
	obj.token = JSON.parse(j2aCls.GetToken())['token'];
	obj.function = "evaluat_del";
	obj.category = 'PL'
	obj.bid = $(this).data('bid')
	obj.start = 0
	obj.count = 10
	if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
		obj.uid = JSON.parse(j2aCls.GetToken())['did']
	}else{
		obj.uid = JSON.parse(j2aCls.GetToken())['uid']
	}
	obj.ext = 'view_del'
	sendMsg(JSON.stringify(obj))
})
//咨询投诉
	$('.problem-put').on('touchend',function(){
		if(!$('.pr-text').val()){
			addToast('您好,咨询内容不能为空')
			return
		}
		let obj = {}
		obj.token = JSON.parse(j2aCls.GetToken())['token']
		obj.function = 'complaints_ti_jiao'
		obj.category ='PL'
		obj.content = $('.pr-text').val()
		obj.driver = $('#data_driver-name').html()
		obj.users_id = JSON.parse(j2aCls.GetToken())['did']
		obj.ext = 'sys_problem'
		sendMsg(JSON.stringify(obj))
	})
	$('.goods-problem-put').on('touchend',function(){
		if(!$('.goods-pr-text').val()){
			addToast('您好,咨询内容不能为空')
			return
		}
		let obj = {}
		obj.token = JSON.parse(j2aCls.GetToken())['token']
		obj.function = 'complaints_ti_jiao'
		obj.category ='PL'
		obj.content = $('.goods-pr-text').val()
		obj.consignor = $('#data_goodsowner-name').html()
		obj.users_id = JSON.parse(j2aCls.GetToken())['uid']
		obj.ext = 'sys_problem'
		sendMsg(JSON.stringify(obj))
	})
	
	////我的--数据统计--开始时间选择
	$('#start_time_picker1').click(function () {
	    var now = new Date();
	    weui.datePicker({
	        start: 2018,      // 起始时间
	        end: new Date().getFullYear(),// 结束时间
	        title: "开始时间",
	        onConfirm: function (result) {
	            result[1].value=result[1].value<10?'0'+result[1].value:result[1].value;
	            result[2].value=result[2].value<10?'0'+result[2].value:result[2].value;
	            var selected_time=result[0].value+'-'+result[1].value+'-'+result[2].value;
	            current_page.find('div #car_start_time').html(selected_time);
	        }
	    });
	})
	///结束时间
	$('#stop_time_picker1').click(function () {
	    var now= new Date();
	    weui.datePicker({
	        start: 2018,
	        end: new Date().getFullYear(),
	        title: "结束时间",
	        onConfirm: function (result) {
	            if(result[1].value<10)result[1].value='0'+result[1].value;
	            if(result[2].value<10)result[2].value='0'+result[2].value;
	            var end_time=result[0].value+'-'+result[1].value+'-'+result[2].value;
	            current_page.find('div #car_end_time').html(end_time);
	        }
	    });
	})
	////我的--数据统计--开始时间选择
	$('#start_time_picker2').click(function () {
	    var now = new Date();
	    weui.datePicker({
	        start: 2018,      // 起始时间
	        end: new Date(),       // 结束时间
	        title: "开始时间",
	        defaultValue: [now.getFullYear(),now.getMonth()+1,now.getDate()],
	        onConfirm: function (result) {
	            result[1].value=result[1].value<10?'0'+result[1].value:result[1].value;
	            result[2].value=result[2].value<10?'0'+result[2].value:result[2].value;
	            var selected_time=result[0].value+'-'+result[1].value+'-'+result[2].value;
	            current_page.find('div #car_start_time1').html(selected_time);
	        }
	    });
	})
	///结束时间
	$('#stop_time_picker2').click(function () {
	    var now= new Date();
	    weui.datePicker({
	        start: 2018,
	        end: new Date(),
	        title: "结束时间",
	        defaultValue:[now.getFullYear(),now.getMonth()+1,now.getDate()],
	        onConfirm: function (result) {
	            if(result[1].value<10)result[1].value='0'+result[1].value;
	            if(result[2].value<10)result[2].value='0'+result[2].value;
	            var end_time=result[0].value+'-'+result[1].value+'-'+result[2].value;
	            current_page.find('div #car_end_time1').html(end_time);
	        }
	    });
	})

    $('.driver-sign').on('touchend',function(){
        j2aCls.OpenSignatureBoard()
    })

	//信息查看
	$(document).on('touchend','.msg-item',function(){
		$(this).find('.msg-content').stop().slideToggle()
	})
    //开通网银
    $('.start-bank').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('#bank-open').show();
    })
    //提现记录
    $('.withdraw-history').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
       let obj = {}
       obj.function = 'getWithdraws'
       obj.token = JSON.parse(j2aCls.GetToken())['token']
       obj.category = 'WD'
       obj.order = 'desc'
       obj.sort = 'finishDate'
       obj.ext = 'withdraw_history'
       obj.conditions = {
        uid:JSON.parse(j2aCls.GetToken())['did']
       }
       sendMsg(JSON.stringify(obj))
    })
    </script>
<!--

    以下为油气代码

-->
 <script>
let gasData = []//存储加油站数据
let msgData = []//存储系统消息
let nullHtml = '<div class="no-data">暂无数据</div>' //用于查询无数据时渲染页面
// 校验车牌号
var isPlate = function(vehicleNumber) {
    var result = false;
    if (vehicleNumber == null || vehicleNumber.length == 0) return false;
    else if (vehicleNumber.length == 7) {
        var express = /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/;
        result = express.test(vehicleNumber);
    }
    return result;
}

/*
* 序列化表格
*/ 
function formToSerialize(ele){
    let obj = {}
    let form = $(ele).serializeArray()
    $.each(form,function(){
        obj[this.name] = this.value
    })
    return obj
}

/**
 * 余额小数保留,截取小数点后两位
*/
function cash2point(data){
    let da = parseInt(parseFloat(data)*100)/100
    return da
}

/**
 * 请求参数对象生成
*/
function paramObj(type,func){
    let obj = {}
    obj.token = JSON.parse(j2aCls.GetToken())['token']
    if(type != 'none'){
        obj.category = type
    }
    obj.start = 0
    obj.count = 200
    obj.function = func
    return obj
}

/*
*首页加油站列表数据生成stirng
*/
function render2string(data){
    //计算距离
    let dis = (data.distance/1000).toFixed(2)
    let x = new BigNumber(data.goods.discount[0])
    let y = new BigNumber(data.goods.discount[1])
    let discount = BigNumber(data.goods.discount[2]).plus(x).plus(y) - 0
    let actual_price =  BigNumber(data.goods.price).minus(discount) - 0
    let html = `<div class='oil-data-item' data-good=${JSON.stringify(data.goods)} data-data=${JSON.stringify(data)} style="height:auto">
                            <h2>${data.name}</h2>
                            <h3>${data.goods.type+data.goods.good}</h3>
                            <div class='flex oil-gray'>
                                <div class="flex-item">${data.address}</div>
                                <div style="width:70px;height:20px;font-size: 12px;" id="my-daohang" data-pos=${JSON.stringify(data.latlng)}>
                                    <img src="./images/oil/home/dis.png" style="width:12px;height:12px;vertical-align: middle;">
                                    <span class="oil-middle">${dis}km</span>
                                    <div style="color:#2BC34F">导航</div>
                                </div>
                            </div>
                            <div style="height: 30px;line-height: 30px;">
                                <img src="./images/oil/home/money.png" class='oil-img oil-middle'>
                                <span class='oil-middle' style="font-size:16px;color:#d50100;">${actual_price}</span>
                                <img src="./images/oil/home/drop.png" class='oil-img oil-middle'>
                                <span class='oil-middle' style="color:#2bc34f">${discount}</span>
                                <span class='oil-middle oil-gray' style="text-decoration: line-through;">市场价 ${cash2point(data.goods.price)}</span>
                            </div>
                            <div class='oil-discount' style="width:120px;">特力达用户专享优惠</div>
                            <div class='oil-gray' style="margin-top: 10px;margin-bottom:5px">
                                <img src="./images/oil/home/discount.png" class="oil-middle oil-img">
                                <span class="oil-middle">预充值用户再享充值返利</span>
                            </div>
                </div>`
    return html
}
/**
 * 首页加油站列表渲染
*/
function oilHomeRender(arr){
    if(!arr.length){
        $('#oil_list').html(nullHtml)
        return
    }
    let str = ''
    for(let item of arr){
        str += render2string(item)
    }
    str += '<div style="width:100%;height:20px"></div>'
    $('#oil_list').html(str)
}
/**
 * 首页加油站油品数据筛选
*/
function filterGas(data,option){
    let reg  = new RegExp(option,'i')
    let arr = data.filter(function(value){
        return reg.test(value.goods.type) 
    })
    let distance = parseInt($('.filter-distance').html())*1000
    arr = arr.filter(v => {
        return v.distance <= distance
    })
    // 剔除汽油
    // arr = arr.filter(v => {
    //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
    //         return false
    //     }else{
    //         return true
    //     }
    // })
    return arr
}
/**
* 订单页列表数据生成string
*/ 
function order2string(data){
    let status = ''
    let cancelBtn = ''
    switch(data.status){
        case '2':
            status = '已支付'
            break
        case '1':
            {
                let store = JSON.parse(j2aCls.GetToken())
                store.orderNo = data.transaction_number
                store.paytype = data.payment_method
                j2aCls.SetToken(JSON.stringify(store))
            }
            cancelBtn = `<span style="color:red;margin-right:15px" class="cancel-gas-bill" data-id=${data.transaction_number}>取消订单</span>`
            status = '待支付'
            break
        default:
            status = '订单关闭'
    }
    let time = null
    if(data.pay_time){
        time = data.pay_time
    }else{
        time = data.order_time
    }
    let html = `<div class="oil-data-order oli-data-order-detail" data-val=${data.id} style="position: relative;height:auto" data-status=${data.status}>
                    <div class="weui-flex place" style="height:auto">
                        <div class="weui-flex__item" style="text-align: left;"><div class="placeholder">${data.gas_name}</div></div>
                        <div class="oil-data-order_cash" ><div class="placeholder">${data.actual_amount}元</div></div>
                    </div>
                    <div class='oil-cons-type'>${data.quantity}升${data.type+data.good}</div>
                    <div class='oil-cons-time' style="margin-top:5px">${time}</div>
                    <div style="position: absolute;top:60px;right:20px;font-weight: bold">${cancelBtn}${status}</div>
                </div>`
    cancelBtn = ''
    return html
}

/**
 *
 * 充值记录列表数据生成string 
 * 
*/
function rechargeList2string(data){
    let str = ''
    for(item of data){
        let type = ''
        switch(item.payment_method){
            case '1':
                type = '支付宝充值'
                break
            case '2':
                type = '微信充值'
                break
            default:
                type = '后台充值'
        }
        if(item.status == '2'){
            let html = `<div class="oil-data-order" data-val=${item.id} style="position: relative" data-status=${item.status}>
                    <div class="weui-flex place">
                        <div class="weui-flex__item" style="text-align: left;"><div class="placeholder">充值金额</div></div>
                        <div class="oil-data-order_cash" ><div class="placeholder">${item.amount}元</div></div>
                    </div>
                    <div class='oil-cons-type'>${type}</div>
                    <div class='oil-cons-time' style="margin-top:5px">${item.create_time}</div>
                    <div style="position: absolute;top:60px;right:20px;font-weight: bold">已支付</div>
                </div>`
            str += html
        }
    }
    return str
}

/*
*订单列表数据渲染
*/
function data2page(arr,data){
    for(let item of arr){
        $('.data-'+item).html(data[item])
    }
}

/*
* 轮询支付宝,微信：支付状态
*/
let isPayTimer = null,
    isRechargeTimer = null
function alipayIsSuccess(){
    isPayTimer = setTimeout(function(){
        let obj = paramObj('CX','gas_water_search')
        obj.phone = JSON.parse(j2aCls.GetToken())['user']
        obj.ext = 'alipay_status'
        sendMsg(JSON.stringify(obj))
    },1000)
 }

 /*
 *轮询支付宝，微信：充值状态
 */
 function isAlipayRecharge(id){
    isRechargeTimer = setTimeout(function(){
        let obj = paramObj('PL','gas_recharge_list')
        obj.order_id = id
        obj.ext = 'alipay_re_success'
        sendMsg(JSON.stringify(obj))
    },1000)
 }
 /**
  * 加油站数据反馈，后端数据响应
 */
let toParams = null //距离查询接口-终点距离经纬度参数
async function  useStaion(data){
        gasData = [],disArr = []
        if(!data.rows.length){
            $('#oil_list').html(nullHtml)
            return
        }
        toParams = ''
        // fromParams = fromParams || '31.150602,104.419579'//防止定位失败时导致数据异常
        data.rows = data.rows.filter(k => {//剔除下架的加油站
            return (k.is_show == '1')
        })
        //拼接
        for(let item of data.rows){//拼接终点经纬度字符串参数
            let coordinate = item.coordinate
            let latlng = ''+coordinate.lat+','+coordinate.lng+';'
            toParams += latlng
        }
        toParams = toParams.substring(0,toParams.length-1).trim().split(';')
        let str = '' ,count = 0 ,len = toParams.length / 200
        for(let i = 0; i<=len;i++){
            let arr = null
            if(toParams.length >= (i+1)*200){
                arr = toParams.slice(count,count+199)
                count += 199
            }else{
                arr = toParams.slice(count,toParams.length)
            }
            arr = arr.join(';')
            //拼接数据
                //一对多获取距离数据
            let URL = 'https://apis.map.qq.com/ws/distance/v1/matrix?output=jsonp&mode=driving&from='+fromParams+'&to='+arr+'&key=NOUBZ-P3FH3-HSW3K-3FAQ3-EHGFS-SQFV2'
               await $.ajax({
                url:URL,
                dataType:"jsonp",
                async: false,
                jsonp:'callback',
                type:"get",
                success:function(res){
                    try {
                        let distances = res.result.rows[0].elements
                        for(let item of distances){
                            disArr.push(item.distance)
                        }
                    } catch (error) {
                        // addToast('定位异常,无法获取定位数据')
                        arr = arr.split(';')
                        for(let i=0;i<arr.length;i++){
                            disArr.push(0)
                        }
                    }
                },
            });
        }
        //数据渲染
        for(let i=0;i<data.rows.length;i++){
            let item = data.rows[i],dis=disArr[i]
                if(item.goods){
                    let goods = item.goods
                    for(let good of goods){
                        let dataObj = {}
                        dataObj.address = item.address.trim()
                        dataObj.name = item.name.trim()
                        dataObj.goods = good
                        dataObj.latlng = item.coordinate
                        dataObj.numbering = item.numbering
                        dataObj.brand = item.brand
                        dataObj.distance = dis
                        gasData.push(dataObj)
                    }
                }
        }
        $('.load-gas').hide()
        gasData.sort((a,b)  => {
            return a.distance - b.distance
        })
        let filterdata = filterGas(gasData,'0#')
         // 剔除汽油
        //  filterdata = filterdata.filter(v => {
        //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
        //         return false
        //     }else{
        //         return true
        //     }
        // })
        oilHomeRender(filterdata)
}
/*************DOM操作*********************/ 
//首页数据筛选
$('.oil-home-filter').find('.flex-item').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    let html = ''
    $('#filter-page').show()    
    $('#filter-page-item').show() 
    $('.filters').css('color','black')                
    switch($(this).index()){
        case 0:
            $('.filters').eq(0).css('color','#d50100')                
            html=`<div class="oil-items" style="width:90%;margin:10px auto">
                    <div class="oil-item filter-item-distance">1KM内</div>
                    <div class="oil-item filter-item-distance">5KM内</div>
                    <div class="oil-item filter-item-distance">10KM内</div>
                    <div class="oil-item filter-item-distance">50KM内</div>
                    <div class="oil-item filter-item-distance">100KM内</div>
                  </div>`
            break
        case 1:
             $('.filters').eq(1).css('color','#d50100')      
            html=`  <div style="width:90%;margin:10px auto">
                    <h3>柴油</h3>
                    <div class="oil-items">
                        <div class="oil-item filter-item-son">0#</div>
                        <div class="oil-item filter-item-son">-10#</div>
                        <div class="oil-item filter-item-son">-20#</div>
                    </div>
                    <h3>汽油</h3>
                    <div class="oil-items">
                        <div class="oil-item filter-item-son">90#</div>
                        <div class="oil-item filter-item-son">92#</div>
                        <div class="oil-item filter-item-son">93#</div>
                        <div class="oil-item filter-item-son">95#</div>
                        <div class="oil-item filter-item-son">97#</div>
                        <div class="oil-item filter-item-son">98#</div>
                    </div>
                    <h3>天然气</h3>
                    <div class="oil-items">
                        <div class="oil-item filter-item-son">CNG</div>
                        <div class="oil-item filter-item-son">LNG</div>
                    </div>
                    </div>
                    `  
            break
        case 2:
            $('.filters').eq(2).css('color','#d50100')      
            html=`<div class="oil-items" style="width:90%;margin:10px auto">
                        <div class="oil-item filter-item-price">价格排序</div>
                        <div class="oil-item filter-item-price">距离排序</div>
                    </div>`
            break   
    }
    $('#filter-page-item').html(html)
})
//关闭筛选面板
$('#filter-page').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.filters').css('color','black')      
    $('#filter-page').hide()
    $('#filter-page-item').hide()
})
/*oil首页返回*/
$('.oil-back').on('touchend',function(){
    $('.oil').hide()
    $('.home-oil').show()
}) 
 //进入油气
 $('#enter_gas').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.load-gas').show()
    $('.weui-tab-edit').addClass('page-hide')
    $('.home-oil').show()
    // 检测是否获取到定位信息
    {
        if(!fromParams){
            getLocation()
        }
    }
    //获取加油站数据，未登录时弹出登录面板
    {
        let obj = paramObj('PL','gas_list')
        obj.ext = 'gas_list'
        obj.count = 2000
        sendMsg(JSON.stringify(obj))
    }
})
//油气下拉刷新
{
    let startY = null,position,totalHeight =190
    $('#oil_list').on('touchstart',function(e){
        let touch = e.touches[0]
        startY = parseInt(Number(touch.pageY))
    })
    $('#oil_list').on('touchmove',function(e){
        let timer = null
        totalHeight = 190
        let touch = e.touches[0]
        position = parseInt(Number(touch.pageY)) - startY
        if(position >0){
            if(position >=30){
                clearTimeout(timer)
                $('#refrash-content').css({
                        marginTop:220+ 'px'
                    })
                timer = setTimeout(()=>{
                    $('#refrash-content').css({
                        marginTop:190+ 'px'
                    })
                    //下拉数据更新
                    {
                    }
                },2000)
            }else{
                totalHeight += position
                $('#refrash-content').css({
                    marginTop:totalHeight+ 'px'
                })
            }
        }
    })
}
{
    //首页操作
    $('#enter_recommend').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('.weui-tab-edit').addClass('page-hide')
        $('.public_page').show()
    })
    $('#enter_car_maintain').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('.weui-tab-edit').addClass('page-hide')
        $('.car_maintain_page').show()
    })
    $('#enter_road_maintain').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('.weui-tab-edit').addClass('page-hide')
        $('.road_maintain_page').show()
    })
    $('.home_page-back').on('touchend',function(){
        stopTouchendPropagationAfterScroll()
        $('.home-page-group').hide()
        $('.weui-tab-edit').removeClass('page-hide')
    })
}
//退出油气
$('.exit-gas').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.home-oil').hide()
    $('.weui-tab-edit').removeClass('page-hide')
})
/*
* 根据当前时间获取六个月时间数据
*/ 
function getDateStr(){
    let date = new Date()
    let year = date.getFullYear()
    let month = date.getMonth()
    let str = ''
    for(let i=0;i<6;i++){
        if(month>=0){
            let realmonth = month+1
            str += `<option value="${year+'-'+realmonth}" style="font-weight: bold;">${year}年${realmonth}月</option>`
        }else{
            let realmonth = month+12+1
            let realyear = year - 1
            str += `<option value="${realyear+'-'+realmonth}" style="font-weight: bold;">${realyear}年${realmonth}月</option>`
        }
        month--;
    }
    return str
}
/************************************油气tab切换*************************************/
$('.tab-group').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.tab-group').find('p').removeClass('tab-on')
    $('.oil-page-group').find('.oil-group').hide()
    $('.tab-group').find('div img').each(function(index){
       $(this).attr('src',iconUnActive($(this).attr('src')))
    })

    $(this).find('p').addClass('tab-on')
    switch($(this).index()){
        case 0:
            $('.oil-page-group').find('.oil-group').eq(0).show()
            //获取加油站数据
            var obj = paramObj('PL','gas_list')
            obj.start = 0
            obj.count = 2000
            obj.ext = 'gas_list'
            sendMsg(JSON.stringify(obj))
            break;
        case 1:
             //动态生成时间选择器
             let dateStr = getDateStr()
            $('.oil-filter-select').html(dateStr)
            //获取订单数据
            var obj = paramObj('CX','gas_water_search')
            obj.phone = JSON.parse(j2aCls.GetToken())['user']
            obj.ext = 'order_list'
            sendMsg(JSON.stringify(obj))
            $('.oil-page-group').find('.oil-group').eq(1).show()
            break;
        case 2:
            //获取系统消息
            var obj = paramObj('PL','gas_message_push_list')
            obj.ext = 'msg_list'
            sendMsg(JSON.stringify(obj))
            //获取登录用户信息
            var obj = paramObj('none','getMyinfo')
            obj.ext = 'gas_userinfo'
            sendMsg(JSON.stringify(obj))
            $('.oil-page-group').find('.oil-group').eq(2).show()
    }
    $(this).find('div img').attr('src',iconAxtive($(this).find('div img').attr('src')))
 })
// END



 function iconAxtive(src){
    let len = src.indexOf('_')
    let newSrc = src.substring(0,len)+'_a.png' 
    return newSrc
 }
 function iconUnActive(src){
    let len = src.indexOf('_')
    let newSrc = src.substring(0,len)+'_c.png' 
    return newSrc
 }

/*END*/


function closeMask(){
    //关闭遮罩
    $('.filters').css('color','black')      
    $('#filter-page').hide()
    $('#filter-page-item').hide()
}
/*首页-加油站详情-操作*/ 
$(document).on('touchend','.oil-data .oil-data-item',function(){
    stopTouchendPropagationAfterScroll()
    let data = $(this).data('data')
    $('#all-data').val(JSON.stringify(data))
    $('#discount-detail').val($(this).data('good').discount)
    $('#detail-title1').html(data.name)
    //油品，油枪，商品数据渲染
    let good = $(this).data('good')
    $('.oil-type-item').html(good.good)
    $('.oil-num-item').html(good.type)
    let str = ''
    if(typeof good.gun == 'object'){
        good.gun =  good.gun.join()
    }
    for(let item of good.gun.split(',')){
        str += ` <div class="oil-item oil-gun-item">${item}</div>`
    }
    $('.oil-gun').html(str)
    $('.home-oil').hide()
    $('.oil-detail').show()
})
//首页-顶部筛选
$(document).on('focus','.station-filter',function(){
    $(this).css('border','1px solid #d50100')
})
$(document).on('blur','.station-filter',function(){
    $(this).css('border','none')
})
$(document).on('submit','#my-form',function(e){
    e.preventDefault()
    let opt = $('.station-filter').val().trim()
    if(!opt){
        addToast('搜索内容不能为空')
    }else{
        let reg = new RegExp(opt,'i')
        let data = []
        for(let item of gasData){
            if(reg.test(item.name)){
                data.push(item)
            }
        }
        $('.load-gas').show()
        setTimeout(()=>{
            $('.load-gas').hide()
            // 剔除汽油
            // data = data.filter(v => {
            //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
            //         return false
            //     }else{
            //         return true
            //     }
            // })
            oilHomeRender(data)
        },500)
        $('.station-filter').val('')
    }
    $('.station-filter').blur()
})
// 首页-导航
$(document).on('touchend','#my-daohang',function(e){
    e.stopPropagation()
    j2aCls.OpenNavigation($(this).data('pos').lat,$(this).data('pos').lng)
})
// 首页-加油站油品筛选
$(document).on('touchend','.filter-item-son',function(){
    stopTouchendPropagationAfterScroll()
    closeMask()
    $('.filter-goods').html($(this).html())
    //搜索数据，渲染页面
    let data = filterGas(gasData,$(this).html())
    $('.load-gas').show()
	setTimeout(()=>{
        $('.load-gas').hide()
        // 剔除汽油
        // data = data.filter(v => {
        //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
        //         return false
        //     }else{
        //         return true
        //     }
        // })
        oilHomeRender(data)
	},500)
})
//首页-加油站距离筛选
$(document).on('touchend','.filter-item-distance',function(){
    stopTouchendPropagationAfterScroll()
    $('.filter-distance').html($(this).html())
    closeMask()
    let distance = parseInt($(this).html())*1000
     //距离数据筛选，渲染页面
     let data = gasData.filter(v => {
         return v.distance <= distance
     })
     //油品数据筛选
     data = data.filter(v => {
         return v.goods.type == $('.filter-goods').html()
     })
    $('.load-gas').show()
	setTimeout(()=>{
        $('.load-gas').hide()
        // 剔除汽油
        // data = data.filter(v => {
        //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
        //         return false
        //     }else{
        //         return true
        //     }
        // })
        oilHomeRender(data)
	},500)
})
//首页-加油站价格筛选
$(document).on('touchend','.filter-item-price',function(){
    stopTouchendPropagationAfterScroll()
    $('.filter-price').html($(this).html())
    closeMask()
    switch($(this).index()){
        case 0:
            let data2 = gasData.sort((a,b) =>{
                let discountA = a.goods.discount.reduce((a,b) => a+b,0)
                let finalA = parseFloat(a.goods.price) - discountA
                let discountB = b.goods.discount.reduce((a,b) => a+b,0)
                let finalB = parseFloat(b.goods.price) - discountB
                return finalA - finalB
            })
            data2 = data2.filter(v => {
                return v.goods.type == $('.filter-goods').html()
            })
            if(data2){
                let distance = parseInt($('.filter-distance').html())*1000
                data2 = data2.filter(v => {
                    return v.distance <= distance
                })
            }
            $('.load-gas').show()
            setTimeout(()=>{
                $('.load-gas').hide()
                // 剔除汽油
                // data2 = data2.filter(v => {
                //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
                //         return false
                //     }else{
                //         return true
                //     }
                // })
                oilHomeRender(data2)
            },500)
            break
        case 1:
            //数据，渲染页面
            let data3 = gasData.sort((a,b) => a.distance - b.distance)
            data3 = data3.filter(v => {
                return v.goods.type == $('.filter-goods').html()
            })
            if(data3){
                let distance = parseInt($('.filter-distance').html())*1000
                data3 = data3.filter(v => {
                    return v.distance <= distance
                })
            }
            $('.load-gas').show()
            setTimeout(()=>{
                $('.load-gas').hide()
                  // 剔除汽油
                // data3 = data3.filter(v => {
                //     if(v.goods.good == '汽油' && v.brand == '壳牌'){
                //         return false
                //     }else{
                //         return true
                //     }
                // })
                oilHomeRender(data3)
            },500)
            break
    }
})

// 首页-数据筛选
$('.oil-pay-method').find('.oil-flex').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('input[name="payMethod"]').val($(this).data('pay'))
})
/*首页-详情*/ 
$(document).on('touchend','.oil-type .oil-type-item',function(){
    stopTouchendPropagationAfterScroll()
    $('.oil-type-item').css('color','black')
    $(this).css('color','#d50100')
    $('#oil-goods').val($(this).html())
})
$(document).on('touchend','.oil-num .oil-num-item',function(){
    stopTouchendPropagationAfterScroll()
    $('.oil-num-item').css('color','black')
    $(this).css('color','#d50100')
    $('#oil-num').val($(this).html())
})
$(document).on('touchend','.oil-gun .oil-gun-item',function(){
    stopTouchendPropagationAfterScroll()
    $('.oil-gun-item').css('color','black')
    $(this).css('color','#d50100')
    $('#oil-gun').val($(this).html())
})
$('#oil-consume').on('focus',function(){
    $(this).css('borderColor','#d50100')
})
$('#oil-consume').on('blur',function(){
    $(this).css('borderColor','gray')
})
$('.oil-flex').on('touchstart',function(){
    $(this).attr('backgroundColor','#eee')
    setTimeout(() => {
        $(this).attr('backgroundColor','white')
    }, 500);
})
$('.oil-flex').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('#pay-method').val($(this).data('pay'))
    $('#mine-pay-method').val($(this).data('minepay'))
    $('.oil-flex').find('.oil-pay-radio').html('<i class="weui-icon-circle"></i>')
    $(this).find('.oil-pay-radio').html('<i class="weui-icon-success-circle pay-icon"></i>')
})
$('.oil-cash-num').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.oil-cash-num').val($(this).data('val'))
})
//END
function isWantNumber(data){
    if(!data){
        return false
    }else if(isNaN(data)){
        return false
    }else if(Number(data) <=0){
        return false
    }else{
        return true
    }
}
let orderParams = null
/***
 * 首页-油价计算-生成支付订单
 * */
$('#submit-for-pay').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    if(!isWantNumber($('#oil-consume').val())){
        addToast('消费金额有异常')
        $('#oil-consume').focus()
        return
    }else{
        $('#oil-consume').val(Number($('#oil-consume').val()))
    }
    //检查是否选择油枪
    if(!$('#oil-gun').val()){
        addToast('请选择油枪')
        return
    }
    //拿到表单数据
    orderParams = formToSerialize('#form-station-detail')
    try {
        orderParams.datas = JSON.parse(orderParams.datas)
    } catch (error) {
        
    }
    orderParams.address = orderParams.datas.address
    orderParams.gas_name = orderParams.datas.name
    orderParams.good = $('.oil-type-item').html()
    orderParams.type = $('.oil-num-item').html()
    /*
        加油量计算：支付金额 / 市场价-》加油量 
        折扣金额：加油量 * 每升折扣价
        实际扣费：支付金额 - 折扣金额
    */
    //计算每升总折扣价
    try {
        orderParams.discount = orderParams.discount.split(',')
    } catch (error) {  
    }
    let discount = orderParams.discount.reduce((a,b) =>a+b,0)
    orderParams.numbering = orderParams.datas.numbering
    //计算加油量
   let volume = cash2point(BigNumber(orderParams.consume).div(orderParams.datas.goods.price) - 0)
    //计算优惠
    let gas_discount   = cash2point(BigNumber(orderParams.discount[0]).times(volume) - 0)
    let plat_discount  = cash2point(BigNumber(orderParams.discount[1]).times(volume) - 0)
    let plat_discount2 = cash2point(BigNumber(orderParams.discount[2]).times(volume) - 0)
    let totalDiscount  = BigNumber(gas_discount).plus(plat_discount).plus(plat_discount2) - 0
    //END
    //页面数据渲染-优惠金额信息
    $('.data-discounted_price').html(gas_discount)//加油站优惠
    $('.data-other_offers').html(plat_discount)//特力达用户优惠
    $('.data-other_offers2').html(plat_discount2)//特力达用户其他优惠
    $('.discount-all').html(cash2point(totalDiscount))//总优惠金额
    //END
    //实际支付
    let finalconsume = BigNumber(orderParams.consume).minus(totalDiscount) - 0
    //END
    //参数传递
    orderParams.price = orderParams.datas.goods.price
    orderParams.quantity = volume
    orderParams.discounted_price = gas_discount
    orderParams.other_offers = plat_discount
    orderParams.other_offers2 = plat_discount2
    orderParams.actual_amount = finalconsume
    switch($('#final-pay-method').val()){
        case '油气点支付':
            orderParams.payment_method = 3
            break
        case '微信支付':
            orderParams.payment_method = 2
            break
        case '支付宝支付':
            orderParams.payment_method = 1
    }
    //END
    //待支付页面数据渲染
    let date = new Date().getTime()
    date = parseInt(date/1000)
    $('.data-order_time').html(formatDate(date))
    $('.data-amount').html(orderParams.consume)
    $('.data-paytype').html($('#final-pay-method').val())
    let arr = ['gas_name','address','good','type','quantity','actual_amount']
    data2page(arr,orderParams)
    //提交订单
    delete orderParams.discount
    delete orderParams.datas
    delete orderParams.payMethod
    orderParams.phone = JSON.parse(j2aCls.GetToken())['user']
    let obj = paramObj('PL','gasoline_order_add')
    obj = Object.assign({},obj,orderParams)
    obj.amount = obj.consume
    obj.position = fromParams
    delete obj.consume
    if(JSON.parse(j2aCls.GetToken())['user']){
            obj.phone = JSON.parse(j2aCls.GetToken())['user']
        }else{
        }
    obj.ext = 'paycash'
    sendMsg(JSON.stringify(obj))
})
//确认支付
$('.oil-sure-btn').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
        let obj = {},type = null
        switch(JSON.parse(j2aCls.GetToken())['paytype']){
            case '3':
                obj = paramObj('OZF','gaspay')
                type = 'none'
                break
            case '1':
                obj = paramObj('OZF','alipay')
                type = 'yes'
                break
            case '2':
                obj = paramObj('OZF','wxpay')
                type = 'wechat'
                break
            default:
        }
        {
            let store = JSON.parse(j2aCls.GetToken())
            store.isalipay = type
            j2aCls.SetToken(JSON.stringify(store))
        }
        obj.order_id = JSON.parse(j2aCls.GetToken())['orderNo']
        obj.distance = 800
        if(JSON.parse(j2aCls.GetToken())['user']){
            obj.phone = JSON.parse(j2aCls.GetToken())['user']
        }else{
            obj.phone = '13568231001'
        }
        obj.ext = 'ordertopay'
        sendMsg(JSON.stringify(obj))
})
// END
/*首页-订单支付*/
$('.oil-detail-back').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.oil-cash-pay').hide()  
    $('.oil-detail').show()
})

/**
 * 取消订单
*/
$(document).on('touchend','.cancel-gas-bill',function(e){
    e.stopPropagation()
    stopTouchendPropagationAfterScroll()
    let id = $(this).data('id')
    let obj = paramObj('PL','gasoline_order_cancel')
    obj.order_id = id
    obj.ext = 'cancel_order'
    sendMsg(JSON.stringify(obj))
})

/*订单页*/
$(document).on('touchend','.oli-data-order-detail',function(){
    stopTouchendPropagationAfterScroll()
    let status = $(this).data('status')
    if(status == '1'){
        $('.home-oil').hide()
        $('.oil-order-topay').show()
    }else if(status =='2' || status == '3'){
        $('.home-oil').hide()
        $('.oil-order-detail').show()
    }else{
        // addToast('关闭订单，无法查看')
    }
    let id = $(this).data('val')
    let obj = paramObj('CX','gas_water_search')
    obj.id = id
    obj.ext = 'order_list_item'
    sendMsg(JSON.stringify(obj))
}) 
//订单时间筛选监听
$('.oil-filter-select').on('change',function(){
    let obj = paramObj('CX','gas_water_month')
    obj.phone = JSON.parse(j2aCls.GetToken())['user']
    obj.date = $(this).val()
    obj.ext = 'order_list'
    sendMsg(JSON.stringify(obj))
})


// END

/*我的*/
$('.oil-menu-top a').on('touchend',function(e){
    stopTouchendPropagationAfterScroll()
    e.preventDefault()
    switch($(this).data('type')){
        case 'a1':
            $('.home-oil').hide()
            $('.oil-mine-recharge').show()
            break;
        case 'a2':
            $('.home-oil').hide()
            $('.oil-mine-recommend').show()
            break
        case 'a3':
            $('.home-oil').hide()
            $('.oil-mine-certify').show()
            break
        default:
            break
    }
})

//我的-上传行驶证
$('#upload-driverlicence').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    j2aCls.DoSelectPictrue("carLicense",'upload_licence');
})

// 我的-系统消息
$(document).on('touchend','.fade-problem,.fade-problem1',function(){
    $(this).find('.toggle-problem').stop().slideToggle()
})
$('.oil-menu-bottom').on('touchend',function(e){
    stopTouchendPropagationAfterScroll()
    switch(e.target.className){
        case 'help':
            $('.home-oil').hide()
            $('.oil-mine-help').show()
            break
        case 'answer':
            // $('.home-oil').hide()
            // $('.oil-mine-ask').show()
            addToast('0838-2376960')
            break
        case 'recharge-list':
            var obj = paramObj('PL','gas_recharge_list')
            if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
                obj.users_id = JSON.parse(j2aCls.GetToken())['did']
            }else{
                obj.users_id = JSON.parse(j2aCls.GetToken())['uid']
            }
            obj.ext = 'recharge_list'
            sendMsg(JSON.stringify(obj))
            $('.home-oil').hide()
            $('.oil-mine-recharge-list').show()
            break
        default:
            break
    }
})
$('.oil-mine-msg-btn').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.home-oil').hide()
    $('.oil-mine-msg11').show()
    if(!msgData.length){
        $('#oil-msg-content').html(nullHtml)
    }else{
        let html = ''
        for(let item of msgData){
            html  += `<div class='fade-problem'>
                            <div class="gas-flex promlem-item">
                                <div class='gas-flex_item c-pad-left'>系统消息</div>
                                <div class='gas-flex_item c-right'>${formatDate(item.time)}<img src="images/oil/home/oil_arrow_bottom.png" class="problem-img"></div>
                            </div>
                            <div class="toggle-problem">${item.content}</div>
                      </div>`
        }
        $('#oil-msg-content').html(html)
    }
})
$('.fade-problem').on('touchend',function(){
    $(this).find('.toggle-problem').stop().slideToggle()
}) 
// END

// 我的-充值
$('.oil-nums').find('.d-cash-item').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.d-input-val').val($(this).data('val'))
})
//充值方式切换
$('.oil-pay-method-mine').find('.oil-flex').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('input[name="method"]').val($(this).data('minepay'))
})
// 确认支付
$('.c-confirm-recharge').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    if(!isWantNumber($('#my_input_check').val())){
        addToast('充值金额异常')
        return
    }else{
        $('#my_input_check').val(Number($('#my_input_check').val()))
    }
    var obj = formToSerialize('#form-recharge')
    //数据渲染
    $('input[name="recharge-type"]').val(obj.method)
    $('input[name="recharge-cash"]').val(obj.recharge)
    $('.oil-mine-recharge').hide()
    $('.oil-recharge-confirm').show()
    switch(obj.method){
        case '支付宝支付':
            obj.payment_method = '1'
            break
        case '微信支付':
            obj.payment_method = '2'
            break
    }
    obj.method = '1'
    obj = Object.assign({},obj,paramObj('PL','gas_user_recharge'))
    if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
        obj.id = JSON.parse(j2aCls.GetToken())['did']
    }else{
        obj.id = JSON.parse(j2aCls.GetToken())['uid']
    }
    obj.phone = JSON.parse(j2aCls.GetToken())['user']
    obj.gasoline_Balance = $('input[name="recharge"]').val()
    obj.ext = 'order_recharge'
    sendMsg(JSON.stringify(obj))
    //获取充值返利数据
    var obj1 = paramObj('PL','gas_give_back_list')
    obj1.ext = 'recharge-back'
    sendMsg(JSON.stringify(obj1))
    //获取充值

})
//确认充值返回
$('.recharge-back').on('touchend',function(){
    $('input[name="recharge-actual"]').val('')
    stopTouchendPropagationAfterScroll()
    $('.oil-recharge-confirm').hide()
    $('.oil-mine-recharge').show()
})
//确认充值
$('.makesure-pay').on('touchend',function(){
    $('input[name="recharge-actual"]').val('')
    stopTouchendPropagationAfterScroll()
    if(JSON.parse(j2aCls.GetToken())['recharge_id']){
        if(JSON.parse(j2aCls.GetToken())['recharge_type'] == '2'){
            let obj = paramObj('OZF','wxpay_recharge')
            obj.order_id = JSON.parse(j2aCls.GetToken())['recharge_id']
            obj.ext = 'wxpay_recharge'
            sendMsg(JSON.stringify(obj))
        }else if(JSON.parse(j2aCls.GetToken())['recharge_type'] == '1'){
            let obj = paramObj('OZF','alipay_recharge')
            obj.order_id = JSON.parse(j2aCls.GetToken())['recharge_id']
            obj.ext = 'alipay_recharge'
            sendMsg(JSON.stringify(obj))
        }
    }
})
//推荐入驻
$('.d-commend-submit').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    let data = formToSerialize("#form-commend")
    let obj = paramObj('PL','customer_push_add')
    obj = Object.assign({},obj,data)
    if(JSON.parse(j2aCls.GetToken())['role'] == 'driver'){
        obj.res = JSON.parse(j2aCls.GetToken())['did']
    }else{
        obj.res = JSON.parse(j2aCls.GetToken())['uid']
    }
    obj.name = JSON.parse(j2aCls.GetToken())['user']
    obj.ext = 'recommend'
    sendMsg(JSON.stringify(obj))
})
// 我的-车辆认证-提交认证
$('#submit-for-certify').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    let data = formToSerialize('#oil-certify-form')
    let obj = Object.assign({},paramObj('PL','gas_certification'),data)
    delete obj.start 
    delete obj.count
    if(!isPlate(obj.plate)){
        addToast('车牌验证失败')
        return
    }
    obj.ext = 'car_certify'
    sendMsg(JSON.stringify(obj))
})
// 服务即将开启
$('.will-open').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    addToast('服务即将开启,敬请期待...')
})
//隐私政策
$('.personal-btn').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.personal-page').slideDown()
}) 
$('.exit_btn').on('touchend',function(){
    stopTouchendPropagationAfterScroll()
    $('.personal-page').slideUp()
})
     </script>
</body>
</html>